11/07/2025, 07:49:38 - [core.http_client_service] - info - HTTPClientService initialized with timeout=600.0s, concurrency_limit=4 - (_record=<LogRecord: core.http_client_service, 20, /home/dlewis3/Desktop/AI/saga/core/http_client_service.py, 56, "{'event': 'HTTPClientService initialized with timeout=600.0s, concurrency_limit=4', 'level': 'info', 'logger': 'core.http_client_service', 'timestamp': '11/07/2025, 07:49:38'}"> _from_structlog=True)
11/07/2025, 07:49:38 - [core.text_processing_service] - info - TextProcessingService initialized with all sub-services - (_record=<LogRecord: core.text_processing_service, 20, /home/dlewis3/Desktop/AI/saga/core/text_processing_service.py, 462, "{'event': 'TextProcessingService initialized with all sub-services', 'level': 'info', 'logger': 'core.text_processing_service', 'timestamp': '11/07/2025, 07:49:38'}"> _from_structlog=True)
11/07/2025, 07:49:38 - [core.llm_interface_refactored] - info - RefactoredLLMService initialized with separated components - (_record=<LogRecord: core.llm_interface_refactored, 20, /home/dlewis3/Desktop/AI/saga/core/llm_interface_refactored.py, 561, "{'event': 'RefactoredLLMService initialized with separated components', 'level': 'info', 'logger': 'core.llm_interface_refactored', 'timestamp': '11/07/2025, 07:49:38'}"> _from_structlog=True)
11/07/2025, 07:49:38 - [core.db_manager] - info - Neo4jManagerSingleton initialized. Call connect() to establish connection. - (_record=<LogRecord: core.db_manager, 20, /home/dlewis3/Desktop/AI/saga/core/db_manager.py, 44, "{'event': 'Neo4jManagerSingleton initialized. Call connect() to establish connection.', 'level': 'info', 'logger': 'core.db_manager', 'timestamp': '11/07/2025, 07:49:38'}"> _from_structlog=True)
11/07/2025, 07:49:39 - [core.db_manager] - info - Successfully connected to Neo4j at bolt://localhost:7687 - (_record=<LogRecord: core.db_manager, 20, /home/dlewis3/Desktop/AI/saga/core/db_manager.py, 62, "{'event': 'Successfully connected to Neo4j at bolt://localhost:7687', 'level': 'info', 'logger': 'core.db_manager', 'timestamp': '11/07/2025, 07:49:39'}"> _from_structlog=True)
11/07/2025, 07:49:39 - [core.db_manager] - info - Creating/verifying Neo4j schema elements (phased execution)... - (_record=<LogRecord: core.db_manager, 20, /home/dlewis3/Desktop/AI/saga/core/db_manager.py, 288, "{'event': 'Creating/verifying Neo4j schema elements (phased execution)...', 'level': 'info', 'logger': 'core.db_manager', 'timestamp': '11/07/2025, 07:49:39'}"> _from_structlog=True)
11/07/2025, 07:49:39 - [core.db_manager] - info - Phase 1: Creating constraints and indexes... - (_record=<LogRecord: core.db_manager, 20, /home/dlewis3/Desktop/AI/saga/core/db_manager.py, 301, "{'event': 'Phase 1: Creating constraints and indexes...', 'level': 'info', 'logger': 'core.db_manager', 'timestamp': '11/07/2025, 07:49:39'}"> _from_structlog=True)
11/07/2025, 07:49:39 - [core.db_manager] - info - Phase 1 complete: Successfully created 17 schema elements. - (_record=<LogRecord: core.db_manager, 20, /home/dlewis3/Desktop/AI/saga/core/db_manager.py, 337, "{'event': 'Phase 1 complete: Successfully created 17 schema elements.', 'level': 'info', 'logger': 'core.db_manager', 'timestamp': '11/07/2025, 07:49:39'}"> _from_structlog=True)
11/07/2025, 07:49:39 - [core.db_manager] - info - Vector index created successfully. - (_record=<LogRecord: core.db_manager, 20, /home/dlewis3/Desktop/AI/saga/core/db_manager.py, 358, "{'event': 'Vector index created successfully.', 'level': 'info', 'logger': 'core.db_manager', 'timestamp': '11/07/2025, 07:49:39'}"> _from_structlog=True)
11/07/2025, 07:49:39 - [core.db_manager] - info - Phase 2: Creating type placeholders... - (_record=<LogRecord: core.db_manager, 20, /home/dlewis3/Desktop/AI/saga/core/db_manager.py, 367, "{'event': 'Phase 2: Creating type placeholders...', 'level': 'info', 'logger': 'core.db_manager', 'timestamp': '11/07/2025, 07:49:39'}"> _from_structlog=True)
11/07/2025, 07:49:42 - [core.db_manager] - info - Neo4j: Batch processed 216 KG triple statements. Constraint validation stats: 216/216 accepted, 0 corrected, 0 rejected. - (_record=<LogRecord: core.db_manager, 20, /home/dlewis3/Desktop/AI/saga/core/db_manager.py, 161, "{'event': 'Neo4j: Batch processed 216 KG triple statements. Constraint validation stats: 216/216 accepted, 0 corrected, 0 rejected.', 'level': 'info', 'logger': 'core.db_manager', 'timestamp': '11/07/2025, 07:49:42'}"> _from_structlog=True)
11/07/2025, 07:49:42 - [core.db_manager] - info - Phase 2 complete: Successfully created 216 type placeholders. - (_record=<LogRecord: core.db_manager, 20, /home/dlewis3/Desktop/AI/saga/core/db_manager.py, 415, "{'event': 'Phase 2 complete: Successfully created 216 type placeholders.', 'level': 'info', 'logger': 'core.db_manager', 'timestamp': '11/07/2025, 07:49:42'}"> _from_structlog=True)
11/07/2025, 07:49:42 - [core.db_manager] - info - Neo4j schema (indexes, constraints, labels, relationship types, vector index) verification process complete. - (_record=<LogRecord: core.db_manager, 20, /home/dlewis3/Desktop/AI/saga/core/db_manager.py, 295, "{'event': 'Neo4j schema (indexes, constraints, labels, relationship types, vector index) verification process complete.', 'level': 'info', 'logger': 'core.db_manager', 'timestamp': '11/07/2025, 07:49:42'}"> _from_structlog=True)
11/07/2025, 07:49:42 - [data_access.plot_queries] - info - Created NovelInfo node with id 'main_novel_info' - (_record=<LogRecord: data_access.plot_queries, 20, /home/dlewis3/Desktop/AI/saga/data_access/plot_queries.py, 25, "{'event': "Created NovelInfo node with id 'main_novel_info'", 'level': 'info', 'logger': 'data_access.plot_queries', 'timestamp': '11/07/2025, 07:49:42'}"> _from_structlog=True)
11/07/2025, 07:49:42 - [data_access.world_queries] - info - Synchronizing world building data to Neo4j (non-destructive)... - (_record=<LogRecord: data_access.world_queries, 20, /home/dlewis3/Desktop/AI/saga/data_access/world_queries.py, 56, "{'event': 'Synchronizing world building data to Neo4j (non-destructive)...', 'level': 'info', 'logger': 'data_access.world_queries', 'timestamp': '11/07/2025, 07:49:42'}"> _from_structlog=True)
11/07/2025, 07:49:43 - [core.db_manager] - info - Neo4j: Batch processed 3 KG triple statements. Constraint validation stats: 3/3 accepted, 0 corrected, 0 rejected. - (_record=<LogRecord: core.db_manager, 20, /home/dlewis3/Desktop/AI/saga/core/db_manager.py, 161, "{'event': 'Neo4j: Batch processed 3 KG triple statements. Constraint validation stats: 3/3 accepted, 0 corrected, 0 rejected.', 'level': 'info', 'logger': 'core.db_manager', 'timestamp': '11/07/2025, 07:49:43'}"> _from_structlog=True)
11/07/2025, 07:49:43 - [data_access.world_queries] - info - Successfully synchronized world building data to Neo4j. - (_record=<LogRecord: data_access.world_queries, 20, /home/dlewis3/Desktop/AI/saga/data_access/world_queries.py, 447, "{'event': 'Successfully synchronized world building data to Neo4j.', 'level': 'info', 'logger': 'data_access.world_queries', 'timestamp': '11/07/2025, 07:49:43'}"> _from_structlog=True)
11/07/2025, 07:49:43 - [core.langgraph.workflow] - info - create_phase2_graph: building complete workflow graph - (_record=<LogRecord: core.langgraph.workflow, 20, /home/dlewis3/Desktop/AI/saga/core/langgraph/workflow.py, 281, "{'event': 'create_phase2_graph: building complete workflow graph', 'level': 'info', 'logger': 'core.langgraph.workflow', 'timestamp': '11/07/2025, 07:49:43'}"> _from_structlog=True)
11/07/2025, 07:49:43 - [core.langgraph.workflow] - info - create_phase2_graph: graph built successfully - (nodes=['generate', 'extract', 'commit', 'validate', 'revise', 'summarize', 'finalize'] entry_point=generate _record=<LogRecord: core.langgraph.workflow, 20, /home/dlewis3/Desktop/AI/saga/core/langgraph/workflow.py, 321, "{'nodes': ['generate', 'extract', 'commit', 'validate', 'revise', 'summarize', 'finalize'], 'entry_point': 'generate', 'event': 'create_phase2_graph: graph built successfully', 'level': 'info', 'logger': 'core.langgraph.workflow', 'timestamp': '11/07/2025, 07:49:43'}"> _from_structlog=True)
11/07/2025, 07:49:43 - [core.langgraph.workflow] - info - create_phase2_graph: compiling without checkpointing - (_record=<LogRecord: core.langgraph.workflow, 20, /home/dlewis3/Desktop/AI/saga/core/langgraph/workflow.py, 340, "{'event': 'create_phase2_graph: compiling without checkpointing', 'level': 'info', 'logger': 'core.langgraph.workflow', 'timestamp': '11/07/2025, 07:49:43'}"> _from_structlog=True)
11/07/2025, 07:49:43 - [core.langgraph.nodes.generation_node] - info - generate_chapter: starting generation - (chapter=1 model=qwen3-a3b _record=<LogRecord: core.langgraph.nodes.generation_node, 20, /home/dlewis3/Desktop/AI/saga/core/langgraph/nodes/generation_node.py, 53, "{'chapter': 1, 'model': 'qwen3-a3b', 'event': 'generate_chapter: starting generation', 'level': 'info', 'logger': 'core.langgraph.nodes.generation_node', 'timestamp': '11/07/2025, 07:49:43'}"> _from_structlog=True)
11/07/2025, 07:49:43 - [core.langgraph.nodes.generation_node] - info - generate_chapter: calling LLM - (chapter=1 model=qwen3-a3b max_tokens=32768 prompt_tokens=301 _record=<LogRecord: core.langgraph.nodes.generation_node, 20, /home/dlewis3/Desktop/AI/saga/core/langgraph/nodes/generation_node.py, 158, "{'chapter': 1, 'model': 'qwen3-a3b', 'max_tokens': 32768, 'prompt_tokens': 301, 'event': 'generate_chapter: calling LLM', 'level': 'info', 'logger': 'core.langgraph.nodes.generation_node', 'timestamp': '11/07/2025, 07:49:43'}"> _from_structlog=True)
2025-11-07 07:49:56 - [httpx] - info - HTTP Request: POST http://127.0.0.1:8080/v1/chat/completions "HTTP/1.1 200 OK"
11/07/2025, 07:49:56 - [core.langgraph.nodes.generation_node] - info - generate_chapter: generation complete - (chapter=1 word_count=1077 tokens_used=2500 _record=<LogRecord: core.langgraph.nodes.generation_node, 20, /home/dlewis3/Desktop/AI/saga/core/langgraph/nodes/generation_node.py, 194, "{'chapter': 1, 'word_count': 1077, 'tokens_used': 2500, 'event': 'generate_chapter: generation complete', 'level': 'info', 'logger': 'core.langgraph.nodes.generation_node', 'timestamp': '11/07/2025, 07:49:56'}"> _from_structlog=True)
11/07/2025, 07:49:56 - [core.langgraph.nodes.extraction_node] - info - extract_entities - (chapter=1 word_count=1077 _record=<LogRecord: core.langgraph.nodes.extraction_node, 20, /home/dlewis3/Desktop/AI/saga/core/langgraph/nodes/extraction_node.py, 63, "{'chapter': 1, 'word_count': 1077, 'event': 'extract_entities', 'level': 'info', 'logger': 'core.langgraph.nodes.extraction_node', 'timestamp': '11/07/2025, 07:49:56'}"> _from_structlog=True)
2025-11-07 07:50:04 - [httpx] - info - HTTP Request: POST http://127.0.0.1:8080/v1/chat/completions "HTTP/1.1 200 OK"
11/07/2025, 07:50:04 - [processing.parsing_utils] - info - Line 14: Filtered out problematic object entity: 'Emotionally overwhelmed' - (_record=<LogRecord: processing.parsing_utils, 20, /home/dlewis3/Desktop/AI/saga/processing/parsing_utils.py, 281, "{'event': "Line 14: Filtered out problematic object entity: 'Emotionally overwhelmed'", 'level': 'info', 'logger': 'processing.parsing_utils', 'timestamp': '11/07/2025, 07:50:04'}"> _from_structlog=True)
11/07/2025, 07:50:04 - [core.langgraph.nodes.extraction_node] - info - extract_entities: extraction complete - (characters=1 world_items=4 relationships=14 _record=<LogRecord: core.langgraph.nodes.extraction_node, 20, /home/dlewis3/Desktop/AI/saga/core/langgraph/nodes/extraction_node.py, 111, "{'characters': 1, 'world_items': 4, 'relationships': 14, 'event': 'extract_entities: extraction complete', 'level': 'info', 'logger': 'core.langgraph.nodes.extraction_node', 'timestamp': '11/07/2025, 07:50:04'}"> _from_structlog=True)
11/07/2025, 07:50:04 - [core.langgraph.nodes.commit_node] - info - commit_to_graph - (chapter=1 characters=1 world_items=4 relationships=14 _record=<LogRecord: core.langgraph.nodes.commit_node, 20, /home/dlewis3/Desktop/AI/saga/core/langgraph/nodes/commit_node.py, 72, "{'chapter': 1, 'characters': 1, 'world_items': 4, 'relationships': 14, 'event': 'commit_to_graph', 'level': 'info', 'logger': 'core.langgraph.nodes.commit_node', 'timestamp': '11/07/2025, 07:50:04'}"> _from_structlog=True)
2025-11-07 07:50:04 - [neo4j.notifications] - warning - Received notification from DBMS server: {severity: WARNING} {code: Neo.ClientNotification.Statement.UnknownLabelWarning} {category: UNRECOGNIZED} {title: The provided label is not in the database.} {description: One of the labels in your query is not available in the database, make sure you didn't misspell it or that the label is available when you run this statement in your application (the missing label name is: WorldElement)} {position: line: 3, column: 22, offset: 51} for query: "\n            MATCH (w:Entity)\n            WHERE (w:WorldElement OR w:Object OR w:Artifact OR w:Location OR w:Document OR w:Item OR w:Relic)\n              AND (w.name = $name OR \n                   toLower(w.name) = toLower($name) OR\n                   apoc.text.levenshteinSimilarity(toLower(w.name), toLower($name)) > 0.45)\n              AND ($category = '' OR w.category = $category)\n            RETURN w.id as existing_id,\n                   w.name as existing_name, \n                   w.category as existing_category,\n                   labels(w) as existing_labels,\n                   w.description as existing_description,\n                   apoc.text.levenshteinSimilarity(toLower(w.name), toLower($name)) as similarity\n            ORDER BY similarity DESC\n            LIMIT 1\n            "
2025-11-07 07:50:04 - [neo4j.notifications] - warning - Received notification from DBMS server: {severity: WARNING} {code: Neo.ClientNotification.Statement.UnknownLabelWarning} {category: UNRECOGNIZED} {title: The provided label is not in the database.} {description: One of the labels in your query is not available in the database, make sure you didn't misspell it or that the label is available when you run this statement in your application (the missing label name is: WorldElement)} {position: line: 3, column: 22, offset: 51} for query: "\n            MATCH (w:Entity)\n            WHERE (w:WorldElement OR w:Object OR w:Artifact OR w:Location OR w:Document OR w:Item OR w:Relic)\n              AND (w.name = $name OR \n                   toLower(w.name) = toLower($name) OR\n                   apoc.text.levenshteinSimilarity(toLower(w.name), toLower($name)) > 0.45)\n              AND ($category = '' OR w.category = $category)\n            RETURN w.id as existing_id,\n                   w.name as existing_name, \n                   w.category as existing_category,\n                   labels(w) as existing_labels,\n                   w.description as existing_description,\n                   apoc.text.levenshteinSimilarity(toLower(w.name), toLower($name)) as similarity\n            ORDER BY similarity DESC\n            LIMIT 1\n            "
2025-11-07 07:50:04 - [neo4j.notifications] - warning - Received notification from DBMS server: {severity: WARNING} {code: Neo.ClientNotification.Statement.UnknownLabelWarning} {category: UNRECOGNIZED} {title: The provided label is not in the database.} {description: One of the labels in your query is not available in the database, make sure you didn't misspell it or that the label is available when you run this statement in your application (the missing label name is: WorldElement)} {position: line: 3, column: 22, offset: 51} for query: "\n            MATCH (w:Entity)\n            WHERE (w:WorldElement OR w:Object OR w:Artifact OR w:Location OR w:Document OR w:Item OR w:Relic)\n              AND (w.name = $name OR \n                   toLower(w.name) = toLower($name) OR\n                   apoc.text.levenshteinSimilarity(toLower(w.name), toLower($name)) > 0.45)\n              AND ($category = '' OR w.category = $category)\n            RETURN w.id as existing_id,\n                   w.name as existing_name, \n                   w.category as existing_category,\n                   labels(w) as existing_labels,\n                   w.description as existing_description,\n                   apoc.text.levenshteinSimilarity(toLower(w.name), toLower($name)) as similarity\n            ORDER BY similarity DESC\n            LIMIT 1\n            "
2025-11-07 07:50:04 - [neo4j.notifications] - warning - Received notification from DBMS server: {severity: WARNING} {code: Neo.ClientNotification.Statement.UnknownLabelWarning} {category: UNRECOGNIZED} {title: The provided label is not in the database.} {description: One of the labels in your query is not available in the database, make sure you didn't misspell it or that the label is available when you run this statement in your application (the missing label name is: WorldElement)} {position: line: 3, column: 22, offset: 51} for query: "\n            MATCH (w:Entity)\n            WHERE (w:WorldElement OR w:Object OR w:Artifact OR w:Location OR w:Document OR w:Item OR w:Relic)\n              AND (w.name = $name OR \n                   toLower(w.name) = toLower($name) OR\n                   apoc.text.levenshteinSimilarity(toLower(w.name), toLower($name)) > 0.45)\n              AND ($category = '' OR w.category = $category)\n            RETURN w.id as existing_id,\n                   w.name as existing_name, \n                   w.category as existing_category,\n                   labels(w) as existing_labels,\n                   w.description as existing_description,\n                   apoc.text.levenshteinSimilarity(toLower(w.name), toLower($name)) as similarity\n            ORDER BY similarity DESC\n            LIMIT 1\n            "
11/07/2025, 07:50:04 - [core.db_manager] - info - Neo4j: Batch processed 5 KG triple statements. Constraint validation stats: 5/5 accepted, 0 corrected, 0 rejected. - (_record=<LogRecord: core.db_manager, 20, /home/dlewis3/Desktop/AI/saga/core/db_manager.py, 161, "{'event': 'Neo4j: Batch processed 5 KG triple statements. Constraint validation stats: 5/5 accepted, 0 corrected, 0 rejected.', 'level': 'info', 'logger': 'core.db_manager', 'timestamp': '11/07/2025, 07:50:04'}"> _from_structlog=True)
11/07/2025, 07:50:04 - [core.knowledge_graph_service] - info - Persisted 1 characters and 4 world items for chapter 1 using native models - (_record=<LogRecord: core.knowledge_graph_service, 20, /home/dlewis3/Desktop/AI/saga/core/knowledge_graph_service.py, 60, "{'event': 'Persisted 1 characters and 4 world items for chapter 1 using native models', 'level': 'info', 'logger': 'core.knowledge_graph_service', 'timestamp': '11/07/2025, 07:50:04'}"> _from_structlog=True)
11/07/2025, 07:50:04 - [core.triple_processor] - warning - Invalid subject info in triple: {'subject': 'Sarah Chen', 'predicate': 'LOCATED_AT', 'object_entity': 'entity_dc618ea8', 'is_literal_object': False, 'description': '', 'confidence': 0.8, 'chapter_added': 1} - (_record=<LogRecord: core.triple_processor, 30, /home/dlewis3/Desktop/AI/saga/core/triple_processor.py, 122, "{'event': "Invalid subject info in triple: {'subject': 'Sarah Chen', 'predicate': 'LOCATED_AT', 'object_entity': 'entity_dc618ea8', 'is_literal_object': False, 'description': '', 'confidence': 0.8, 'chapter_added': 1}", 'level': 'warning', 'logger': 'core.triple_processor', 'timestamp': '11/07/2025, 07:50:04'}"> _from_structlog=True)
11/07/2025, 07:50:04 - [core.triple_processor] - warning - Invalid subject info in triple: {'subject': 'Aetheris Station', 'predicate': 'CONTAINS', 'object_entity': 'entity_a7b2884e', 'is_literal_object': False, 'description': '', 'confidence': 0.8, 'chapter_added': 1} - (_record=<LogRecord: core.triple_processor, 30, /home/dlewis3/Desktop/AI/saga/core/triple_processor.py, 122, "{'event': "Invalid subject info in triple: {'subject': 'Aetheris Station', 'predicate': 'CONTAINS', 'object_entity': 'entity_a7b2884e', 'is_literal_object': False, 'description': '', 'confidence': 0.8, 'chapter_added': 1}", 'level': 'warning', 'logger': 'core.triple_processor', 'timestamp': '11/07/2025, 07:50:04'}"> _from_structlog=True)
11/07/2025, 07:50:04 - [core.triple_processor] - warning - Invalid subject info in triple: {'subject': 'Passive Sensor Array', 'predicate': 'DETECTS', 'object_entity': 'entity_c666d329', 'is_literal_object': False, 'description': '', 'confidence': 0.8, 'chapter_added': 1} - (_record=<LogRecord: core.triple_processor, 30, /home/dlewis3/Desktop/AI/saga/core/triple_processor.py, 122, "{'event': "Invalid subject info in triple: {'subject': 'Passive Sensor Array', 'predicate': 'DETECTS', 'object_entity': 'entity_c666d329', 'is_literal_object': False, 'description': '', 'confidence': 0.8, 'chapter_added': 1}", 'level': 'warning', 'logger': 'core.triple_processor', 'timestamp': '11/07/2025, 07:50:04'}"> _from_structlog=True)
11/07/2025, 07:50:04 - [core.triple_processor] - warning - Invalid subject info in triple: {'subject': 'Anomalous Signal', 'predicate': 'EMITS', 'object_entity': 'entity_e1ab4f2b', 'is_literal_object': False, 'description': '', 'confidence': 0.8, 'chapter_added': 1} - (_record=<LogRecord: core.triple_processor, 30, /home/dlewis3/Desktop/AI/saga/core/triple_processor.py, 122, "{'event': "Invalid subject info in triple: {'subject': 'Anomalous Signal', 'predicate': 'EMITS', 'object_entity': 'entity_e1ab4f2b', 'is_literal_object': False, 'description': '', 'confidence': 0.8, 'chapter_added': 1}", 'level': 'warning', 'logger': 'core.triple_processor', 'timestamp': '11/07/2025, 07:50:04'}"> _from_structlog=True)
11/07/2025, 07:50:04 - [core.triple_processor] - warning - Invalid subject info in triple: {'subject': 'Decoded Message', 'predicate': 'ECHOES', 'object_entity': 'Childhood Memory of Lena', 'is_literal_object': False, 'description': '', 'confidence': 0.8, 'chapter_added': 1} - (_record=<LogRecord: core.triple_processor, 30, /home/dlewis3/Desktop/AI/saga/core/triple_processor.py, 122, "{'event': "Invalid subject info in triple: {'subject': 'Decoded Message', 'predicate': 'ECHOES', 'object_entity': 'Childhood Memory of Lena', 'is_literal_object': False, 'description': '', 'confidence': 0.8, 'chapter_added': 1}", 'level': 'warning', 'logger': 'core.triple_processor', 'timestamp': '11/07/2025, 07:50:04'}"> _from_structlog=True)
11/07/2025, 07:50:04 - [core.triple_processor] - warning - Invalid subject info in triple: {'subject': 'Sarah Chen', 'predicate': 'HAS_PLOT_POINT', 'object_entity': "Revelation of Name 'Lena'", 'is_literal_object': False, 'description': '', 'confidence': 0.8, 'chapter_added': 1} - (_record=<LogRecord: core.triple_processor, 30, /home/dlewis3/Desktop/AI/saga/core/triple_processor.py, 122, "{'event': 'Invalid subject info in triple: {\'subject\': \'Sarah Chen\', \'predicate\': \'HAS_PLOT_POINT\', \'object_entity\': "Revelation of Name \'Lena\'", \'is_literal_object\': False, \'description\': \'\', \'confidence\': 0.8, \'chapter_added\': 1}', 'level': 'warning', 'logger': 'core.triple_processor', 'timestamp': '11/07/2025, 07:50:04'}"> _from_structlog=True)
11/07/2025, 07:50:04 - [core.triple_processor] - warning - Invalid subject info in triple: {'subject': 'Sarah Chen', 'predicate': 'POSSESSES', 'object_entity': 'Traumatized', 'is_literal_object': False, 'description': '', 'confidence': 0.8, 'chapter_added': 1} - (_record=<LogRecord: core.triple_processor, 30, /home/dlewis3/Desktop/AI/saga/core/triple_processor.py, 122, "{'event': "Invalid subject info in triple: {'subject': 'Sarah Chen', 'predicate': 'POSSESSES', 'object_entity': 'Traumatized', 'is_literal_object': False, 'description': '', 'confidence': 0.8, 'chapter_added': 1}", 'level': 'warning', 'logger': 'core.triple_processor', 'timestamp': '11/07/2025, 07:50:04'}"> _from_structlog=True)
11/07/2025, 07:50:04 - [core.triple_processor] - warning - Invalid subject info in triple: {'subject': 'Sarah Chen', 'predicate': 'HAS_GOAL', 'object_entity': 'Understand the origin of the signal', 'is_literal_object': False, 'description': '', 'confidence': 0.8, 'chapter_added': 1} - (_record=<LogRecord: core.triple_processor, 30, /home/dlewis3/Desktop/AI/saga/core/triple_processor.py, 122, "{'event': "Invalid subject info in triple: {'subject': 'Sarah Chen', 'predicate': 'HAS_GOAL', 'object_entity': 'Understand the origin of the signal', 'is_literal_object': False, 'description': '', 'confidence': 0.8, 'chapter_added': 1}", 'level': 'warning', 'logger': 'core.triple_processor', 'timestamp': '11/07/2025, 07:50:04'}"> _from_structlog=True)
11/07/2025, 07:50:04 - [core.triple_processor] - warning - Invalid subject info in triple: {'subject': 'Aetheris Station', 'predicate': 'CREATED_BY', 'object_entity': 'Mission Control', 'is_literal_object': False, 'description': '', 'confidence': 0.8, 'chapter_added': 1} - (_record=<LogRecord: core.triple_processor, 30, /home/dlewis3/Desktop/AI/saga/core/triple_processor.py, 122, "{'event': "Invalid subject info in triple: {'subject': 'Aetheris Station', 'predicate': 'CREATED_BY', 'object_entity': 'Mission Control', 'is_literal_object': False, 'description': '', 'confidence': 0.8, 'chapter_added': 1}", 'level': 'warning', 'logger': 'core.triple_processor', 'timestamp': '11/07/2025, 07:50:04'}"> _from_structlog=True)
11/07/2025, 07:50:04 - [core.triple_processor] - warning - Invalid subject info in triple: {'subject': 'Anomalous Signal', 'predicate': 'ORIGINATES_FROM', 'object_entity': 'Interstellar Space Beyond Kuiper Belt', 'is_literal_object': False, 'description': '', 'confidence': 0.8, 'chapter_added': 1} - (_record=<LogRecord: core.triple_processor, 30, /home/dlewis3/Desktop/AI/saga/core/triple_processor.py, 122, "{'event': "Invalid subject info in triple: {'subject': 'Anomalous Signal', 'predicate': 'ORIGINATES_FROM', 'object_entity': 'Interstellar Space Beyond Kuiper Belt', 'is_literal_object': False, 'description': '', 'confidence': 0.8, 'chapter_added': 1}", 'level': 'warning', 'logger': 'core.triple_processor', 'timestamp': '11/07/2025, 07:50:04'}"> _from_structlog=True)
11/07/2025, 07:50:04 - [core.triple_processor] - warning - Invalid subject info in triple: {'subject': 'Sarah Chen', 'predicate': 'WAS_REPLACED_BY', 'object_entity': 'Lena', 'is_literal_object': False, 'description': '', 'confidence': 0.8, 'chapter_added': 1} - (_record=<LogRecord: core.triple_processor, 30, /home/dlewis3/Desktop/AI/saga/core/triple_processor.py, 122, "{'event': "Invalid subject info in triple: {'subject': 'Sarah Chen', 'predicate': 'WAS_REPLACED_BY', 'object_entity': 'Lena', 'is_literal_object': False, 'description': '', 'confidence': 0.8, 'chapter_added': 1}", 'level': 'warning', 'logger': 'core.triple_processor', 'timestamp': '11/07/2025, 07:50:04'}"> _from_structlog=True)
11/07/2025, 07:50:04 - [core.triple_processor] - warning - Invalid subject info in triple: {'subject': 'Sarah Chen', 'predicate': 'IS_ALIVE', 'object_entity': 'Alive', 'is_literal_object': False, 'description': '', 'confidence': 0.8, 'chapter_added': 1} - (_record=<LogRecord: core.triple_processor, 30, /home/dlewis3/Desktop/AI/saga/core/triple_processor.py, 122, "{'event': "Invalid subject info in triple: {'subject': 'Sarah Chen', 'predicate': 'IS_ALIVE', 'object_entity': 'Alive', 'is_literal_object': False, 'description': '', 'confidence': 0.8, 'chapter_added': 1}", 'level': 'warning', 'logger': 'core.triple_processor', 'timestamp': '11/07/2025, 07:50:04'}"> _from_structlog=True)
11/07/2025, 07:50:04 - [core.triple_processor] - warning - Invalid subject info in triple: {'subject': 'Sarah Chen', 'predicate': 'IS_MISSING', 'object_entity': 'Not missing', 'is_literal_object': False, 'description': '', 'confidence': 0.8, 'chapter_added': 1} - (_record=<LogRecord: core.triple_processor, 30, /home/dlewis3/Desktop/AI/saga/core/triple_processor.py, 122, "{'event': "Invalid subject info in triple: {'subject': 'Sarah Chen', 'predicate': 'IS_MISSING', 'object_entity': 'Not missing', 'is_literal_object': False, 'description': '', 'confidence': 0.8, 'chapter_added': 1}", 'level': 'warning', 'logger': 'core.triple_processor', 'timestamp': '11/07/2025, 07:50:04'}"> _from_structlog=True)
11/07/2025, 07:50:04 - [core.triple_processor] - warning - Invalid subject info in triple: {'subject': 'Sarah Chen', 'predicate': 'KNOWS', 'object_entity': 'Her true identity as Lena', 'is_literal_object': False, 'description': '', 'confidence': 0.8, 'chapter_added': 1} - (_record=<LogRecord: core.triple_processor, 30, /home/dlewis3/Desktop/AI/saga/core/triple_processor.py, 122, "{'event': "Invalid subject info in triple: {'subject': 'Sarah Chen', 'predicate': 'KNOWS', 'object_entity': 'Her true identity as Lena', 'is_literal_object': False, 'description': '', 'confidence': 0.8, 'chapter_added': 1}", 'level': 'warning', 'logger': 'core.triple_processor', 'timestamp': '11/07/2025, 07:50:04'}"> _from_structlog=True)
11/07/2025, 07:50:04 - [data_access.kg_queries] - info - Constraint validation completed for 14 triples - (_record=<LogRecord: data_access.kg_queries, 20, /home/dlewis3/Desktop/AI/saga/data_access/kg_queries.py, 1173, "{'event': 'Constraint validation completed for 14 triples', 'level': 'info', 'logger': 'data_access.kg_queries', 'timestamp': '11/07/2025, 07:50:04'}"> _from_structlog=True)
11/07/2025, 07:50:04 - [data_access.kg_queries] - warning - Neo4j (Batch): Invalid subject or predicate in triple dict: {'subject': 'Sarah Chen', 'predicate': 'LOCATED_AT', 'object_entity': 'entity_dc618ea8', 'is_literal_object': False, 'description': '', 'confidence': 0.8, 'chapter_added': 1} - (_record=<LogRecord: data_access.kg_queries, 30, /home/dlewis3/Desktop/AI/saga/data_access/kg_queries.py, 1195, "{'event': "Neo4j (Batch): Invalid subject or predicate in triple dict: {'subject': 'Sarah Chen', 'predicate': 'LOCATED_AT', 'object_entity': 'entity_dc618ea8', 'is_literal_object': False, 'description': '', 'confidence': 0.8, 'chapter_added': 1}", 'level': 'warning', 'logger': 'data_access.kg_queries', 'timestamp': '11/07/2025, 07:50:04'}"> _from_structlog=True)
11/07/2025, 07:50:04 - [data_access.kg_queries] - warning - Neo4j (Batch): Invalid subject or predicate in triple dict: {'subject': 'Aetheris Station', 'predicate': 'CONTAINS', 'object_entity': 'entity_a7b2884e', 'is_literal_object': False, 'description': '', 'confidence': 0.8, 'chapter_added': 1} - (_record=<LogRecord: data_access.kg_queries, 30, /home/dlewis3/Desktop/AI/saga/data_access/kg_queries.py, 1195, "{'event': "Neo4j (Batch): Invalid subject or predicate in triple dict: {'subject': 'Aetheris Station', 'predicate': 'CONTAINS', 'object_entity': 'entity_a7b2884e', 'is_literal_object': False, 'description': '', 'confidence': 0.8, 'chapter_added': 1}", 'level': 'warning', 'logger': 'data_access.kg_queries', 'timestamp': '11/07/2025, 07:50:04'}"> _from_structlog=True)
11/07/2025, 07:50:04 - [data_access.kg_queries] - warning - Neo4j (Batch): Invalid subject or predicate in triple dict: {'subject': 'Passive Sensor Array', 'predicate': 'DETECTS', 'object_entity': 'entity_c666d329', 'is_literal_object': False, 'description': '', 'confidence': 0.8, 'chapter_added': 1} - (_record=<LogRecord: data_access.kg_queries, 30, /home/dlewis3/Desktop/AI/saga/data_access/kg_queries.py, 1195, "{'event': "Neo4j (Batch): Invalid subject or predicate in triple dict: {'subject': 'Passive Sensor Array', 'predicate': 'DETECTS', 'object_entity': 'entity_c666d329', 'is_literal_object': False, 'description': '', 'confidence': 0.8, 'chapter_added': 1}", 'level': 'warning', 'logger': 'data_access.kg_queries', 'timestamp': '11/07/2025, 07:50:04'}"> _from_structlog=True)
11/07/2025, 07:50:04 - [data_access.kg_queries] - warning - Neo4j (Batch): Invalid subject or predicate in triple dict: {'subject': 'Anomalous Signal', 'predicate': 'EMITS', 'object_entity': 'entity_e1ab4f2b', 'is_literal_object': False, 'description': '', 'confidence': 0.8, 'chapter_added': 1} - (_record=<LogRecord: data_access.kg_queries, 30, /home/dlewis3/Desktop/AI/saga/data_access/kg_queries.py, 1195, "{'event': "Neo4j (Batch): Invalid subject or predicate in triple dict: {'subject': 'Anomalous Signal', 'predicate': 'EMITS', 'object_entity': 'entity_e1ab4f2b', 'is_literal_object': False, 'description': '', 'confidence': 0.8, 'chapter_added': 1}", 'level': 'warning', 'logger': 'data_access.kg_queries', 'timestamp': '11/07/2025, 07:50:04'}"> _from_structlog=True)
11/07/2025, 07:50:04 - [data_access.kg_queries] - warning - Neo4j (Batch): Invalid subject or predicate in triple dict: {'subject': 'Decoded Message', 'predicate': 'ECHOES', 'object_entity': 'Childhood Memory of Lena', 'is_literal_object': False, 'description': '', 'confidence': 0.8, 'chapter_added': 1} - (_record=<LogRecord: data_access.kg_queries, 30, /home/dlewis3/Desktop/AI/saga/data_access/kg_queries.py, 1195, "{'event': "Neo4j (Batch): Invalid subject or predicate in triple dict: {'subject': 'Decoded Message', 'predicate': 'ECHOES', 'object_entity': 'Childhood Memory of Lena', 'is_literal_object': False, 'description': '', 'confidence': 0.8, 'chapter_added': 1}", 'level': 'warning', 'logger': 'data_access.kg_queries', 'timestamp': '11/07/2025, 07:50:04'}"> _from_structlog=True)
11/07/2025, 07:50:04 - [data_access.kg_queries] - warning - Neo4j (Batch): Invalid subject or predicate in triple dict: {'subject': 'Sarah Chen', 'predicate': 'HAS_PLOT_POINT', 'object_entity': "Revelation of Name 'Lena'", 'is_literal_object': False, 'description': '', 'confidence': 0.8, 'chapter_added': 1} - (_record=<LogRecord: data_access.kg_queries, 30, /home/dlewis3/Desktop/AI/saga/data_access/kg_queries.py, 1195, "{'event': 'Neo4j (Batch): Invalid subject or predicate in triple dict: {\'subject\': \'Sarah Chen\', \'predicate\': \'HAS_PLOT_POINT\', \'object_entity\': "Revelation of Name \'Lena\'", \'is_literal_object\': False, \'description\': \'\', \'confidence\': 0.8, \'chapter_added\': 1}', 'level': 'warning', 'logger': 'data_access.kg_queries', 'timestamp': '11/07/2025, 07:50:04'}"> _from_structlog=True)
11/07/2025, 07:50:04 - [data_access.kg_queries] - warning - Neo4j (Batch): Invalid subject or predicate in triple dict: {'subject': 'Sarah Chen', 'predicate': 'POSSESSES', 'object_entity': 'Traumatized', 'is_literal_object': False, 'description': '', 'confidence': 0.8, 'chapter_added': 1} - (_record=<LogRecord: data_access.kg_queries, 30, /home/dlewis3/Desktop/AI/saga/data_access/kg_queries.py, 1195, "{'event': "Neo4j (Batch): Invalid subject or predicate in triple dict: {'subject': 'Sarah Chen', 'predicate': 'POSSESSES', 'object_entity': 'Traumatized', 'is_literal_object': False, 'description': '', 'confidence': 0.8, 'chapter_added': 1}", 'level': 'warning', 'logger': 'data_access.kg_queries', 'timestamp': '11/07/2025, 07:50:04'}"> _from_structlog=True)
11/07/2025, 07:50:04 - [data_access.kg_queries] - warning - Neo4j (Batch): Invalid subject or predicate in triple dict: {'subject': 'Sarah Chen', 'predicate': 'HAS_GOAL', 'object_entity': 'Understand the origin of the signal', 'is_literal_object': False, 'description': '', 'confidence': 0.8, 'chapter_added': 1} - (_record=<LogRecord: data_access.kg_queries, 30, /home/dlewis3/Desktop/AI/saga/data_access/kg_queries.py, 1195, "{'event': "Neo4j (Batch): Invalid subject or predicate in triple dict: {'subject': 'Sarah Chen', 'predicate': 'HAS_GOAL', 'object_entity': 'Understand the origin of the signal', 'is_literal_object': False, 'description': '', 'confidence': 0.8, 'chapter_added': 1}", 'level': 'warning', 'logger': 'data_access.kg_queries', 'timestamp': '11/07/2025, 07:50:04'}"> _from_structlog=True)
11/07/2025, 07:50:04 - [data_access.kg_queries] - warning - Neo4j (Batch): Invalid subject or predicate in triple dict: {'subject': 'Aetheris Station', 'predicate': 'CREATED_BY', 'object_entity': 'Mission Control', 'is_literal_object': False, 'description': '', 'confidence': 0.8, 'chapter_added': 1} - (_record=<LogRecord: data_access.kg_queries, 30, /home/dlewis3/Desktop/AI/saga/data_access/kg_queries.py, 1195, "{'event': "Neo4j (Batch): Invalid subject or predicate in triple dict: {'subject': 'Aetheris Station', 'predicate': 'CREATED_BY', 'object_entity': 'Mission Control', 'is_literal_object': False, 'description': '', 'confidence': 0.8, 'chapter_added': 1}", 'level': 'warning', 'logger': 'data_access.kg_queries', 'timestamp': '11/07/2025, 07:50:04'}"> _from_structlog=True)
11/07/2025, 07:50:04 - [data_access.kg_queries] - warning - Neo4j (Batch): Invalid subject or predicate in triple dict: {'subject': 'Anomalous Signal', 'predicate': 'ORIGINATES_FROM', 'object_entity': 'Interstellar Space Beyond Kuiper Belt', 'is_literal_object': False, 'description': '', 'confidence': 0.8, 'chapter_added': 1} - (_record=<LogRecord: data_access.kg_queries, 30, /home/dlewis3/Desktop/AI/saga/data_access/kg_queries.py, 1195, "{'event': "Neo4j (Batch): Invalid subject or predicate in triple dict: {'subject': 'Anomalous Signal', 'predicate': 'ORIGINATES_FROM', 'object_entity': 'Interstellar Space Beyond Kuiper Belt', 'is_literal_object': False, 'description': '', 'confidence': 0.8, 'chapter_added': 1}", 'level': 'warning', 'logger': 'data_access.kg_queries', 'timestamp': '11/07/2025, 07:50:04'}"> _from_structlog=True)
11/07/2025, 07:50:04 - [data_access.kg_queries] - warning - Neo4j (Batch): Invalid subject or predicate in triple dict: {'subject': 'Sarah Chen', 'predicate': 'WAS_REPLACED_BY', 'object_entity': 'Lena', 'is_literal_object': False, 'description': '', 'confidence': 0.8, 'chapter_added': 1} - (_record=<LogRecord: data_access.kg_queries, 30, /home/dlewis3/Desktop/AI/saga/data_access/kg_queries.py, 1195, "{'event': "Neo4j (Batch): Invalid subject or predicate in triple dict: {'subject': 'Sarah Chen', 'predicate': 'WAS_REPLACED_BY', 'object_entity': 'Lena', 'is_literal_object': False, 'description': '', 'confidence': 0.8, 'chapter_added': 1}", 'level': 'warning', 'logger': 'data_access.kg_queries', 'timestamp': '11/07/2025, 07:50:04'}"> _from_structlog=True)
11/07/2025, 07:50:04 - [data_access.kg_queries] - warning - Neo4j (Batch): Invalid subject or predicate in triple dict: {'subject': 'Sarah Chen', 'predicate': 'IS_ALIVE', 'object_entity': 'Alive', 'is_literal_object': False, 'description': '', 'confidence': 0.8, 'chapter_added': 1} - (_record=<LogRecord: data_access.kg_queries, 30, /home/dlewis3/Desktop/AI/saga/data_access/kg_queries.py, 1195, "{'event': "Neo4j (Batch): Invalid subject or predicate in triple dict: {'subject': 'Sarah Chen', 'predicate': 'IS_ALIVE', 'object_entity': 'Alive', 'is_literal_object': False, 'description': '', 'confidence': 0.8, 'chapter_added': 1}", 'level': 'warning', 'logger': 'data_access.kg_queries', 'timestamp': '11/07/2025, 07:50:04'}"> _from_structlog=True)
11/07/2025, 07:50:04 - [data_access.kg_queries] - warning - Neo4j (Batch): Invalid subject or predicate in triple dict: {'subject': 'Sarah Chen', 'predicate': 'IS_MISSING', 'object_entity': 'Not missing', 'is_literal_object': False, 'description': '', 'confidence': 0.8, 'chapter_added': 1} - (_record=<LogRecord: data_access.kg_queries, 30, /home/dlewis3/Desktop/AI/saga/data_access/kg_queries.py, 1195, "{'event': "Neo4j (Batch): Invalid subject or predicate in triple dict: {'subject': 'Sarah Chen', 'predicate': 'IS_MISSING', 'object_entity': 'Not missing', 'is_literal_object': False, 'description': '', 'confidence': 0.8, 'chapter_added': 1}", 'level': 'warning', 'logger': 'data_access.kg_queries', 'timestamp': '11/07/2025, 07:50:04'}"> _from_structlog=True)
11/07/2025, 07:50:04 - [data_access.kg_queries] - warning - Neo4j (Batch): Invalid subject or predicate in triple dict: {'subject': 'Sarah Chen', 'predicate': 'KNOWS', 'object_entity': 'Her true identity as Lena', 'is_literal_object': False, 'description': '', 'confidence': 0.8, 'chapter_added': 1} - (_record=<LogRecord: data_access.kg_queries, 30, /home/dlewis3/Desktop/AI/saga/data_access/kg_queries.py, 1195, "{'event': "Neo4j (Batch): Invalid subject or predicate in triple dict: {'subject': 'Sarah Chen', 'predicate': 'KNOWS', 'object_entity': 'Her true identity as Lena', 'is_literal_object': False, 'description': '', 'confidence': 0.8, 'chapter_added': 1}", 'level': 'warning', 'logger': 'data_access.kg_queries', 'timestamp': '11/07/2025, 07:50:04'}"> _from_structlog=True)
11/07/2025, 07:50:04 - [data_access.kg_queries] - info - Neo4j: add_kg_triples_batch_to_db: No valid statements generated from triples. - (_record=<LogRecord: data_access.kg_queries, 20, /home/dlewis3/Desktop/AI/saga/data_access/kg_queries.py, 1472, "{'event': 'Neo4j: add_kg_triples_batch_to_db: No valid statements generated from triples.', 'level': 'info', 'logger': 'data_access.kg_queries', 'timestamp': '11/07/2025, 07:50:04'}"> _from_structlog=True)
11/07/2025, 07:50:04 - [core.langgraph.nodes.commit_node] - info - commit_to_graph: created relationships - (count=14 chapter=1 _record=<LogRecord: core.langgraph.nodes.commit_node, 20, /home/dlewis3/Desktop/AI/saga/core/langgraph/nodes/commit_node.py, 462, "{'count': 14, 'chapter': 1, 'event': 'commit_to_graph: created relationships', 'level': 'info', 'logger': 'core.langgraph.nodes.commit_node', 'timestamp': '11/07/2025, 07:50:04'}"> _from_structlog=True)
11/07/2025, 07:50:04 - [data_access.chapter_queries] - info - Neo4j: Successfully saved chapter data for chapter 1. - (_record=<LogRecord: data_access.chapter_queries, 20, /home/dlewis3/Desktop/AI/saga/data_access/chapter_queries.py, 60, "{'event': 'Neo4j: Successfully saved chapter data for chapter 1.', 'level': 'info', 'logger': 'data_access.chapter_queries', 'timestamp': '11/07/2025, 07:50:04'}"> _from_structlog=True)
11/07/2025, 07:50:04 - [core.langgraph.nodes.commit_node] - info - commit_to_graph: created chapter node - (chapter=1 word_count=1077 _record=<LogRecord: core.langgraph.nodes.commit_node, 20, /home/dlewis3/Desktop/AI/saga/core/langgraph/nodes/commit_node.py, 507, "{'chapter': 1, 'word_count': 1077, 'event': 'commit_to_graph: created chapter node', 'level': 'info', 'logger': 'core.langgraph.nodes.commit_node', 'timestamp': '11/07/2025, 07:50:04'}"> _from_structlog=True)
11/07/2025, 07:50:04 - [core.langgraph.nodes.commit_node] - info - commit_to_graph: successfully committed to knowledge graph - (chapter=1 characters=1 world_items=4 relationships=14 _record=<LogRecord: core.langgraph.nodes.commit_node, 20, /home/dlewis3/Desktop/AI/saga/core/langgraph/nodes/commit_node.py, 144, "{'chapter': 1, 'characters': 1, 'world_items': 4, 'relationships': 14, 'event': 'commit_to_graph: successfully committed to knowledge graph', 'level': 'info', 'logger': 'core.langgraph.nodes.commit_node', 'timestamp': '11/07/2025, 07:50:04'}"> _from_structlog=True)
11/07/2025, 07:50:04 - [core.langgraph.nodes.validation_node] - info - validate_consistency - (chapter=1 relationships=14 characters=1 _record=<LogRecord: core.langgraph.nodes.validation_node, 20, /home/dlewis3/Desktop/AI/saga/core/langgraph/nodes/validation_node.py, 52, "{'chapter': 1, 'relationships': 14, 'characters': 1, 'event': 'validate_consistency', 'level': 'info', 'logger': 'core.langgraph.nodes.validation_node', 'timestamp': '11/07/2025, 07:50:04'}"> _from_structlog=True)
11/07/2025, 07:50:04 - [core.triple_processor] - warning - Invalid subject info in triple: {'subject': 'Sarah Chen', 'predicate': 'LOCATED_AT', 'object_entity': 'Aetheris Station'} - (_record=<LogRecord: core.triple_processor, 30, /home/dlewis3/Desktop/AI/saga/core/triple_processor.py, 122, "{'event': "Invalid subject info in triple: {'subject': 'Sarah Chen', 'predicate': 'LOCATED_AT', 'object_entity': 'Aetheris Station'}", 'level': 'warning', 'logger': 'core.triple_processor', 'timestamp': '11/07/2025, 07:50:04'}"> _from_structlog=True)
11/07/2025, 07:50:04 - [core.triple_processor] - warning - Invalid subject info in triple: {'subject': 'Aetheris Station', 'predicate': 'CONTAINS', 'object_entity': 'Passive Sensor Array'} - (_record=<LogRecord: core.triple_processor, 30, /home/dlewis3/Desktop/AI/saga/core/triple_processor.py, 122, "{'event': "Invalid subject info in triple: {'subject': 'Aetheris Station', 'predicate': 'CONTAINS', 'object_entity': 'Passive Sensor Array'}", 'level': 'warning', 'logger': 'core.triple_processor', 'timestamp': '11/07/2025, 07:50:04'}"> _from_structlog=True)
11/07/2025, 07:50:04 - [core.triple_processor] - warning - Invalid subject info in triple: {'subject': 'Passive Sensor Array', 'predicate': 'DETECTS', 'object_entity': 'Anomalous Signal'} - (_record=<LogRecord: core.triple_processor, 30, /home/dlewis3/Desktop/AI/saga/core/triple_processor.py, 122, "{'event': "Invalid subject info in triple: {'subject': 'Passive Sensor Array', 'predicate': 'DETECTS', 'object_entity': 'Anomalous Signal'}", 'level': 'warning', 'logger': 'core.triple_processor', 'timestamp': '11/07/2025, 07:50:04'}"> _from_structlog=True)
11/07/2025, 07:50:04 - [core.triple_processor] - warning - Invalid subject info in triple: {'subject': 'Anomalous Signal', 'predicate': 'EMITS', 'object_entity': 'Decoded Message'} - (_record=<LogRecord: core.triple_processor, 30, /home/dlewis3/Desktop/AI/saga/core/triple_processor.py, 122, "{'event': "Invalid subject info in triple: {'subject': 'Anomalous Signal', 'predicate': 'EMITS', 'object_entity': 'Decoded Message'}", 'level': 'warning', 'logger': 'core.triple_processor', 'timestamp': '11/07/2025, 07:50:04'}"> _from_structlog=True)
11/07/2025, 07:50:04 - [core.triple_processor] - warning - Invalid subject info in triple: {'subject': 'Decoded Message', 'predicate': 'ECHOES', 'object_entity': 'Childhood Memory of Lena'} - (_record=<LogRecord: core.triple_processor, 30, /home/dlewis3/Desktop/AI/saga/core/triple_processor.py, 122, "{'event': "Invalid subject info in triple: {'subject': 'Decoded Message', 'predicate': 'ECHOES', 'object_entity': 'Childhood Memory of Lena'}", 'level': 'warning', 'logger': 'core.triple_processor', 'timestamp': '11/07/2025, 07:50:04'}"> _from_structlog=True)
11/07/2025, 07:50:04 - [core.triple_processor] - warning - Invalid subject info in triple: {'subject': 'Sarah Chen', 'predicate': 'HAS_PLOT_POINT', 'object_entity': "Revelation of Name 'Lena'"} - (_record=<LogRecord: core.triple_processor, 30, /home/dlewis3/Desktop/AI/saga/core/triple_processor.py, 122, "{'event': 'Invalid subject info in triple: {\'subject\': \'Sarah Chen\', \'predicate\': \'HAS_PLOT_POINT\', \'object_entity\': "Revelation of Name \'Lena\'"}', 'level': 'warning', 'logger': 'core.triple_processor', 'timestamp': '11/07/2025, 07:50:04'}"> _from_structlog=True)
11/07/2025, 07:50:04 - [core.triple_processor] - warning - Invalid subject info in triple: {'subject': 'Sarah Chen', 'predicate': 'POSSESSES', 'object_entity': 'Traumatized'} - (_record=<LogRecord: core.triple_processor, 30, /home/dlewis3/Desktop/AI/saga/core/triple_processor.py, 122, "{'event': "Invalid subject info in triple: {'subject': 'Sarah Chen', 'predicate': 'POSSESSES', 'object_entity': 'Traumatized'}", 'level': 'warning', 'logger': 'core.triple_processor', 'timestamp': '11/07/2025, 07:50:04'}"> _from_structlog=True)
11/07/2025, 07:50:04 - [core.triple_processor] - warning - Invalid subject info in triple: {'subject': 'Sarah Chen', 'predicate': 'HAS_GOAL', 'object_entity': 'Understand the origin of the signal'} - (_record=<LogRecord: core.triple_processor, 30, /home/dlewis3/Desktop/AI/saga/core/triple_processor.py, 122, "{'event': "Invalid subject info in triple: {'subject': 'Sarah Chen', 'predicate': 'HAS_GOAL', 'object_entity': 'Understand the origin of the signal'}", 'level': 'warning', 'logger': 'core.triple_processor', 'timestamp': '11/07/2025, 07:50:04'}"> _from_structlog=True)
11/07/2025, 07:50:04 - [core.triple_processor] - warning - Invalid subject info in triple: {'subject': 'Aetheris Station', 'predicate': 'CREATED_BY', 'object_entity': 'Mission Control'} - (_record=<LogRecord: core.triple_processor, 30, /home/dlewis3/Desktop/AI/saga/core/triple_processor.py, 122, "{'event': "Invalid subject info in triple: {'subject': 'Aetheris Station', 'predicate': 'CREATED_BY', 'object_entity': 'Mission Control'}", 'level': 'warning', 'logger': 'core.triple_processor', 'timestamp': '11/07/2025, 07:50:04'}"> _from_structlog=True)
11/07/2025, 07:50:04 - [core.triple_processor] - warning - Invalid subject info in triple: {'subject': 'Anomalous Signal', 'predicate': 'ORIGINATES_FROM', 'object_entity': 'Interstellar Space Beyond Kuiper Belt'} - (_record=<LogRecord: core.triple_processor, 30, /home/dlewis3/Desktop/AI/saga/core/triple_processor.py, 122, "{'event': "Invalid subject info in triple: {'subject': 'Anomalous Signal', 'predicate': 'ORIGINATES_FROM', 'object_entity': 'Interstellar Space Beyond Kuiper Belt'}", 'level': 'warning', 'logger': 'core.triple_processor', 'timestamp': '11/07/2025, 07:50:04'}"> _from_structlog=True)
11/07/2025, 07:50:04 - [core.triple_processor] - warning - Invalid subject info in triple: {'subject': 'Sarah Chen', 'predicate': 'WAS_REPLACED_BY', 'object_entity': 'Lena'} - (_record=<LogRecord: core.triple_processor, 30, /home/dlewis3/Desktop/AI/saga/core/triple_processor.py, 122, "{'event': "Invalid subject info in triple: {'subject': 'Sarah Chen', 'predicate': 'WAS_REPLACED_BY', 'object_entity': 'Lena'}", 'level': 'warning', 'logger': 'core.triple_processor', 'timestamp': '11/07/2025, 07:50:04'}"> _from_structlog=True)
11/07/2025, 07:50:04 - [core.triple_processor] - warning - Invalid subject info in triple: {'subject': 'Sarah Chen', 'predicate': 'IS_ALIVE', 'object_entity': 'Alive'} - (_record=<LogRecord: core.triple_processor, 30, /home/dlewis3/Desktop/AI/saga/core/triple_processor.py, 122, "{'event': "Invalid subject info in triple: {'subject': 'Sarah Chen', 'predicate': 'IS_ALIVE', 'object_entity': 'Alive'}", 'level': 'warning', 'logger': 'core.triple_processor', 'timestamp': '11/07/2025, 07:50:04'}"> _from_structlog=True)
11/07/2025, 07:50:04 - [core.triple_processor] - warning - Invalid subject info in triple: {'subject': 'Sarah Chen', 'predicate': 'IS_MISSING', 'object_entity': 'Not missing'} - (_record=<LogRecord: core.triple_processor, 30, /home/dlewis3/Desktop/AI/saga/core/triple_processor.py, 122, "{'event': "Invalid subject info in triple: {'subject': 'Sarah Chen', 'predicate': 'IS_MISSING', 'object_entity': 'Not missing'}", 'level': 'warning', 'logger': 'core.triple_processor', 'timestamp': '11/07/2025, 07:50:04'}"> _from_structlog=True)
11/07/2025, 07:50:04 - [core.triple_processor] - warning - Invalid subject info in triple: {'subject': 'Sarah Chen', 'predicate': 'KNOWS', 'object_entity': 'Her true identity as Lena'} - (_record=<LogRecord: core.triple_processor, 30, /home/dlewis3/Desktop/AI/saga/core/triple_processor.py, 122, "{'event': "Invalid subject info in triple: {'subject': 'Sarah Chen', 'predicate': 'KNOWS', 'object_entity': 'Her true identity as Lena'}", 'level': 'warning', 'logger': 'core.triple_processor', 'timestamp': '11/07/2025, 07:50:04'}"> _from_structlog=True)
11/07/2025, 07:50:04 - [core.langgraph.nodes.validation_node] - info - validate_consistency: validation complete - (total_issues=15 critical=0 major=15 minor=0 needs_revision=True _record=<LogRecord: core.langgraph.nodes.validation_node, 20, /home/dlewis3/Desktop/AI/saga/core/langgraph/nodes/validation_node.py, 103, "{'total_issues': 15, 'critical': 0, 'major': 15, 'minor': 0, 'needs_revision': True, 'event': 'validate_consistency: validation complete', 'level': 'info', 'logger': 'core.langgraph.nodes.validation_node', 'timestamp': '11/07/2025, 07:50:04'}"> _from_structlog=True)
11/07/2025, 07:50:04 - [core.langgraph.workflow] - info - should_revise_or_continue: routing decision - (needs_revision=True iteration=0 max_iterations=3 force_continue=False _record=<LogRecord: core.langgraph.workflow, 20, /home/dlewis3/Desktop/AI/saga/core/langgraph/workflow.py, 220, "{'needs_revision': True, 'iteration': 0, 'max_iterations': 3, 'force_continue': False, 'event': 'should_revise_or_continue: routing decision', 'level': 'info', 'logger': 'core.langgraph.workflow', 'timestamp': '11/07/2025, 07:50:04'}"> _from_structlog=True)
11/07/2025, 07:50:04 - [core.langgraph.workflow] - info - should_revise_or_continue: revision needed, routing to revise node - (_record=<LogRecord: core.langgraph.workflow, 20, /home/dlewis3/Desktop/AI/saga/core/langgraph/workflow.py, 246, "{'event': 'should_revise_or_continue: revision needed, routing to revise node', 'level': 'info', 'logger': 'core.langgraph.workflow', 'timestamp': '11/07/2025, 07:50:04'}"> _from_structlog=True)
11/07/2025, 07:50:04 - [core.langgraph.nodes.revision_node] - info - revise_chapter: starting revision - (chapter=1 iteration=0 contradictions=15 _record=<LogRecord: core.langgraph.nodes.revision_node, 20, /home/dlewis3/Desktop/AI/saga/core/langgraph/nodes/revision_node.py, 54, "{'chapter': 1, 'iteration': 0, 'contradictions': 15, 'event': 'revise_chapter: starting revision', 'level': 'info', 'logger': 'core.langgraph.nodes.revision_node', 'timestamp': '11/07/2025, 07:50:04'}"> _from_structlog=True)
11/07/2025, 07:50:04 - [core.langgraph.nodes.revision_node] - info - revise_chapter: calling LLM for revision - (chapter=1 model=qwen3-a3b iteration=1 max_tokens=32768 _record=<LogRecord: core.langgraph.nodes.revision_node, 20, /home/dlewis3/Desktop/AI/saga/core/langgraph/nodes/revision_node.py, 138, "{'chapter': 1, 'model': 'qwen3-a3b', 'iteration': 1, 'max_tokens': 32768, 'event': 'revise_chapter: calling LLM for revision', 'level': 'info', 'logger': 'core.langgraph.nodes.revision_node', 'timestamp': '11/07/2025, 07:50:04'}"> _from_structlog=True)
11/07/2025, 07:50:29 - [core.db_manager] - info - Neo4j driver closed. - (_record=<LogRecord: core.db_manager, 20, /home/dlewis3/Desktop/AI/saga/core/db_manager.py, 91, "{'event': 'Neo4j driver closed.', 'level': 'info', 'logger': 'core.db_manager', 'timestamp': '11/07/2025, 07:50:29'}"> _from_structlog=True)
11/07/2025, 07:56:52 - [core.http_client_service] - info - HTTPClientService initialized with timeout=600.0s, concurrency_limit=4 - (_record=<LogRecord: core.http_client_service, 20, /home/user/saga/core/http_client_service.py, 56, "{'event': 'HTTPClientService initialized with timeout=600.0s, concurrency_limit=4', 'level': 'info', 'logger': 'core.http_client_service', 'timestamp': '11/07/2025, 07:56:52'}"> _from_structlog=True)
11/07/2025, 07:56:52 - [core.text_processing_service] - info - TextProcessingService initialized with all sub-services - (_record=<LogRecord: core.text_processing_service, 20, /home/user/saga/core/text_processing_service.py, 462, "{'event': 'TextProcessingService initialized with all sub-services', 'level': 'info', 'logger': 'core.text_processing_service', 'timestamp': '11/07/2025, 07:56:52'}"> _from_structlog=True)
11/07/2025, 07:56:52 - [core.llm_interface_refactored] - info - RefactoredLLMService initialized with separated components - (_record=<LogRecord: core.llm_interface_refactored, 20, /home/user/saga/core/llm_interface_refactored.py, 561, "{'event': 'RefactoredLLMService initialized with separated components', 'level': 'info', 'logger': 'core.llm_interface_refactored', 'timestamp': '11/07/2025, 07:56:52'}"> _from_structlog=True)
11/07/2025, 07:56:52 - [core.db_manager] - info - Neo4jManagerSingleton initialized. Call connect() to establish connection. - (_record=<LogRecord: core.db_manager, 20, /home/user/saga/core/db_manager.py, 44, "{'event': 'Neo4jManagerSingleton initialized. Call connect() to establish connection.', 'level': 'info', 'logger': 'core.db_manager', 'timestamp': '11/07/2025, 07:56:52'}"> _from_structlog=True)
11/07/2025, 07:56:52 - [core.langgraph.nodes.commit_node] - info - commit_to_graph - (chapter=1 characters=0 world_items=0 relationships=0 _record=<LogRecord: core.langgraph.nodes.commit_node, 20, /home/user/saga/core/langgraph/nodes/commit_node.py, 72, "{'chapter': 1, 'characters': 0, 'world_items': 0, 'relationships': 0, 'event': 'commit_to_graph', 'level': 'info', 'logger': 'core.langgraph.nodes.commit_node', 'timestamp': '11/07/2025, 07:56:52'}"> _from_structlog=True)
11/07/2025, 07:56:52 - [core.langgraph.nodes.commit_node] - info - commit_to_graph: created chapter node - (chapter=1 word_count=0 _record=<LogRecord: core.langgraph.nodes.commit_node, 20, /home/user/saga/core/langgraph/nodes/commit_node.py, 546, "{'chapter': 1, 'word_count': 0, 'event': 'commit_to_graph: created chapter node', 'level': 'info', 'logger': 'core.langgraph.nodes.commit_node', 'timestamp': '11/07/2025, 07:56:52'}"> _from_structlog=True)
11/07/2025, 07:56:52 - [core.langgraph.nodes.commit_node] - info - commit_to_graph: successfully committed to knowledge graph - (chapter=1 characters=0 world_items=0 relationships=0 _record=<LogRecord: core.langgraph.nodes.commit_node, 20, /home/user/saga/core/langgraph/nodes/commit_node.py, 146, "{'chapter': 1, 'characters': 0, 'world_items': 0, 'relationships': 0, 'event': 'commit_to_graph: successfully committed to knowledge graph', 'level': 'info', 'logger': 'core.langgraph.nodes.commit_node', 'timestamp': '11/07/2025, 07:56:52'}"> _from_structlog=True)
11/07/2025, 07:56:52 - [core.langgraph.nodes.commit_node] - info - commit_to_graph - (chapter=1 characters=2 world_items=1 relationships=1 _record=<LogRecord: core.langgraph.nodes.commit_node, 20, /home/user/saga/core/langgraph/nodes/commit_node.py, 72, "{'chapter': 1, 'characters': 2, 'world_items': 1, 'relationships': 1, 'event': 'commit_to_graph', 'level': 'info', 'logger': 'core.langgraph.nodes.commit_node', 'timestamp': '11/07/2025, 07:56:52'}"> _from_structlog=True)
11/07/2025, 07:56:52 - [core.langgraph.nodes.commit_node] - info - commit_to_graph: created relationships - (count=1 chapter=1 _record=<LogRecord: core.langgraph.nodes.commit_node, 20, /home/user/saga/core/langgraph/nodes/commit_node.py, 501, "{'count': 1, 'chapter': 1, 'event': 'commit_to_graph: created relationships', 'level': 'info', 'logger': 'core.langgraph.nodes.commit_node', 'timestamp': '11/07/2025, 07:56:52'}"> _from_structlog=True)
11/07/2025, 07:56:52 - [core.langgraph.nodes.commit_node] - info - commit_to_graph: created chapter node - (chapter=1 word_count=2000 _record=<LogRecord: core.langgraph.nodes.commit_node, 20, /home/user/saga/core/langgraph/nodes/commit_node.py, 546, "{'chapter': 1, 'word_count': 2000, 'event': 'commit_to_graph: created chapter node', 'level': 'info', 'logger': 'core.langgraph.nodes.commit_node', 'timestamp': '11/07/2025, 07:56:52'}"> _from_structlog=True)
11/07/2025, 07:56:52 - [core.langgraph.nodes.commit_node] - info - commit_to_graph: successfully committed to knowledge graph - (chapter=1 characters=2 world_items=1 relationships=1 _record=<LogRecord: core.langgraph.nodes.commit_node, 20, /home/user/saga/core/langgraph/nodes/commit_node.py, 146, "{'chapter': 1, 'characters': 2, 'world_items': 1, 'relationships': 1, 'event': 'commit_to_graph: successfully committed to knowledge graph', 'level': 'info', 'logger': 'core.langgraph.nodes.commit_node', 'timestamp': '11/07/2025, 07:56:52'}"> _from_structlog=True)
11/07/2025, 07:56:52 - [core.langgraph.nodes.commit_node] - info - commit_to_graph - (chapter=1 characters=2 world_items=1 relationships=1 _record=<LogRecord: core.langgraph.nodes.commit_node, 20, /home/user/saga/core/langgraph/nodes/commit_node.py, 72, "{'chapter': 1, 'characters': 2, 'world_items': 1, 'relationships': 1, 'event': 'commit_to_graph', 'level': 'info', 'logger': 'core.langgraph.nodes.commit_node', 'timestamp': '11/07/2025, 07:56:52'}"> _from_structlog=True)
11/07/2025, 07:56:52 - [core.langgraph.nodes.commit_node] - error - commit_to_graph: error during commit - (error=Database error chapter=1 exc_info=True _record=<LogRecord: core.langgraph.nodes.commit_node, 40, /home/user/saga/core/langgraph/nodes/commit_node.py, 161, "{'error': 'Database error', 'chapter': 1, 'exc_info': True, 'event': 'commit_to_graph: error during commit', 'level': 'error', 'logger': 'core.langgraph.nodes.commit_node', 'timestamp': '11/07/2025, 07:56:52'}"> _from_structlog=True)
11/07/2025, 07:56:52 - [core.langgraph.nodes.commit_node] - info - commit_to_graph - (chapter=1 characters=2 world_items=1 relationships=1 _record=<LogRecord: core.langgraph.nodes.commit_node, 20, /home/user/saga/core/langgraph/nodes/commit_node.py, 72, "{'chapter': 1, 'characters': 2, 'world_items': 1, 'relationships': 1, 'event': 'commit_to_graph', 'level': 'info', 'logger': 'core.langgraph.nodes.commit_node', 'timestamp': '11/07/2025, 07:56:52'}"> _from_structlog=True)
11/07/2025, 07:56:52 - [core.langgraph.nodes.commit_node] - error - commit_to_graph: failed to create relationships - (error=object MagicMock can't be used in 'await' expression chapter=1 exc_info=True _record=<LogRecord: core.langgraph.nodes.commit_node, 40, /home/user/saga/core/langgraph/nodes/commit_node.py, 508, "{'error': "object MagicMock can't be used in 'await' expression", 'chapter': 1, 'exc_info': True, 'event': 'commit_to_graph: failed to create relationships', 'level': 'error', 'logger': 'core.langgraph.nodes.commit_node', 'timestamp': '11/07/2025, 07:56:52'}"> _from_structlog=True)
11/07/2025, 07:56:52 - [core.langgraph.nodes.commit_node] - info - commit_to_graph: created chapter node - (chapter=1 word_count=2000 _record=<LogRecord: core.langgraph.nodes.commit_node, 20, /home/user/saga/core/langgraph/nodes/commit_node.py, 546, "{'chapter': 1, 'word_count': 2000, 'event': 'commit_to_graph: created chapter node', 'level': 'info', 'logger': 'core.langgraph.nodes.commit_node', 'timestamp': '11/07/2025, 07:56:52'}"> _from_structlog=True)
11/07/2025, 07:56:52 - [core.langgraph.nodes.commit_node] - info - commit_to_graph: successfully committed to knowledge graph - (chapter=1 characters=2 world_items=1 relationships=1 _record=<LogRecord: core.langgraph.nodes.commit_node, 20, /home/user/saga/core/langgraph/nodes/commit_node.py, 146, "{'chapter': 1, 'characters': 2, 'world_items': 1, 'relationships': 1, 'event': 'commit_to_graph: successfully committed to knowledge graph', 'level': 'info', 'logger': 'core.langgraph.nodes.commit_node', 'timestamp': '11/07/2025, 07:56:52'}"> _from_structlog=True)
11/07/2025, 07:56:52 - [core.langgraph.nodes.commit_node] - info - commit_to_graph - (chapter=1 characters=2 world_items=1 relationships=1 _record=<LogRecord: core.langgraph.nodes.commit_node, 20, /home/user/saga/core/langgraph/nodes/commit_node.py, 72, "{'chapter': 1, 'characters': 2, 'world_items': 1, 'relationships': 1, 'event': 'commit_to_graph', 'level': 'info', 'logger': 'core.langgraph.nodes.commit_node', 'timestamp': '11/07/2025, 07:56:52'}"> _from_structlog=True)
11/07/2025, 07:56:52 - [core.langgraph.nodes.commit_node] - error - commit_to_graph: failed to create relationships - (error=object MagicMock can't be used in 'await' expression chapter=1 exc_info=True _record=<LogRecord: core.langgraph.nodes.commit_node, 40, /home/user/saga/core/langgraph/nodes/commit_node.py, 508, "{'error': "object MagicMock can't be used in 'await' expression", 'chapter': 1, 'exc_info': True, 'event': 'commit_to_graph: failed to create relationships', 'level': 'error', 'logger': 'core.langgraph.nodes.commit_node', 'timestamp': '11/07/2025, 07:56:52'}"> _from_structlog=True)
11/07/2025, 07:56:52 - [core.langgraph.nodes.commit_node] - info - commit_to_graph: created chapter node - (chapter=1 word_count=2000 _record=<LogRecord: core.langgraph.nodes.commit_node, 20, /home/user/saga/core/langgraph/nodes/commit_node.py, 546, "{'chapter': 1, 'word_count': 2000, 'event': 'commit_to_graph: created chapter node', 'level': 'info', 'logger': 'core.langgraph.nodes.commit_node', 'timestamp': '11/07/2025, 07:56:52'}"> _from_structlog=True)
11/07/2025, 07:56:52 - [core.langgraph.nodes.commit_node] - info - commit_to_graph: successfully committed to knowledge graph - (chapter=1 characters=2 world_items=1 relationships=1 _record=<LogRecord: core.langgraph.nodes.commit_node, 20, /home/user/saga/core/langgraph/nodes/commit_node.py, 146, "{'chapter': 1, 'characters': 2, 'world_items': 1, 'relationships': 1, 'event': 'commit_to_graph: successfully committed to knowledge graph', 'level': 'info', 'logger': 'core.langgraph.nodes.commit_node', 'timestamp': '11/07/2025, 07:56:52'}"> _from_structlog=True)
11/07/2025, 07:57:03 - [core.http_client_service] - info - HTTPClientService initialized with timeout=600.0s, concurrency_limit=4 - (_record=<LogRecord: core.http_client_service, 20, /home/user/saga/core/http_client_service.py, 56, "{'event': 'HTTPClientService initialized with timeout=600.0s, concurrency_limit=4', 'level': 'info', 'logger': 'core.http_client_service', 'timestamp': '11/07/2025, 07:57:03'}"> _from_structlog=True)
11/07/2025, 07:57:03 - [core.text_processing_service] - info - TextProcessingService initialized with all sub-services - (_record=<LogRecord: core.text_processing_service, 20, /home/user/saga/core/text_processing_service.py, 462, "{'event': 'TextProcessingService initialized with all sub-services', 'level': 'info', 'logger': 'core.text_processing_service', 'timestamp': '11/07/2025, 07:57:03'}"> _from_structlog=True)
11/07/2025, 07:57:03 - [core.llm_interface_refactored] - info - RefactoredLLMService initialized with separated components - (_record=<LogRecord: core.llm_interface_refactored, 20, /home/user/saga/core/llm_interface_refactored.py, 561, "{'event': 'RefactoredLLMService initialized with separated components', 'level': 'info', 'logger': 'core.llm_interface_refactored', 'timestamp': '11/07/2025, 07:57:03'}"> _from_structlog=True)
11/07/2025, 07:57:03 - [core.db_manager] - info - Neo4jManagerSingleton initialized. Call connect() to establish connection. - (_record=<LogRecord: core.db_manager, 20, /home/user/saga/core/db_manager.py, 44, "{'event': 'Neo4jManagerSingleton initialized. Call connect() to establish connection.', 'level': 'info', 'logger': 'core.db_manager', 'timestamp': '11/07/2025, 07:57:03'}"> _from_structlog=True)
11/07/2025, 07:57:03 - [core.langgraph.nodes.commit_node] - info - commit_to_graph - (chapter=1 characters=0 world_items=0 relationships=0 _record=<LogRecord: core.langgraph.nodes.commit_node, 20, /home/user/saga/core/langgraph/nodes/commit_node.py, 72, "{'chapter': 1, 'characters': 0, 'world_items': 0, 'relationships': 0, 'event': 'commit_to_graph', 'level': 'info', 'logger': 'core.langgraph.nodes.commit_node', 'timestamp': '11/07/2025, 07:57:03'}"> _from_structlog=True)
11/07/2025, 07:57:03 - [core.langgraph.nodes.commit_node] - info - commit_to_graph: created chapter node - (chapter=1 word_count=0 _record=<LogRecord: core.langgraph.nodes.commit_node, 20, /home/user/saga/core/langgraph/nodes/commit_node.py, 546, "{'chapter': 1, 'word_count': 0, 'event': 'commit_to_graph: created chapter node', 'level': 'info', 'logger': 'core.langgraph.nodes.commit_node', 'timestamp': '11/07/2025, 07:57:03'}"> _from_structlog=True)
11/07/2025, 07:57:03 - [core.langgraph.nodes.commit_node] - info - commit_to_graph: successfully committed to knowledge graph - (chapter=1 characters=0 world_items=0 relationships=0 _record=<LogRecord: core.langgraph.nodes.commit_node, 20, /home/user/saga/core/langgraph/nodes/commit_node.py, 146, "{'chapter': 1, 'characters': 0, 'world_items': 0, 'relationships': 0, 'event': 'commit_to_graph: successfully committed to knowledge graph', 'level': 'info', 'logger': 'core.langgraph.nodes.commit_node', 'timestamp': '11/07/2025, 07:57:03'}"> _from_structlog=True)
11/07/2025, 07:57:03 - [core.langgraph.nodes.commit_node] - info - commit_to_graph - (chapter=1 characters=2 world_items=1 relationships=1 _record=<LogRecord: core.langgraph.nodes.commit_node, 20, /home/user/saga/core/langgraph/nodes/commit_node.py, 72, "{'chapter': 1, 'characters': 2, 'world_items': 1, 'relationships': 1, 'event': 'commit_to_graph', 'level': 'info', 'logger': 'core.langgraph.nodes.commit_node', 'timestamp': '11/07/2025, 07:57:03'}"> _from_structlog=True)
11/07/2025, 07:57:03 - [core.langgraph.nodes.commit_node] - info - commit_to_graph: created relationships - (count=1 chapter=1 _record=<LogRecord: core.langgraph.nodes.commit_node, 20, /home/user/saga/core/langgraph/nodes/commit_node.py, 501, "{'count': 1, 'chapter': 1, 'event': 'commit_to_graph: created relationships', 'level': 'info', 'logger': 'core.langgraph.nodes.commit_node', 'timestamp': '11/07/2025, 07:57:03'}"> _from_structlog=True)
11/07/2025, 07:57:03 - [core.langgraph.nodes.commit_node] - info - commit_to_graph: created chapter node - (chapter=1 word_count=2000 _record=<LogRecord: core.langgraph.nodes.commit_node, 20, /home/user/saga/core/langgraph/nodes/commit_node.py, 546, "{'chapter': 1, 'word_count': 2000, 'event': 'commit_to_graph: created chapter node', 'level': 'info', 'logger': 'core.langgraph.nodes.commit_node', 'timestamp': '11/07/2025, 07:57:03'}"> _from_structlog=True)
11/07/2025, 07:57:03 - [core.langgraph.nodes.commit_node] - info - commit_to_graph: successfully committed to knowledge graph - (chapter=1 characters=2 world_items=1 relationships=1 _record=<LogRecord: core.langgraph.nodes.commit_node, 20, /home/user/saga/core/langgraph/nodes/commit_node.py, 146, "{'chapter': 1, 'characters': 2, 'world_items': 1, 'relationships': 1, 'event': 'commit_to_graph: successfully committed to knowledge graph', 'level': 'info', 'logger': 'core.langgraph.nodes.commit_node', 'timestamp': '11/07/2025, 07:57:03'}"> _from_structlog=True)
11/07/2025, 07:57:03 - [core.langgraph.nodes.commit_node] - info - commit_to_graph - (chapter=1 characters=2 world_items=1 relationships=1 _record=<LogRecord: core.langgraph.nodes.commit_node, 20, /home/user/saga/core/langgraph/nodes/commit_node.py, 72, "{'chapter': 1, 'characters': 2, 'world_items': 1, 'relationships': 1, 'event': 'commit_to_graph', 'level': 'info', 'logger': 'core.langgraph.nodes.commit_node', 'timestamp': '11/07/2025, 07:57:03'}"> _from_structlog=True)
11/07/2025, 07:57:03 - [core.langgraph.nodes.commit_node] - error - commit_to_graph: error during commit - (error=Database error chapter=1 exc_info=True _record=<LogRecord: core.langgraph.nodes.commit_node, 40, /home/user/saga/core/langgraph/nodes/commit_node.py, 161, "{'error': 'Database error', 'chapter': 1, 'exc_info': True, 'event': 'commit_to_graph: error during commit', 'level': 'error', 'logger': 'core.langgraph.nodes.commit_node', 'timestamp': '11/07/2025, 07:57:03'}"> _from_structlog=True)
11/07/2025, 07:57:03 - [core.langgraph.nodes.commit_node] - info - commit_to_graph - (chapter=1 characters=2 world_items=1 relationships=1 _record=<LogRecord: core.langgraph.nodes.commit_node, 20, /home/user/saga/core/langgraph/nodes/commit_node.py, 72, "{'chapter': 1, 'characters': 2, 'world_items': 1, 'relationships': 1, 'event': 'commit_to_graph', 'level': 'info', 'logger': 'core.langgraph.nodes.commit_node', 'timestamp': '11/07/2025, 07:57:03'}"> _from_structlog=True)
11/07/2025, 07:57:03 - [core.langgraph.nodes.commit_node] - error - commit_to_graph: failed to create relationships - (error=object MagicMock can't be used in 'await' expression chapter=1 exc_info=True _record=<LogRecord: core.langgraph.nodes.commit_node, 40, /home/user/saga/core/langgraph/nodes/commit_node.py, 508, "{'error': "object MagicMock can't be used in 'await' expression", 'chapter': 1, 'exc_info': True, 'event': 'commit_to_graph: failed to create relationships', 'level': 'error', 'logger': 'core.langgraph.nodes.commit_node', 'timestamp': '11/07/2025, 07:57:03'}"> _from_structlog=True)
11/07/2025, 07:57:03 - [core.langgraph.nodes.commit_node] - info - commit_to_graph: created chapter node - (chapter=1 word_count=2000 _record=<LogRecord: core.langgraph.nodes.commit_node, 20, /home/user/saga/core/langgraph/nodes/commit_node.py, 546, "{'chapter': 1, 'word_count': 2000, 'event': 'commit_to_graph: created chapter node', 'level': 'info', 'logger': 'core.langgraph.nodes.commit_node', 'timestamp': '11/07/2025, 07:57:03'}"> _from_structlog=True)
11/07/2025, 07:57:03 - [core.langgraph.nodes.commit_node] - info - commit_to_graph: successfully committed to knowledge graph - (chapter=1 characters=2 world_items=1 relationships=1 _record=<LogRecord: core.langgraph.nodes.commit_node, 20, /home/user/saga/core/langgraph/nodes/commit_node.py, 146, "{'chapter': 1, 'characters': 2, 'world_items': 1, 'relationships': 1, 'event': 'commit_to_graph: successfully committed to knowledge graph', 'level': 'info', 'logger': 'core.langgraph.nodes.commit_node', 'timestamp': '11/07/2025, 07:57:03'}"> _from_structlog=True)
11/07/2025, 07:57:03 - [core.langgraph.nodes.commit_node] - info - commit_to_graph - (chapter=1 characters=2 world_items=1 relationships=1 _record=<LogRecord: core.langgraph.nodes.commit_node, 20, /home/user/saga/core/langgraph/nodes/commit_node.py, 72, "{'chapter': 1, 'characters': 2, 'world_items': 1, 'relationships': 1, 'event': 'commit_to_graph', 'level': 'info', 'logger': 'core.langgraph.nodes.commit_node', 'timestamp': '11/07/2025, 07:57:03'}"> _from_structlog=True)
11/07/2025, 07:57:03 - [core.langgraph.nodes.commit_node] - error - commit_to_graph: failed to create relationships - (error=object MagicMock can't be used in 'await' expression chapter=1 exc_info=True _record=<LogRecord: core.langgraph.nodes.commit_node, 40, /home/user/saga/core/langgraph/nodes/commit_node.py, 508, "{'error': "object MagicMock can't be used in 'await' expression", 'chapter': 1, 'exc_info': True, 'event': 'commit_to_graph: failed to create relationships', 'level': 'error', 'logger': 'core.langgraph.nodes.commit_node', 'timestamp': '11/07/2025, 07:57:03'}"> _from_structlog=True)
11/07/2025, 07:57:03 - [core.langgraph.nodes.commit_node] - info - commit_to_graph: created chapter node - (chapter=1 word_count=2000 _record=<LogRecord: core.langgraph.nodes.commit_node, 20, /home/user/saga/core/langgraph/nodes/commit_node.py, 546, "{'chapter': 1, 'word_count': 2000, 'event': 'commit_to_graph: created chapter node', 'level': 'info', 'logger': 'core.langgraph.nodes.commit_node', 'timestamp': '11/07/2025, 07:57:03'}"> _from_structlog=True)
11/07/2025, 07:57:03 - [core.langgraph.nodes.commit_node] - info - commit_to_graph: successfully committed to knowledge graph - (chapter=1 characters=2 world_items=1 relationships=1 _record=<LogRecord: core.langgraph.nodes.commit_node, 20, /home/user/saga/core/langgraph/nodes/commit_node.py, 146, "{'chapter': 1, 'characters': 2, 'world_items': 1, 'relationships': 1, 'event': 'commit_to_graph: successfully committed to knowledge graph', 'level': 'info', 'logger': 'core.langgraph.nodes.commit_node', 'timestamp': '11/07/2025, 07:57:03'}"> _from_structlog=True)
11/07/2025, 07:57:03 - [core.langgraph.nodes.extraction_node] - warning - _parse_extraction_json: empty extraction text - (chapter=1 _record=<LogRecord: core.langgraph.nodes.extraction_node, 30, /home/user/saga/core/langgraph/nodes/extraction_node.py, 429, "{'chapter': 1, 'event': '_parse_extraction_json: empty extraction text', 'level': 'warning', 'logger': 'core.langgraph.nodes.extraction_node', 'timestamp': '11/07/2025, 07:57:03'}"> _from_structlog=True)
11/07/2025, 07:57:03 - [core.langgraph.nodes.extraction_node] - warning - _parse_extraction_json: JSON parsing failed - (error=Expecting value: line 1 column 15 (char 14) chapter=1 _record=<LogRecord: core.langgraph.nodes.extraction_node, 30, /home/user/saga/core/langgraph/nodes/extraction_node.py, 450, "{'error': 'Expecting value: line 1 column 15 (char 14)', 'chapter': 1, 'event': '_parse_extraction_json: JSON parsing failed', 'level': 'warning', 'logger': 'core.langgraph.nodes.extraction_node', 'timestamp': '11/07/2025, 07:57:03'}"> _from_structlog=True)
11/07/2025, 07:57:03 - [core.langgraph.nodes.extraction_node] - info - extract_entities - (chapter=1 word_count=0 _record=<LogRecord: core.langgraph.nodes.extraction_node, 20, /home/user/saga/core/langgraph/nodes/extraction_node.py, 63, "{'chapter': 1, 'word_count': 0, 'event': 'extract_entities', 'level': 'info', 'logger': 'core.langgraph.nodes.extraction_node', 'timestamp': '11/07/2025, 07:57:03'}"> _from_structlog=True)
11/07/2025, 07:57:03 - [core.langgraph.nodes.extraction_node] - warning - extract_entities: no draft text to extract from - (_record=<LogRecord: core.langgraph.nodes.extraction_node, 30, /home/user/saga/core/langgraph/nodes/extraction_node.py, 71, "{'event': 'extract_entities: no draft text to extract from', 'level': 'warning', 'logger': 'core.langgraph.nodes.extraction_node', 'timestamp': '11/07/2025, 07:57:03'}"> _from_structlog=True)
11/07/2025, 07:57:03 - [core.langgraph.nodes.extraction_node] - info - extract_entities - (chapter=1 word_count=2000 _record=<LogRecord: core.langgraph.nodes.extraction_node, 20, /home/user/saga/core/langgraph/nodes/extraction_node.py, 63, "{'chapter': 1, 'word_count': 2000, 'event': 'extract_entities', 'level': 'info', 'logger': 'core.langgraph.nodes.extraction_node', 'timestamp': '11/07/2025, 07:57:03'}"> _from_structlog=True)
11/07/2025, 07:57:03 - [core.langgraph.nodes.extraction_node] - info - extract_entities: extraction complete - (characters=2 world_items=2 relationships=3 _record=<LogRecord: core.langgraph.nodes.extraction_node, 20, /home/user/saga/core/langgraph/nodes/extraction_node.py, 111, "{'characters': 2, 'world_items': 2, 'relationships': 3, 'event': 'extract_entities: extraction complete', 'level': 'info', 'logger': 'core.langgraph.nodes.extraction_node', 'timestamp': '11/07/2025, 07:57:03'}"> _from_structlog=True)
11/07/2025, 07:57:03 - [core.langgraph.nodes.extraction_node] - info - extract_entities - (chapter=1 word_count=0 _record=<LogRecord: core.langgraph.nodes.extraction_node, 20, /home/user/saga/core/langgraph/nodes/extraction_node.py, 63, "{'chapter': 1, 'word_count': 0, 'event': 'extract_entities', 'level': 'info', 'logger': 'core.langgraph.nodes.extraction_node', 'timestamp': '11/07/2025, 07:57:03'}"> _from_structlog=True)
11/07/2025, 07:57:03 - [core.langgraph.nodes.extraction_node] - error - _llm_extract_updates: LLM call failed - (error=LLM service error exc_info=True _record=<LogRecord: core.langgraph.nodes.extraction_node, 40, /home/user/saga/core/langgraph/nodes/extraction_node.py, 215, "{'error': 'LLM service error', 'exc_info': True, 'event': '_llm_extract_updates: LLM call failed', 'level': 'error', 'logger': 'core.langgraph.nodes.extraction_node', 'timestamp': '11/07/2025, 07:57:03'}"> _from_structlog=True)
11/07/2025, 07:57:03 - [core.langgraph.nodes.extraction_node] - warning - extract_entities: LLM extraction returned no text - (chapter=1 _record=<LogRecord: core.langgraph.nodes.extraction_node, 30, /home/user/saga/core/langgraph/nodes/extraction_node.py, 92, "{'chapter': 1, 'event': 'extract_entities: LLM extraction returned no text', 'level': 'warning', 'logger': 'core.langgraph.nodes.extraction_node', 'timestamp': '11/07/2025, 07:57:03'}"> _from_structlog=True)
11/07/2025, 07:57:03 - [core.langgraph.nodes.extraction_node] - info - extract_entities - (chapter=1 word_count=0 _record=<LogRecord: core.langgraph.nodes.extraction_node, 20, /home/user/saga/core/langgraph/nodes/extraction_node.py, 63, "{'chapter': 1, 'word_count': 0, 'event': 'extract_entities', 'level': 'info', 'logger': 'core.langgraph.nodes.extraction_node', 'timestamp': '11/07/2025, 07:57:03'}"> _from_structlog=True)
11/07/2025, 07:57:03 - [core.langgraph.nodes.extraction_node] - warning - extract_entities: LLM extraction returned no text - (chapter=1 _record=<LogRecord: core.langgraph.nodes.extraction_node, 30, /home/user/saga/core/langgraph/nodes/extraction_node.py, 92, "{'chapter': 1, 'event': 'extract_entities: LLM extraction returned no text', 'level': 'warning', 'logger': 'core.langgraph.nodes.extraction_node', 'timestamp': '11/07/2025, 07:57:03'}"> _from_structlog=True)
11/07/2025, 07:57:03 - [core.langgraph.nodes.extraction_node] - info - extract_entities - (chapter=5 word_count=0 _record=<LogRecord: core.langgraph.nodes.extraction_node, 20, /home/user/saga/core/langgraph/nodes/extraction_node.py, 63, "{'chapter': 5, 'word_count': 0, 'event': 'extract_entities', 'level': 'info', 'logger': 'core.langgraph.nodes.extraction_node', 'timestamp': '11/07/2025, 07:57:03'}"> _from_structlog=True)
11/07/2025, 07:57:03 - [core.langgraph.nodes.extraction_node] - info - extract_entities: extraction complete - (characters=2 world_items=2 relationships=3 _record=<LogRecord: core.langgraph.nodes.extraction_node, 20, /home/user/saga/core/langgraph/nodes/extraction_node.py, 111, "{'characters': 2, 'world_items': 2, 'relationships': 3, 'event': 'extract_entities: extraction complete', 'level': 'info', 'logger': 'core.langgraph.nodes.extraction_node', 'timestamp': '11/07/2025, 07:57:03'}"> _from_structlog=True)
11/07/2025, 07:57:03 - [core.langgraph.nodes.extraction_node] - info - extract_entities - (chapter=1 word_count=0 _record=<LogRecord: core.langgraph.nodes.extraction_node, 20, /home/user/saga/core/langgraph/nodes/extraction_node.py, 63, "{'chapter': 1, 'word_count': 0, 'event': 'extract_entities', 'level': 'info', 'logger': 'core.langgraph.nodes.extraction_node', 'timestamp': '11/07/2025, 07:57:03'}"> _from_structlog=True)
11/07/2025, 07:57:03 - [core.langgraph.nodes.extraction_node] - warning - _parse_extraction_json: JSON parsing failed - (error=Unterminated string starting at: line 1 column 24 (char 23) chapter=1 _record=<LogRecord: core.langgraph.nodes.extraction_node, 30, /home/user/saga/core/langgraph/nodes/extraction_node.py, 450, "{'error': 'Unterminated string starting at: line 1 column 24 (char 23)', 'chapter': 1, 'event': '_parse_extraction_json: JSON parsing failed', 'level': 'warning', 'logger': 'core.langgraph.nodes.extraction_node', 'timestamp': '11/07/2025, 07:57:03'}"> _from_structlog=True)
11/07/2025, 07:57:03 - [core.langgraph.nodes.extraction_node] - info - extract_entities: extraction complete - (characters=0 world_items=0 relationships=0 _record=<LogRecord: core.langgraph.nodes.extraction_node, 20, /home/user/saga/core/langgraph/nodes/extraction_node.py, 111, "{'characters': 0, 'world_items': 0, 'relationships': 0, 'event': 'extract_entities: extraction complete', 'level': 'info', 'logger': 'core.langgraph.nodes.extraction_node', 'timestamp': '11/07/2025, 07:57:03'}"> _from_structlog=True)
11/07/2025, 07:57:03 - [core.langgraph.nodes.extraction_node] - info - extract_entities - (chapter=3 word_count=0 _record=<LogRecord: core.langgraph.nodes.extraction_node, 20, /home/user/saga/core/langgraph/nodes/extraction_node.py, 63, "{'chapter': 3, 'word_count': 0, 'event': 'extract_entities', 'level': 'info', 'logger': 'core.langgraph.nodes.extraction_node', 'timestamp': '11/07/2025, 07:57:03'}"> _from_structlog=True)
11/07/2025, 07:57:03 - [core.langgraph.nodes.extraction_node] - info - extract_entities: extraction complete - (characters=2 world_items=2 relationships=3 _record=<LogRecord: core.langgraph.nodes.extraction_node, 20, /home/user/saga/core/langgraph/nodes/extraction_node.py, 111, "{'characters': 2, 'world_items': 2, 'relationships': 3, 'event': 'extract_entities: extraction complete', 'level': 'info', 'logger': 'core.langgraph.nodes.extraction_node', 'timestamp': '11/07/2025, 07:57:03'}"> _from_structlog=True)
11/07/2025, 07:57:03 - [core.langgraph.nodes.finalize_node] - info - finalize_chapter: starting finalization - (chapter=1 _record=<LogRecord: core.langgraph.nodes.finalize_node, 20, /home/user/saga/core/langgraph/nodes/finalize_node.py, 54, "{'chapter': 1, 'event': 'finalize_chapter: starting finalization', 'level': 'info', 'logger': 'core.langgraph.nodes.finalize_node', 'timestamp': '11/07/2025, 07:57:03'}"> _from_structlog=True)
11/07/2025, 07:57:03 - [core.langgraph.nodes.finalize_node] - info - finalize_chapter: chapter saved to filesystem - (chapter=1 path=/tmp/pytest-of-root/pytest-17/test_finalize_chapter_success0/test-project/chapters/chapter_001.txt _record=<LogRecord: core.langgraph.nodes.finalize_node, 20, /home/user/saga/core/langgraph/nodes/finalize_node.py, 191, "{'chapter': 1, 'path': '/tmp/pytest-of-root/pytest-17/test_finalize_chapter_success0/test-project/chapters/chapter_001.txt', 'event': 'finalize_chapter: chapter saved to filesystem', 'level': 'info', 'logger': 'core.langgraph.nodes.finalize_node', 'timestamp': '11/07/2025, 07:57:03'}"> _from_structlog=True)
11/07/2025, 07:57:03 - [core.langgraph.nodes.finalize_node] - info - finalize_chapter: embedding generated - (chapter=1 embedding_shape=(1024,) _record=<LogRecord: core.langgraph.nodes.finalize_node, 20, /home/user/saga/core/langgraph/nodes/finalize_node.py, 92, "{'chapter': 1, 'embedding_shape': (1024,), 'event': 'finalize_chapter: embedding generated', 'level': 'info', 'logger': 'core.langgraph.nodes.finalize_node', 'timestamp': '11/07/2025, 07:57:03'}"> _from_structlog=True)
11/07/2025, 07:57:03 - [core.langgraph.nodes.finalize_node] - info - finalize_chapter: chapter saved to Neo4j - (chapter=1 _record=<LogRecord: core.langgraph.nodes.finalize_node, 20, /home/user/saga/core/langgraph/nodes/finalize_node.py, 122, "{'chapter': 1, 'event': 'finalize_chapter: chapter saved to Neo4j', 'level': 'info', 'logger': 'core.langgraph.nodes.finalize_node', 'timestamp': '11/07/2025, 07:57:03'}"> _from_structlog=True)
11/07/2025, 07:57:03 - [core.langgraph.nodes.finalize_node] - info - finalize_chapter: finalization complete - (chapter=1 word_count=25 _record=<LogRecord: core.langgraph.nodes.finalize_node, 20, /home/user/saga/core/langgraph/nodes/finalize_node.py, 158, "{'chapter': 1, 'word_count': 25, 'event': 'finalize_chapter: finalization complete', 'level': 'info', 'logger': 'core.langgraph.nodes.finalize_node', 'timestamp': '11/07/2025, 07:57:03'}"> _from_structlog=True)
11/07/2025, 07:57:03 - [core.langgraph.nodes.finalize_node] - info - finalize_chapter: starting finalization - (chapter=1 _record=<LogRecord: core.langgraph.nodes.finalize_node, 20, /home/user/saga/core/langgraph/nodes/finalize_node.py, 54, "{'chapter': 1, 'event': 'finalize_chapter: starting finalization', 'level': 'info', 'logger': 'core.langgraph.nodes.finalize_node', 'timestamp': '11/07/2025, 07:57:03'}"> _from_structlog=True)
11/07/2025, 07:57:03 - [core.langgraph.nodes.finalize_node] - error - finalize_chapter: no draft text to finalize - (_record=<LogRecord: core.langgraph.nodes.finalize_node, 40, /home/user/saga/core/langgraph/nodes/finalize_node.py, 61, "{'event': 'finalize_chapter: no draft text to finalize', 'level': 'error', 'logger': 'core.langgraph.nodes.finalize_node', 'timestamp': '11/07/2025, 07:57:03'}"> _from_structlog=True)
11/07/2025, 07:57:03 - [core.langgraph.nodes.finalize_node] - info - finalize_chapter: starting finalization - (chapter=1 _record=<LogRecord: core.langgraph.nodes.finalize_node, 20, /home/user/saga/core/langgraph/nodes/finalize_node.py, 54, "{'chapter': 1, 'event': 'finalize_chapter: starting finalization', 'level': 'info', 'logger': 'core.langgraph.nodes.finalize_node', 'timestamp': '11/07/2025, 07:57:03'}"> _from_structlog=True)
11/07/2025, 07:57:03 - [core.langgraph.nodes.finalize_node] - info - finalize_chapter: chapter saved to filesystem - (chapter=1 path=/tmp/pytest-of-root/pytest-17/test_finalize_chapter_filesyst0/test-project/chapters/chapter_001.txt _record=<LogRecord: core.langgraph.nodes.finalize_node, 20, /home/user/saga/core/langgraph/nodes/finalize_node.py, 191, "{'chapter': 1, 'path': '/tmp/pytest-of-root/pytest-17/test_finalize_chapter_filesyst0/test-project/chapters/chapter_001.txt', 'event': 'finalize_chapter: chapter saved to filesystem', 'level': 'info', 'logger': 'core.langgraph.nodes.finalize_node', 'timestamp': '11/07/2025, 07:57:03'}"> _from_structlog=True)
11/07/2025, 07:57:03 - [core.langgraph.nodes.finalize_node] - info - finalize_chapter: embedding generated - (chapter=1 embedding_shape=(1024,) _record=<LogRecord: core.langgraph.nodes.finalize_node, 20, /home/user/saga/core/langgraph/nodes/finalize_node.py, 92, "{'chapter': 1, 'embedding_shape': (1024,), 'event': 'finalize_chapter: embedding generated', 'level': 'info', 'logger': 'core.langgraph.nodes.finalize_node', 'timestamp': '11/07/2025, 07:57:03'}"> _from_structlog=True)
11/07/2025, 07:57:03 - [core.langgraph.nodes.finalize_node] - info - finalize_chapter: chapter saved to Neo4j - (chapter=1 _record=<LogRecord: core.langgraph.nodes.finalize_node, 20, /home/user/saga/core/langgraph/nodes/finalize_node.py, 122, "{'chapter': 1, 'event': 'finalize_chapter: chapter saved to Neo4j', 'level': 'info', 'logger': 'core.langgraph.nodes.finalize_node', 'timestamp': '11/07/2025, 07:57:03'}"> _from_structlog=True)
11/07/2025, 07:57:03 - [core.langgraph.nodes.finalize_node] - info - finalize_chapter: finalization complete - (chapter=1 word_count=25 _record=<LogRecord: core.langgraph.nodes.finalize_node, 20, /home/user/saga/core/langgraph/nodes/finalize_node.py, 158, "{'chapter': 1, 'word_count': 25, 'event': 'finalize_chapter: finalization complete', 'level': 'info', 'logger': 'core.langgraph.nodes.finalize_node', 'timestamp': '11/07/2025, 07:57:03'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.finalize_node] - info - finalize_chapter: starting finalization - (chapter=1 _record=<LogRecord: core.langgraph.nodes.finalize_node, 20, /home/user/saga/core/langgraph/nodes/finalize_node.py, 54, "{'chapter': 1, 'event': 'finalize_chapter: starting finalization', 'level': 'info', 'logger': 'core.langgraph.nodes.finalize_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.finalize_node] - info - finalize_chapter: chapter saved to filesystem - (chapter=1 path=/tmp/pytest-of-root/pytest-17/test_finalize_chapter_embeddin0/test-project/chapters/chapter_001.txt _record=<LogRecord: core.langgraph.nodes.finalize_node, 20, /home/user/saga/core/langgraph/nodes/finalize_node.py, 191, "{'chapter': 1, 'path': '/tmp/pytest-of-root/pytest-17/test_finalize_chapter_embeddin0/test-project/chapters/chapter_001.txt', 'event': 'finalize_chapter: chapter saved to filesystem', 'level': 'info', 'logger': 'core.langgraph.nodes.finalize_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.finalize_node] - info - finalize_chapter: embedding generated - (chapter=1 embedding_shape=(1024,) _record=<LogRecord: core.langgraph.nodes.finalize_node, 20, /home/user/saga/core/langgraph/nodes/finalize_node.py, 92, "{'chapter': 1, 'embedding_shape': (1024,), 'event': 'finalize_chapter: embedding generated', 'level': 'info', 'logger': 'core.langgraph.nodes.finalize_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.finalize_node] - info - finalize_chapter: chapter saved to Neo4j - (chapter=1 _record=<LogRecord: core.langgraph.nodes.finalize_node, 20, /home/user/saga/core/langgraph/nodes/finalize_node.py, 122, "{'chapter': 1, 'event': 'finalize_chapter: chapter saved to Neo4j', 'level': 'info', 'logger': 'core.langgraph.nodes.finalize_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.finalize_node] - info - finalize_chapter: finalization complete - (chapter=1 word_count=25 _record=<LogRecord: core.langgraph.nodes.finalize_node, 20, /home/user/saga/core/langgraph/nodes/finalize_node.py, 158, "{'chapter': 1, 'word_count': 25, 'event': 'finalize_chapter: finalization complete', 'level': 'info', 'logger': 'core.langgraph.nodes.finalize_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.finalize_node] - info - finalize_chapter: starting finalization - (chapter=1 _record=<LogRecord: core.langgraph.nodes.finalize_node, 20, /home/user/saga/core/langgraph/nodes/finalize_node.py, 54, "{'chapter': 1, 'event': 'finalize_chapter: starting finalization', 'level': 'info', 'logger': 'core.langgraph.nodes.finalize_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.finalize_node] - info - finalize_chapter: chapter saved to filesystem - (chapter=1 path=/tmp/pytest-of-root/pytest-17/test_finalize_chapter_embeddin1/test-project/chapters/chapter_001.txt _record=<LogRecord: core.langgraph.nodes.finalize_node, 20, /home/user/saga/core/langgraph/nodes/finalize_node.py, 191, "{'chapter': 1, 'path': '/tmp/pytest-of-root/pytest-17/test_finalize_chapter_embeddin1/test-project/chapters/chapter_001.txt', 'event': 'finalize_chapter: chapter saved to filesystem', 'level': 'info', 'logger': 'core.langgraph.nodes.finalize_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.finalize_node] - error - finalize_chapter: embedding generation failed - (chapter=1 error=Embedding service unavailable exc_info=True _record=<LogRecord: core.langgraph.nodes.finalize_node, 40, /home/user/saga/core/langgraph/nodes/finalize_node.py, 98, "{'chapter': 1, 'error': 'Embedding service unavailable', 'exc_info': True, 'event': 'finalize_chapter: embedding generation failed', 'level': 'error', 'logger': 'core.langgraph.nodes.finalize_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.finalize_node] - info - finalize_chapter: chapter saved to Neo4j - (chapter=1 _record=<LogRecord: core.langgraph.nodes.finalize_node, 20, /home/user/saga/core/langgraph/nodes/finalize_node.py, 122, "{'chapter': 1, 'event': 'finalize_chapter: chapter saved to Neo4j', 'level': 'info', 'logger': 'core.langgraph.nodes.finalize_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.finalize_node] - info - finalize_chapter: finalization complete - (chapter=1 word_count=25 _record=<LogRecord: core.langgraph.nodes.finalize_node, 20, /home/user/saga/core/langgraph/nodes/finalize_node.py, 158, "{'chapter': 1, 'word_count': 25, 'event': 'finalize_chapter: finalization complete', 'level': 'info', 'logger': 'core.langgraph.nodes.finalize_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.finalize_node] - info - finalize_chapter: starting finalization - (chapter=1 _record=<LogRecord: core.langgraph.nodes.finalize_node, 20, /home/user/saga/core/langgraph/nodes/finalize_node.py, 54, "{'chapter': 1, 'event': 'finalize_chapter: starting finalization', 'level': 'info', 'logger': 'core.langgraph.nodes.finalize_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.finalize_node] - info - finalize_chapter: chapter saved to filesystem - (chapter=1 path=/tmp/pytest-of-root/pytest-17/test_finalize_chapter_neo4j_fa0/test-project/chapters/chapter_001.txt _record=<LogRecord: core.langgraph.nodes.finalize_node, 20, /home/user/saga/core/langgraph/nodes/finalize_node.py, 191, "{'chapter': 1, 'path': '/tmp/pytest-of-root/pytest-17/test_finalize_chapter_neo4j_fa0/test-project/chapters/chapter_001.txt', 'event': 'finalize_chapter: chapter saved to filesystem', 'level': 'info', 'logger': 'core.langgraph.nodes.finalize_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.finalize_node] - info - finalize_chapter: embedding generated - (chapter=1 embedding_shape=(1024,) _record=<LogRecord: core.langgraph.nodes.finalize_node, 20, /home/user/saga/core/langgraph/nodes/finalize_node.py, 92, "{'chapter': 1, 'embedding_shape': (1024,), 'event': 'finalize_chapter: embedding generated', 'level': 'info', 'logger': 'core.langgraph.nodes.finalize_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.finalize_node] - error - finalize_chapter: Neo4j save failed - (chapter=1 error=Neo4j unavailable exc_info=True _record=<LogRecord: core.langgraph.nodes.finalize_node, 40, /home/user/saga/core/langgraph/nodes/finalize_node.py, 128, "{'chapter': 1, 'error': 'Neo4j unavailable', 'exc_info': True, 'event': 'finalize_chapter: Neo4j save failed', 'level': 'error', 'logger': 'core.langgraph.nodes.finalize_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.finalize_node] - info - finalize_chapter: starting finalization - (chapter=1 _record=<LogRecord: core.langgraph.nodes.finalize_node, 20, /home/user/saga/core/langgraph/nodes/finalize_node.py, 54, "{'chapter': 1, 'event': 'finalize_chapter: starting finalization', 'level': 'info', 'logger': 'core.langgraph.nodes.finalize_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.finalize_node] - info - finalize_chapter: chapter saved to filesystem - (chapter=1 path=/invalid/nonexistent/path/chapters/chapter_001.txt _record=<LogRecord: core.langgraph.nodes.finalize_node, 20, /home/user/saga/core/langgraph/nodes/finalize_node.py, 191, "{'chapter': 1, 'path': '/invalid/nonexistent/path/chapters/chapter_001.txt', 'event': 'finalize_chapter: chapter saved to filesystem', 'level': 'info', 'logger': 'core.langgraph.nodes.finalize_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.finalize_node] - info - finalize_chapter: embedding generated - (chapter=1 embedding_shape=(1024,) _record=<LogRecord: core.langgraph.nodes.finalize_node, 20, /home/user/saga/core/langgraph/nodes/finalize_node.py, 92, "{'chapter': 1, 'embedding_shape': (1024,), 'event': 'finalize_chapter: embedding generated', 'level': 'info', 'logger': 'core.langgraph.nodes.finalize_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.finalize_node] - info - finalize_chapter: chapter saved to Neo4j - (chapter=1 _record=<LogRecord: core.langgraph.nodes.finalize_node, 20, /home/user/saga/core/langgraph/nodes/finalize_node.py, 122, "{'chapter': 1, 'event': 'finalize_chapter: chapter saved to Neo4j', 'level': 'info', 'logger': 'core.langgraph.nodes.finalize_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.finalize_node] - info - finalize_chapter: finalization complete - (chapter=1 word_count=25 _record=<LogRecord: core.langgraph.nodes.finalize_node, 20, /home/user/saga/core/langgraph/nodes/finalize_node.py, 158, "{'chapter': 1, 'word_count': 25, 'event': 'finalize_chapter: finalization complete', 'level': 'info', 'logger': 'core.langgraph.nodes.finalize_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.finalize_node] - info - finalize_chapter: starting finalization - (chapter=1 _record=<LogRecord: core.langgraph.nodes.finalize_node, 20, /home/user/saga/core/langgraph/nodes/finalize_node.py, 54, "{'chapter': 1, 'event': 'finalize_chapter: starting finalization', 'level': 'info', 'logger': 'core.langgraph.nodes.finalize_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.finalize_node] - info - finalize_chapter: chapter saved to filesystem - (chapter=1 path=/tmp/pytest-of-root/pytest-17/test_finalize_chapter_clears_e0/test-project/chapters/chapter_001.txt _record=<LogRecord: core.langgraph.nodes.finalize_node, 20, /home/user/saga/core/langgraph/nodes/finalize_node.py, 191, "{'chapter': 1, 'path': '/tmp/pytest-of-root/pytest-17/test_finalize_chapter_clears_e0/test-project/chapters/chapter_001.txt', 'event': 'finalize_chapter: chapter saved to filesystem', 'level': 'info', 'logger': 'core.langgraph.nodes.finalize_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.finalize_node] - info - finalize_chapter: embedding generated - (chapter=1 embedding_shape=(1024,) _record=<LogRecord: core.langgraph.nodes.finalize_node, 20, /home/user/saga/core/langgraph/nodes/finalize_node.py, 92, "{'chapter': 1, 'embedding_shape': (1024,), 'event': 'finalize_chapter: embedding generated', 'level': 'info', 'logger': 'core.langgraph.nodes.finalize_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.finalize_node] - info - finalize_chapter: chapter saved to Neo4j - (chapter=1 _record=<LogRecord: core.langgraph.nodes.finalize_node, 20, /home/user/saga/core/langgraph/nodes/finalize_node.py, 122, "{'chapter': 1, 'event': 'finalize_chapter: chapter saved to Neo4j', 'level': 'info', 'logger': 'core.langgraph.nodes.finalize_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.finalize_node] - info - finalize_chapter: finalization complete - (chapter=1 word_count=25 _record=<LogRecord: core.langgraph.nodes.finalize_node, 20, /home/user/saga/core/langgraph/nodes/finalize_node.py, 158, "{'chapter': 1, 'word_count': 25, 'event': 'finalize_chapter: finalization complete', 'level': 'info', 'logger': 'core.langgraph.nodes.finalize_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.finalize_node] - info - finalize_chapter: starting finalization - (chapter=1 _record=<LogRecord: core.langgraph.nodes.finalize_node, 20, /home/user/saga/core/langgraph/nodes/finalize_node.py, 54, "{'chapter': 1, 'event': 'finalize_chapter: starting finalization', 'level': 'info', 'logger': 'core.langgraph.nodes.finalize_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.finalize_node] - info - finalize_chapter: chapter saved to filesystem - (chapter=1 path=/tmp/pytest-of-root/pytest-17/test_finalize_chapter_clears_r0/test-project/chapters/chapter_001.txt _record=<LogRecord: core.langgraph.nodes.finalize_node, 20, /home/user/saga/core/langgraph/nodes/finalize_node.py, 191, "{'chapter': 1, 'path': '/tmp/pytest-of-root/pytest-17/test_finalize_chapter_clears_r0/test-project/chapters/chapter_001.txt', 'event': 'finalize_chapter: chapter saved to filesystem', 'level': 'info', 'logger': 'core.langgraph.nodes.finalize_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.finalize_node] - info - finalize_chapter: embedding generated - (chapter=1 embedding_shape=(1024,) _record=<LogRecord: core.langgraph.nodes.finalize_node, 20, /home/user/saga/core/langgraph/nodes/finalize_node.py, 92, "{'chapter': 1, 'embedding_shape': (1024,), 'event': 'finalize_chapter: embedding generated', 'level': 'info', 'logger': 'core.langgraph.nodes.finalize_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.finalize_node] - info - finalize_chapter: chapter saved to Neo4j - (chapter=1 _record=<LogRecord: core.langgraph.nodes.finalize_node, 20, /home/user/saga/core/langgraph/nodes/finalize_node.py, 122, "{'chapter': 1, 'event': 'finalize_chapter: chapter saved to Neo4j', 'level': 'info', 'logger': 'core.langgraph.nodes.finalize_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.finalize_node] - info - finalize_chapter: finalization complete - (chapter=1 word_count=25 _record=<LogRecord: core.langgraph.nodes.finalize_node, 20, /home/user/saga/core/langgraph/nodes/finalize_node.py, 158, "{'chapter': 1, 'word_count': 25, 'event': 'finalize_chapter: finalization complete', 'level': 'info', 'logger': 'core.langgraph.nodes.finalize_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.finalize_node] - info - finalize_chapter: starting finalization - (chapter=1 _record=<LogRecord: core.langgraph.nodes.finalize_node, 20, /home/user/saga/core/langgraph/nodes/finalize_node.py, 54, "{'chapter': 1, 'event': 'finalize_chapter: starting finalization', 'level': 'info', 'logger': 'core.langgraph.nodes.finalize_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.finalize_node] - info - finalize_chapter: chapter saved to filesystem - (chapter=1 path=/tmp/pytest-of-root/pytest-17/test_finalize_chapter_clears_c0/test-project/chapters/chapter_001.txt _record=<LogRecord: core.langgraph.nodes.finalize_node, 20, /home/user/saga/core/langgraph/nodes/finalize_node.py, 191, "{'chapter': 1, 'path': '/tmp/pytest-of-root/pytest-17/test_finalize_chapter_clears_c0/test-project/chapters/chapter_001.txt', 'event': 'finalize_chapter: chapter saved to filesystem', 'level': 'info', 'logger': 'core.langgraph.nodes.finalize_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.finalize_node] - info - finalize_chapter: embedding generated - (chapter=1 embedding_shape=(1024,) _record=<LogRecord: core.langgraph.nodes.finalize_node, 20, /home/user/saga/core/langgraph/nodes/finalize_node.py, 92, "{'chapter': 1, 'embedding_shape': (1024,), 'event': 'finalize_chapter: embedding generated', 'level': 'info', 'logger': 'core.langgraph.nodes.finalize_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.finalize_node] - info - finalize_chapter: chapter saved to Neo4j - (chapter=1 _record=<LogRecord: core.langgraph.nodes.finalize_node, 20, /home/user/saga/core/langgraph/nodes/finalize_node.py, 122, "{'chapter': 1, 'event': 'finalize_chapter: chapter saved to Neo4j', 'level': 'info', 'logger': 'core.langgraph.nodes.finalize_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.finalize_node] - info - finalize_chapter: finalization complete - (chapter=1 word_count=25 _record=<LogRecord: core.langgraph.nodes.finalize_node, 20, /home/user/saga/core/langgraph/nodes/finalize_node.py, 158, "{'chapter': 1, 'word_count': 25, 'event': 'finalize_chapter: finalization complete', 'level': 'info', 'logger': 'core.langgraph.nodes.finalize_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.finalize_node] - info - finalize_chapter: starting finalization - (chapter=1 _record=<LogRecord: core.langgraph.nodes.finalize_node, 20, /home/user/saga/core/langgraph/nodes/finalize_node.py, 54, "{'chapter': 1, 'event': 'finalize_chapter: starting finalization', 'level': 'info', 'logger': 'core.langgraph.nodes.finalize_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.finalize_node] - info - finalize_chapter: chapter saved to filesystem - (chapter=1 path=/tmp/pytest-of-root/pytest-17/test_finalize_chapter_resets_i0/test-project/chapters/chapter_001.txt _record=<LogRecord: core.langgraph.nodes.finalize_node, 20, /home/user/saga/core/langgraph/nodes/finalize_node.py, 191, "{'chapter': 1, 'path': '/tmp/pytest-of-root/pytest-17/test_finalize_chapter_resets_i0/test-project/chapters/chapter_001.txt', 'event': 'finalize_chapter: chapter saved to filesystem', 'level': 'info', 'logger': 'core.langgraph.nodes.finalize_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.finalize_node] - info - finalize_chapter: embedding generated - (chapter=1 embedding_shape=(1024,) _record=<LogRecord: core.langgraph.nodes.finalize_node, 20, /home/user/saga/core/langgraph/nodes/finalize_node.py, 92, "{'chapter': 1, 'embedding_shape': (1024,), 'event': 'finalize_chapter: embedding generated', 'level': 'info', 'logger': 'core.langgraph.nodes.finalize_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.finalize_node] - info - finalize_chapter: chapter saved to Neo4j - (chapter=1 _record=<LogRecord: core.langgraph.nodes.finalize_node, 20, /home/user/saga/core/langgraph/nodes/finalize_node.py, 122, "{'chapter': 1, 'event': 'finalize_chapter: chapter saved to Neo4j', 'level': 'info', 'logger': 'core.langgraph.nodes.finalize_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.finalize_node] - info - finalize_chapter: finalization complete - (chapter=1 word_count=25 _record=<LogRecord: core.langgraph.nodes.finalize_node, 20, /home/user/saga/core/langgraph/nodes/finalize_node.py, 158, "{'chapter': 1, 'word_count': 25, 'event': 'finalize_chapter: finalization complete', 'level': 'info', 'logger': 'core.langgraph.nodes.finalize_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.finalize_node] - info - finalize_chapter: starting finalization - (chapter=1 _record=<LogRecord: core.langgraph.nodes.finalize_node, 20, /home/user/saga/core/langgraph/nodes/finalize_node.py, 54, "{'chapter': 1, 'event': 'finalize_chapter: starting finalization', 'level': 'info', 'logger': 'core.langgraph.nodes.finalize_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.finalize_node] - info - finalize_chapter: chapter saved to filesystem - (chapter=1 path=/tmp/pytest-of-root/pytest-17/test_finalize_chapter_resets_n0/test-project/chapters/chapter_001.txt _record=<LogRecord: core.langgraph.nodes.finalize_node, 20, /home/user/saga/core/langgraph/nodes/finalize_node.py, 191, "{'chapter': 1, 'path': '/tmp/pytest-of-root/pytest-17/test_finalize_chapter_resets_n0/test-project/chapters/chapter_001.txt', 'event': 'finalize_chapter: chapter saved to filesystem', 'level': 'info', 'logger': 'core.langgraph.nodes.finalize_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.finalize_node] - info - finalize_chapter: embedding generated - (chapter=1 embedding_shape=(1024,) _record=<LogRecord: core.langgraph.nodes.finalize_node, 20, /home/user/saga/core/langgraph/nodes/finalize_node.py, 92, "{'chapter': 1, 'embedding_shape': (1024,), 'event': 'finalize_chapter: embedding generated', 'level': 'info', 'logger': 'core.langgraph.nodes.finalize_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.finalize_node] - info - finalize_chapter: chapter saved to Neo4j - (chapter=1 _record=<LogRecord: core.langgraph.nodes.finalize_node, 20, /home/user/saga/core/langgraph/nodes/finalize_node.py, 122, "{'chapter': 1, 'event': 'finalize_chapter: chapter saved to Neo4j', 'level': 'info', 'logger': 'core.langgraph.nodes.finalize_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.finalize_node] - info - finalize_chapter: finalization complete - (chapter=1 word_count=25 _record=<LogRecord: core.langgraph.nodes.finalize_node, 20, /home/user/saga/core/langgraph/nodes/finalize_node.py, 158, "{'chapter': 1, 'word_count': 25, 'event': 'finalize_chapter: finalization complete', 'level': 'info', 'logger': 'core.langgraph.nodes.finalize_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.finalize_node] - info - finalize_chapter: starting finalization - (chapter=1 _record=<LogRecord: core.langgraph.nodes.finalize_node, 20, /home/user/saga/core/langgraph/nodes/finalize_node.py, 54, "{'chapter': 1, 'event': 'finalize_chapter: starting finalization', 'level': 'info', 'logger': 'core.langgraph.nodes.finalize_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.finalize_node] - info - finalize_chapter: chapter saved to filesystem - (chapter=1 path=/tmp/pytest-of-root/pytest-17/test_finalize_chapter_preserve0/test-project/chapters/chapter_001.txt _record=<LogRecord: core.langgraph.nodes.finalize_node, 20, /home/user/saga/core/langgraph/nodes/finalize_node.py, 191, "{'chapter': 1, 'path': '/tmp/pytest-of-root/pytest-17/test_finalize_chapter_preserve0/test-project/chapters/chapter_001.txt', 'event': 'finalize_chapter: chapter saved to filesystem', 'level': 'info', 'logger': 'core.langgraph.nodes.finalize_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.finalize_node] - info - finalize_chapter: embedding generated - (chapter=1 embedding_shape=(1024,) _record=<LogRecord: core.langgraph.nodes.finalize_node, 20, /home/user/saga/core/langgraph/nodes/finalize_node.py, 92, "{'chapter': 1, 'embedding_shape': (1024,), 'event': 'finalize_chapter: embedding generated', 'level': 'info', 'logger': 'core.langgraph.nodes.finalize_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.finalize_node] - info - finalize_chapter: chapter saved to Neo4j - (chapter=1 _record=<LogRecord: core.langgraph.nodes.finalize_node, 20, /home/user/saga/core/langgraph/nodes/finalize_node.py, 122, "{'chapter': 1, 'event': 'finalize_chapter: chapter saved to Neo4j', 'level': 'info', 'logger': 'core.langgraph.nodes.finalize_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.finalize_node] - info - finalize_chapter: finalization complete - (chapter=1 word_count=25 _record=<LogRecord: core.langgraph.nodes.finalize_node, 20, /home/user/saga/core/langgraph/nodes/finalize_node.py, 158, "{'chapter': 1, 'word_count': 25, 'event': 'finalize_chapter: finalization complete', 'level': 'info', 'logger': 'core.langgraph.nodes.finalize_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.finalize_node] - info - finalize_chapter: starting finalization - (chapter=1 _record=<LogRecord: core.langgraph.nodes.finalize_node, 20, /home/user/saga/core/langgraph/nodes/finalize_node.py, 54, "{'chapter': 1, 'event': 'finalize_chapter: starting finalization', 'level': 'info', 'logger': 'core.langgraph.nodes.finalize_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.finalize_node] - info - finalize_chapter: chapter saved to filesystem - (chapter=1 path=/tmp/pytest-of-root/pytest-17/test_finalize_chapter_includes0/test-project/chapters/chapter_001.txt _record=<LogRecord: core.langgraph.nodes.finalize_node, 20, /home/user/saga/core/langgraph/nodes/finalize_node.py, 191, "{'chapter': 1, 'path': '/tmp/pytest-of-root/pytest-17/test_finalize_chapter_includes0/test-project/chapters/chapter_001.txt', 'event': 'finalize_chapter: chapter saved to filesystem', 'level': 'info', 'logger': 'core.langgraph.nodes.finalize_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.finalize_node] - info - finalize_chapter: embedding generated - (chapter=1 embedding_shape=(1024,) _record=<LogRecord: core.langgraph.nodes.finalize_node, 20, /home/user/saga/core/langgraph/nodes/finalize_node.py, 92, "{'chapter': 1, 'embedding_shape': (1024,), 'event': 'finalize_chapter: embedding generated', 'level': 'info', 'logger': 'core.langgraph.nodes.finalize_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.finalize_node] - info - finalize_chapter: chapter saved to Neo4j - (chapter=1 _record=<LogRecord: core.langgraph.nodes.finalize_node, 20, /home/user/saga/core/langgraph/nodes/finalize_node.py, 122, "{'chapter': 1, 'event': 'finalize_chapter: chapter saved to Neo4j', 'level': 'info', 'logger': 'core.langgraph.nodes.finalize_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.finalize_node] - info - finalize_chapter: finalization complete - (chapter=1 word_count=25 _record=<LogRecord: core.langgraph.nodes.finalize_node, 20, /home/user/saga/core/langgraph/nodes/finalize_node.py, 158, "{'chapter': 1, 'word_count': 25, 'event': 'finalize_chapter: finalization complete', 'level': 'info', 'logger': 'core.langgraph.nodes.finalize_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.finalize_node] - info - finalize_chapter: starting finalization - (chapter=1 _record=<LogRecord: core.langgraph.nodes.finalize_node, 20, /home/user/saga/core/langgraph/nodes/finalize_node.py, 54, "{'chapter': 1, 'event': 'finalize_chapter: starting finalization', 'level': 'info', 'logger': 'core.langgraph.nodes.finalize_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.finalize_node] - info - finalize_chapter: chapter saved to filesystem - (chapter=1 path=/tmp/pytest-of-root/pytest-17/test_finalize_chapter_no_summa0/test-project/chapters/chapter_001.txt _record=<LogRecord: core.langgraph.nodes.finalize_node, 20, /home/user/saga/core/langgraph/nodes/finalize_node.py, 191, "{'chapter': 1, 'path': '/tmp/pytest-of-root/pytest-17/test_finalize_chapter_no_summa0/test-project/chapters/chapter_001.txt', 'event': 'finalize_chapter: chapter saved to filesystem', 'level': 'info', 'logger': 'core.langgraph.nodes.finalize_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.finalize_node] - info - finalize_chapter: embedding generated - (chapter=1 embedding_shape=(1024,) _record=<LogRecord: core.langgraph.nodes.finalize_node, 20, /home/user/saga/core/langgraph/nodes/finalize_node.py, 92, "{'chapter': 1, 'embedding_shape': (1024,), 'event': 'finalize_chapter: embedding generated', 'level': 'info', 'logger': 'core.langgraph.nodes.finalize_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.finalize_node] - info - finalize_chapter: chapter saved to Neo4j - (chapter=1 _record=<LogRecord: core.langgraph.nodes.finalize_node, 20, /home/user/saga/core/langgraph/nodes/finalize_node.py, 122, "{'chapter': 1, 'event': 'finalize_chapter: chapter saved to Neo4j', 'level': 'info', 'logger': 'core.langgraph.nodes.finalize_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.finalize_node] - info - finalize_chapter: finalization complete - (chapter=1 word_count=25 _record=<LogRecord: core.langgraph.nodes.finalize_node, 20, /home/user/saga/core/langgraph/nodes/finalize_node.py, 158, "{'chapter': 1, 'word_count': 25, 'event': 'finalize_chapter: finalization complete', 'level': 'info', 'logger': 'core.langgraph.nodes.finalize_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.finalize_node] - info - finalize_chapter: starting finalization - (chapter=1 _record=<LogRecord: core.langgraph.nodes.finalize_node, 20, /home/user/saga/core/langgraph/nodes/finalize_node.py, 54, "{'chapter': 1, 'event': 'finalize_chapter: starting finalization', 'level': 'info', 'logger': 'core.langgraph.nodes.finalize_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.finalize_node] - info - finalize_chapter: chapter saved to filesystem - (chapter=1 path=/tmp/pytest-of-root/pytest-17/test_finalize_chapter_creates_0/test-project/chapters/chapter_001.txt _record=<LogRecord: core.langgraph.nodes.finalize_node, 20, /home/user/saga/core/langgraph/nodes/finalize_node.py, 191, "{'chapter': 1, 'path': '/tmp/pytest-of-root/pytest-17/test_finalize_chapter_creates_0/test-project/chapters/chapter_001.txt', 'event': 'finalize_chapter: chapter saved to filesystem', 'level': 'info', 'logger': 'core.langgraph.nodes.finalize_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.finalize_node] - info - finalize_chapter: embedding generated - (chapter=1 embedding_shape=(1024,) _record=<LogRecord: core.langgraph.nodes.finalize_node, 20, /home/user/saga/core/langgraph/nodes/finalize_node.py, 92, "{'chapter': 1, 'embedding_shape': (1024,), 'event': 'finalize_chapter: embedding generated', 'level': 'info', 'logger': 'core.langgraph.nodes.finalize_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.finalize_node] - info - finalize_chapter: chapter saved to Neo4j - (chapter=1 _record=<LogRecord: core.langgraph.nodes.finalize_node, 20, /home/user/saga/core/langgraph/nodes/finalize_node.py, 122, "{'chapter': 1, 'event': 'finalize_chapter: chapter saved to Neo4j', 'level': 'info', 'logger': 'core.langgraph.nodes.finalize_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.finalize_node] - info - finalize_chapter: finalization complete - (chapter=1 word_count=25 _record=<LogRecord: core.langgraph.nodes.finalize_node, 20, /home/user/saga/core/langgraph/nodes/finalize_node.py, 158, "{'chapter': 1, 'word_count': 25, 'event': 'finalize_chapter: finalization complete', 'level': 'info', 'logger': 'core.langgraph.nodes.finalize_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.finalize_node] - info - finalize_chapter: starting finalization - (chapter=1 _record=<LogRecord: core.langgraph.nodes.finalize_node, 20, /home/user/saga/core/langgraph/nodes/finalize_node.py, 54, "{'chapter': 1, 'event': 'finalize_chapter: starting finalization', 'level': 'info', 'logger': 'core.langgraph.nodes.finalize_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.finalize_node] - info - finalize_chapter: chapter saved to filesystem - (chapter=1 path=/tmp/pytest-of-root/pytest-17/test_finalize_chapter_correct_0/test-project/chapters/chapter_001.txt _record=<LogRecord: core.langgraph.nodes.finalize_node, 20, /home/user/saga/core/langgraph/nodes/finalize_node.py, 191, "{'chapter': 1, 'path': '/tmp/pytest-of-root/pytest-17/test_finalize_chapter_correct_0/test-project/chapters/chapter_001.txt', 'event': 'finalize_chapter: chapter saved to filesystem', 'level': 'info', 'logger': 'core.langgraph.nodes.finalize_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.finalize_node] - info - finalize_chapter: embedding generated - (chapter=1 embedding_shape=(1024,) _record=<LogRecord: core.langgraph.nodes.finalize_node, 20, /home/user/saga/core/langgraph/nodes/finalize_node.py, 92, "{'chapter': 1, 'embedding_shape': (1024,), 'event': 'finalize_chapter: embedding generated', 'level': 'info', 'logger': 'core.langgraph.nodes.finalize_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.finalize_node] - info - finalize_chapter: chapter saved to Neo4j - (chapter=1 _record=<LogRecord: core.langgraph.nodes.finalize_node, 20, /home/user/saga/core/langgraph/nodes/finalize_node.py, 122, "{'chapter': 1, 'event': 'finalize_chapter: chapter saved to Neo4j', 'level': 'info', 'logger': 'core.langgraph.nodes.finalize_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.finalize_node] - info - finalize_chapter: finalization complete - (chapter=1 word_count=25 _record=<LogRecord: core.langgraph.nodes.finalize_node, 20, /home/user/saga/core/langgraph/nodes/finalize_node.py, 158, "{'chapter': 1, 'word_count': 25, 'event': 'finalize_chapter: finalization complete', 'level': 'info', 'logger': 'core.langgraph.nodes.finalize_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.finalize_node] - info - finalize_chapter: starting finalization - (chapter=10 _record=<LogRecord: core.langgraph.nodes.finalize_node, 20, /home/user/saga/core/langgraph/nodes/finalize_node.py, 54, "{'chapter': 10, 'event': 'finalize_chapter: starting finalization', 'level': 'info', 'logger': 'core.langgraph.nodes.finalize_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.finalize_node] - info - finalize_chapter: chapter saved to filesystem - (chapter=10 path=/tmp/pytest-of-root/pytest-17/test_finalize_chapter_correct_0/test-project/chapters/chapter_010.txt _record=<LogRecord: core.langgraph.nodes.finalize_node, 20, /home/user/saga/core/langgraph/nodes/finalize_node.py, 191, "{'chapter': 10, 'path': '/tmp/pytest-of-root/pytest-17/test_finalize_chapter_correct_0/test-project/chapters/chapter_010.txt', 'event': 'finalize_chapter: chapter saved to filesystem', 'level': 'info', 'logger': 'core.langgraph.nodes.finalize_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.finalize_node] - info - finalize_chapter: embedding generated - (chapter=10 embedding_shape=(1024,) _record=<LogRecord: core.langgraph.nodes.finalize_node, 20, /home/user/saga/core/langgraph/nodes/finalize_node.py, 92, "{'chapter': 10, 'embedding_shape': (1024,), 'event': 'finalize_chapter: embedding generated', 'level': 'info', 'logger': 'core.langgraph.nodes.finalize_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.finalize_node] - info - finalize_chapter: chapter saved to Neo4j - (chapter=10 _record=<LogRecord: core.langgraph.nodes.finalize_node, 20, /home/user/saga/core/langgraph/nodes/finalize_node.py, 122, "{'chapter': 10, 'event': 'finalize_chapter: chapter saved to Neo4j', 'level': 'info', 'logger': 'core.langgraph.nodes.finalize_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.finalize_node] - info - finalize_chapter: finalization complete - (chapter=10 word_count=25 _record=<LogRecord: core.langgraph.nodes.finalize_node, 20, /home/user/saga/core/langgraph/nodes/finalize_node.py, 158, "{'chapter': 10, 'word_count': 25, 'event': 'finalize_chapter: finalization complete', 'level': 'info', 'logger': 'core.langgraph.nodes.finalize_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.finalize_node] - info - finalize_chapter: starting finalization - (chapter=99 _record=<LogRecord: core.langgraph.nodes.finalize_node, 20, /home/user/saga/core/langgraph/nodes/finalize_node.py, 54, "{'chapter': 99, 'event': 'finalize_chapter: starting finalization', 'level': 'info', 'logger': 'core.langgraph.nodes.finalize_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.finalize_node] - info - finalize_chapter: chapter saved to filesystem - (chapter=99 path=/tmp/pytest-of-root/pytest-17/test_finalize_chapter_correct_0/test-project/chapters/chapter_099.txt _record=<LogRecord: core.langgraph.nodes.finalize_node, 20, /home/user/saga/core/langgraph/nodes/finalize_node.py, 191, "{'chapter': 99, 'path': '/tmp/pytest-of-root/pytest-17/test_finalize_chapter_correct_0/test-project/chapters/chapter_099.txt', 'event': 'finalize_chapter: chapter saved to filesystem', 'level': 'info', 'logger': 'core.langgraph.nodes.finalize_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.finalize_node] - info - finalize_chapter: embedding generated - (chapter=99 embedding_shape=(1024,) _record=<LogRecord: core.langgraph.nodes.finalize_node, 20, /home/user/saga/core/langgraph/nodes/finalize_node.py, 92, "{'chapter': 99, 'embedding_shape': (1024,), 'event': 'finalize_chapter: embedding generated', 'level': 'info', 'logger': 'core.langgraph.nodes.finalize_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.finalize_node] - info - finalize_chapter: chapter saved to Neo4j - (chapter=99 _record=<LogRecord: core.langgraph.nodes.finalize_node, 20, /home/user/saga/core/langgraph/nodes/finalize_node.py, 122, "{'chapter': 99, 'event': 'finalize_chapter: chapter saved to Neo4j', 'level': 'info', 'logger': 'core.langgraph.nodes.finalize_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.finalize_node] - info - finalize_chapter: finalization complete - (chapter=99 word_count=25 _record=<LogRecord: core.langgraph.nodes.finalize_node, 20, /home/user/saga/core/langgraph/nodes/finalize_node.py, 158, "{'chapter': 99, 'word_count': 25, 'event': 'finalize_chapter: finalization complete', 'level': 'info', 'logger': 'core.langgraph.nodes.finalize_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.finalize_node] - info - finalize_chapter: starting finalization - (chapter=1 _record=<LogRecord: core.langgraph.nodes.finalize_node, 20, /home/user/saga/core/langgraph/nodes/finalize_node.py, 54, "{'chapter': 1, 'event': 'finalize_chapter: starting finalization', 'level': 'info', 'logger': 'core.langgraph.nodes.finalize_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.finalize_node] - info - finalize_chapter: chapter saved to filesystem - (chapter=1 path=/tmp/pytest-of-root/pytest-17/test_finalize_chapter_preserve1/test-project/chapters/chapter_001.txt _record=<LogRecord: core.langgraph.nodes.finalize_node, 20, /home/user/saga/core/langgraph/nodes/finalize_node.py, 191, "{'chapter': 1, 'path': '/tmp/pytest-of-root/pytest-17/test_finalize_chapter_preserve1/test-project/chapters/chapter_001.txt', 'event': 'finalize_chapter: chapter saved to filesystem', 'level': 'info', 'logger': 'core.langgraph.nodes.finalize_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.finalize_node] - info - finalize_chapter: embedding generated - (chapter=1 embedding_shape=(1024,) _record=<LogRecord: core.langgraph.nodes.finalize_node, 20, /home/user/saga/core/langgraph/nodes/finalize_node.py, 92, "{'chapter': 1, 'embedding_shape': (1024,), 'event': 'finalize_chapter: embedding generated', 'level': 'info', 'logger': 'core.langgraph.nodes.finalize_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.finalize_node] - info - finalize_chapter: chapter saved to Neo4j - (chapter=1 _record=<LogRecord: core.langgraph.nodes.finalize_node, 20, /home/user/saga/core/langgraph/nodes/finalize_node.py, 122, "{'chapter': 1, 'event': 'finalize_chapter: chapter saved to Neo4j', 'level': 'info', 'logger': 'core.langgraph.nodes.finalize_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.finalize_node] - info - finalize_chapter: finalization complete - (chapter=1 word_count=25 _record=<LogRecord: core.langgraph.nodes.finalize_node, 20, /home/user/saga/core/langgraph/nodes/finalize_node.py, 158, "{'chapter': 1, 'word_count': 25, 'event': 'finalize_chapter: finalization complete', 'level': 'info', 'logger': 'core.langgraph.nodes.finalize_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.finalize_node] - info - finalize_chapter: starting finalization - (chapter=1 _record=<LogRecord: core.langgraph.nodes.finalize_node, 20, /home/user/saga/core/langgraph/nodes/finalize_node.py, 54, "{'chapter': 1, 'event': 'finalize_chapter: starting finalization', 'level': 'info', 'logger': 'core.langgraph.nodes.finalize_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.finalize_node] - info - finalize_chapter: chapter saved to filesystem - (chapter=1 path=/tmp/pytest-of-root/pytest-17/test_full_finalization_workflo0/test-project/chapters/chapter_001.txt _record=<LogRecord: core.langgraph.nodes.finalize_node, 20, /home/user/saga/core/langgraph/nodes/finalize_node.py, 191, "{'chapter': 1, 'path': '/tmp/pytest-of-root/pytest-17/test_full_finalization_workflo0/test-project/chapters/chapter_001.txt', 'event': 'finalize_chapter: chapter saved to filesystem', 'level': 'info', 'logger': 'core.langgraph.nodes.finalize_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.finalize_node] - info - finalize_chapter: embedding generated - (chapter=1 embedding_shape=(1024,) _record=<LogRecord: core.langgraph.nodes.finalize_node, 20, /home/user/saga/core/langgraph/nodes/finalize_node.py, 92, "{'chapter': 1, 'embedding_shape': (1024,), 'event': 'finalize_chapter: embedding generated', 'level': 'info', 'logger': 'core.langgraph.nodes.finalize_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.finalize_node] - info - finalize_chapter: chapter saved to Neo4j - (chapter=1 _record=<LogRecord: core.langgraph.nodes.finalize_node, 20, /home/user/saga/core/langgraph/nodes/finalize_node.py, 122, "{'chapter': 1, 'event': 'finalize_chapter: chapter saved to Neo4j', 'level': 'info', 'logger': 'core.langgraph.nodes.finalize_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.finalize_node] - info - finalize_chapter: finalization complete - (chapter=1 word_count=25 _record=<LogRecord: core.langgraph.nodes.finalize_node, 20, /home/user/saga/core/langgraph/nodes/finalize_node.py, 158, "{'chapter': 1, 'word_count': 25, 'event': 'finalize_chapter: finalization complete', 'level': 'info', 'logger': 'core.langgraph.nodes.finalize_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.finalize_node] - info - finalize_chapter: starting finalization - (chapter=1 _record=<LogRecord: core.langgraph.nodes.finalize_node, 20, /home/user/saga/core/langgraph/nodes/finalize_node.py, 54, "{'chapter': 1, 'event': 'finalize_chapter: starting finalization', 'level': 'info', 'logger': 'core.langgraph.nodes.finalize_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.finalize_node] - info - finalize_chapter: chapter saved to filesystem - (chapter=1 path=/tmp/pytest-of-root/pytest-17/test_finalization_ready_for_ne0/test-project/chapters/chapter_001.txt _record=<LogRecord: core.langgraph.nodes.finalize_node, 20, /home/user/saga/core/langgraph/nodes/finalize_node.py, 191, "{'chapter': 1, 'path': '/tmp/pytest-of-root/pytest-17/test_finalization_ready_for_ne0/test-project/chapters/chapter_001.txt', 'event': 'finalize_chapter: chapter saved to filesystem', 'level': 'info', 'logger': 'core.langgraph.nodes.finalize_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.finalize_node] - info - finalize_chapter: embedding generated - (chapter=1 embedding_shape=(1024,) _record=<LogRecord: core.langgraph.nodes.finalize_node, 20, /home/user/saga/core/langgraph/nodes/finalize_node.py, 92, "{'chapter': 1, 'embedding_shape': (1024,), 'event': 'finalize_chapter: embedding generated', 'level': 'info', 'logger': 'core.langgraph.nodes.finalize_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.finalize_node] - info - finalize_chapter: chapter saved to Neo4j - (chapter=1 _record=<LogRecord: core.langgraph.nodes.finalize_node, 20, /home/user/saga/core/langgraph/nodes/finalize_node.py, 122, "{'chapter': 1, 'event': 'finalize_chapter: chapter saved to Neo4j', 'level': 'info', 'logger': 'core.langgraph.nodes.finalize_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.finalize_node] - info - finalize_chapter: finalization complete - (chapter=1 word_count=25 _record=<LogRecord: core.langgraph.nodes.finalize_node, 20, /home/user/saga/core/langgraph/nodes/finalize_node.py, 158, "{'chapter': 1, 'word_count': 25, 'event': 'finalize_chapter: finalization complete', 'level': 'info', 'logger': 'core.langgraph.nodes.finalize_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.generation_node] - info - generate_chapter: starting generation - (chapter=1 model=test-model _record=<LogRecord: core.langgraph.nodes.generation_node, 20, /home/user/saga/core/langgraph/nodes/generation_node.py, 53, "{'chapter': 1, 'model': 'test-model', 'event': 'generate_chapter: starting generation', 'level': 'info', 'logger': 'core.langgraph.nodes.generation_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.generation_node] - info - generate_chapter: calling LLM - (chapter=1 model=test-model max_tokens=16384 prompt_tokens=500 _record=<LogRecord: core.langgraph.nodes.generation_node, 20, /home/user/saga/core/langgraph/nodes/generation_node.py, 158, "{'chapter': 1, 'model': 'test-model', 'max_tokens': 16384, 'prompt_tokens': 500, 'event': 'generate_chapter: calling LLM', 'level': 'info', 'logger': 'core.langgraph.nodes.generation_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.generation_node] - info - generate_chapter: generation complete - (chapter=1 word_count=40 tokens_used=700 _record=<LogRecord: core.langgraph.nodes.generation_node, 20, /home/user/saga/core/langgraph/nodes/generation_node.py, 194, "{'chapter': 1, 'word_count': 40, 'tokens_used': 700, 'event': 'generate_chapter: generation complete', 'level': 'info', 'logger': 'core.langgraph.nodes.generation_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.generation_node] - info - generate_chapter: starting generation - (chapter=1 model=test-model _record=<LogRecord: core.langgraph.nodes.generation_node, 20, /home/user/saga/core/langgraph/nodes/generation_node.py, 53, "{'chapter': 1, 'model': 'test-model', 'event': 'generate_chapter: starting generation', 'level': 'info', 'logger': 'core.langgraph.nodes.generation_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.generation_node] - error - generate_chapter: no plot outline available - (_record=<LogRecord: core.langgraph.nodes.generation_node, 40, /home/user/saga/core/langgraph/nodes/generation_node.py, 61, "{'event': 'generate_chapter: no plot outline available', 'level': 'error', 'logger': 'core.langgraph.nodes.generation_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.generation_node] - info - generate_chapter: starting generation - (chapter=1 model=test-model _record=<LogRecord: core.langgraph.nodes.generation_node, 20, /home/user/saga/core/langgraph/nodes/generation_node.py, 53, "{'chapter': 1, 'model': 'test-model', 'event': 'generate_chapter: starting generation', 'level': 'info', 'logger': 'core.langgraph.nodes.generation_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.generation_node] - info - generate_chapter: calling LLM - (chapter=1 model=test-model max_tokens=16384 prompt_tokens=500 _record=<LogRecord: core.langgraph.nodes.generation_node, 20, /home/user/saga/core/langgraph/nodes/generation_node.py, 158, "{'chapter': 1, 'model': 'test-model', 'max_tokens': 16384, 'prompt_tokens': 500, 'event': 'generate_chapter: calling LLM', 'level': 'info', 'logger': 'core.langgraph.nodes.generation_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.generation_node] - info - generate_chapter: generation complete - (chapter=1 word_count=40 tokens_used=700 _record=<LogRecord: core.langgraph.nodes.generation_node, 20, /home/user/saga/core/langgraph/nodes/generation_node.py, 194, "{'chapter': 1, 'word_count': 40, 'tokens_used': 700, 'event': 'generate_chapter: generation complete', 'level': 'info', 'logger': 'core.langgraph.nodes.generation_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.generation_node] - info - generate_chapter: starting generation - (chapter=1 model=test-model _record=<LogRecord: core.langgraph.nodes.generation_node, 20, /home/user/saga/core/langgraph/nodes/generation_node.py, 53, "{'chapter': 1, 'model': 'test-model', 'event': 'generate_chapter: starting generation', 'level': 'info', 'logger': 'core.langgraph.nodes.generation_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.generation_node] - info - generate_chapter: calling LLM - (chapter=1 model=test-model max_tokens=16384 prompt_tokens=500 _record=<LogRecord: core.langgraph.nodes.generation_node, 20, /home/user/saga/core/langgraph/nodes/generation_node.py, 158, "{'chapter': 1, 'model': 'test-model', 'max_tokens': 16384, 'prompt_tokens': 500, 'event': 'generate_chapter: calling LLM', 'level': 'info', 'logger': 'core.langgraph.nodes.generation_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.generation_node] - error - generate_chapter: LLM returned empty text - (chapter=1 _record=<LogRecord: core.langgraph.nodes.generation_node, 40, /home/user/saga/core/langgraph/nodes/generation_node.py, 181, "{'chapter': 1, 'event': 'generate_chapter: LLM returned empty text', 'level': 'error', 'logger': 'core.langgraph.nodes.generation_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.generation_node] - info - generate_chapter: starting generation - (chapter=1 model=test-model _record=<LogRecord: core.langgraph.nodes.generation_node, 20, /home/user/saga/core/langgraph/nodes/generation_node.py, 53, "{'chapter': 1, 'model': 'test-model', 'event': 'generate_chapter: starting generation', 'level': 'info', 'logger': 'core.langgraph.nodes.generation_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.generation_node] - info - generate_chapter: calling LLM - (chapter=1 model=test-model max_tokens=16384 prompt_tokens=500 _record=<LogRecord: core.langgraph.nodes.generation_node, 20, /home/user/saga/core/langgraph/nodes/generation_node.py, 158, "{'chapter': 1, 'model': 'test-model', 'max_tokens': 16384, 'prompt_tokens': 500, 'event': 'generate_chapter: calling LLM', 'level': 'info', 'logger': 'core.langgraph.nodes.generation_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.generation_node] - error - generate_chapter: exception during generation - (chapter=1 error=LLM service unavailable exc_info=True _record=<LogRecord: core.langgraph.nodes.generation_node, 40, /home/user/saga/core/langgraph/nodes/generation_node.py, 213, "{'chapter': 1, 'error': 'LLM service unavailable', 'exc_info': True, 'event': 'generate_chapter: exception during generation', 'level': 'error', 'logger': 'core.langgraph.nodes.generation_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.generation_node] - info - generate_chapter: starting generation - (chapter=1 model=test-model _record=<LogRecord: core.langgraph.nodes.generation_node, 20, /home/user/saga/core/langgraph/nodes/generation_node.py, 53, "{'chapter': 1, 'model': 'test-model', 'event': 'generate_chapter: starting generation', 'level': 'info', 'logger': 'core.langgraph.nodes.generation_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.generation_node] - error - generate_chapter: token budget exceeded - (error=Insufficient token space for generation. Prompt tokens: 150000, available: -109240 _record=<LogRecord: core.langgraph.nodes.generation_node, 40, /home/user/saga/core/langgraph/nodes/generation_node.py, 150, "{'error': 'Insufficient token space for generation. Prompt tokens: 150000, available: -109240', 'event': 'generate_chapter: token budget exceeded', 'level': 'error', 'logger': 'core.langgraph.nodes.generation_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.generation_node] - info - generate_chapter: starting generation - (chapter=3 model=test-model _record=<LogRecord: core.langgraph.nodes.generation_node, 20, /home/user/saga/core/langgraph/nodes/generation_node.py, 53, "{'chapter': 3, 'model': 'test-model', 'event': 'generate_chapter: starting generation', 'level': 'info', 'logger': 'core.langgraph.nodes.generation_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.generation_node] - info - generate_chapter: calling LLM - (chapter=3 model=test-model max_tokens=16384 prompt_tokens=500 _record=<LogRecord: core.langgraph.nodes.generation_node, 20, /home/user/saga/core/langgraph/nodes/generation_node.py, 158, "{'chapter': 3, 'model': 'test-model', 'max_tokens': 16384, 'prompt_tokens': 500, 'event': 'generate_chapter: calling LLM', 'level': 'info', 'logger': 'core.langgraph.nodes.generation_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.generation_node] - info - generate_chapter: generation complete - (chapter=3 word_count=40 tokens_used=700 _record=<LogRecord: core.langgraph.nodes.generation_node, 20, /home/user/saga/core/langgraph/nodes/generation_node.py, 194, "{'chapter': 3, 'word_count': 40, 'tokens_used': 700, 'event': 'generate_chapter: generation complete', 'level': 'info', 'logger': 'core.langgraph.nodes.generation_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.generation_node] - info - generate_chapter: starting generation - (chapter=1 model=test-model _record=<LogRecord: core.langgraph.nodes.generation_node, 20, /home/user/saga/core/langgraph/nodes/generation_node.py, 53, "{'chapter': 1, 'model': 'test-model', 'event': 'generate_chapter: starting generation', 'level': 'info', 'logger': 'core.langgraph.nodes.generation_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.generation_node] - info - generate_chapter: calling LLM - (chapter=1 model=test-model max_tokens=16384 prompt_tokens=500 _record=<LogRecord: core.langgraph.nodes.generation_node, 20, /home/user/saga/core/langgraph/nodes/generation_node.py, 158, "{'chapter': 1, 'model': 'test-model', 'max_tokens': 16384, 'prompt_tokens': 500, 'event': 'generate_chapter: calling LLM', 'level': 'info', 'logger': 'core.langgraph.nodes.generation_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.generation_node] - info - generate_chapter: generation complete - (chapter=1 word_count=40 tokens_used=700 _record=<LogRecord: core.langgraph.nodes.generation_node, 20, /home/user/saga/core/langgraph/nodes/generation_node.py, 194, "{'chapter': 1, 'word_count': 40, 'tokens_used': 700, 'event': 'generate_chapter: generation complete', 'level': 'info', 'logger': 'core.langgraph.nodes.generation_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.generation_node] - info - generate_chapter: starting generation - (chapter=1 model=test-model _record=<LogRecord: core.langgraph.nodes.generation_node, 20, /home/user/saga/core/langgraph/nodes/generation_node.py, 53, "{'chapter': 1, 'model': 'test-model', 'event': 'generate_chapter: starting generation', 'level': 'info', 'logger': 'core.langgraph.nodes.generation_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.generation_node] - info - generate_chapter: calling LLM - (chapter=1 model=test-model max_tokens=16384 prompt_tokens=500 _record=<LogRecord: core.langgraph.nodes.generation_node, 20, /home/user/saga/core/langgraph/nodes/generation_node.py, 158, "{'chapter': 1, 'model': 'test-model', 'max_tokens': 16384, 'prompt_tokens': 500, 'event': 'generate_chapter: calling LLM', 'level': 'info', 'logger': 'core.langgraph.nodes.generation_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.generation_node] - info - generate_chapter: generation complete - (chapter=1 word_count=10 tokens_used=0 _record=<LogRecord: core.langgraph.nodes.generation_node, 20, /home/user/saga/core/langgraph/nodes/generation_node.py, 194, "{'chapter': 1, 'word_count': 10, 'tokens_used': 0, 'event': 'generate_chapter: generation complete', 'level': 'info', 'logger': 'core.langgraph.nodes.generation_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.generation_node] - info - generate_chapter: starting generation - (chapter=1 model=test-model _record=<LogRecord: core.langgraph.nodes.generation_node, 20, /home/user/saga/core/langgraph/nodes/generation_node.py, 53, "{'chapter': 1, 'model': 'test-model', 'event': 'generate_chapter: starting generation', 'level': 'info', 'logger': 'core.langgraph.nodes.generation_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.generation_node] - info - generate_chapter: calling LLM - (chapter=1 model=test-model max_tokens=16384 prompt_tokens=500 _record=<LogRecord: core.langgraph.nodes.generation_node, 20, /home/user/saga/core/langgraph/nodes/generation_node.py, 158, "{'chapter': 1, 'model': 'test-model', 'max_tokens': 16384, 'prompt_tokens': 500, 'event': 'generate_chapter: calling LLM', 'level': 'info', 'logger': 'core.langgraph.nodes.generation_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.generation_node] - info - generate_chapter: generation complete - (chapter=1 word_count=40 tokens_used=700 _record=<LogRecord: core.langgraph.nodes.generation_node, 20, /home/user/saga/core/langgraph/nodes/generation_node.py, 194, "{'chapter': 1, 'word_count': 40, 'tokens_used': 700, 'event': 'generate_chapter: generation complete', 'level': 'info', 'logger': 'core.langgraph.nodes.generation_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.generation_node] - info - generate_chapter: starting generation - (chapter=1 model=test-model _record=<LogRecord: core.langgraph.nodes.generation_node, 20, /home/user/saga/core/langgraph/nodes/generation_node.py, 53, "{'chapter': 1, 'model': 'test-model', 'event': 'generate_chapter: starting generation', 'level': 'info', 'logger': 'core.langgraph.nodes.generation_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.generation_node] - info - generate_chapter: calling LLM - (chapter=1 model=test-model max_tokens=16384 prompt_tokens=500 _record=<LogRecord: core.langgraph.nodes.generation_node, 20, /home/user/saga/core/langgraph/nodes/generation_node.py, 158, "{'chapter': 1, 'model': 'test-model', 'max_tokens': 16384, 'prompt_tokens': 500, 'event': 'generate_chapter: calling LLM', 'level': 'info', 'logger': 'core.langgraph.nodes.generation_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.generation_node] - info - generate_chapter: generation complete - (chapter=1 word_count=40 tokens_used=700 _record=<LogRecord: core.langgraph.nodes.generation_node, 20, /home/user/saga/core/langgraph/nodes/generation_node.py, 194, "{'chapter': 1, 'word_count': 40, 'tokens_used': 700, 'event': 'generate_chapter: generation complete', 'level': 'info', 'logger': 'core.langgraph.nodes.generation_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.generation_node] - info - generate_chapter: starting generation - (chapter=1 model=test-model _record=<LogRecord: core.langgraph.nodes.generation_node, 20, /home/user/saga/core/langgraph/nodes/generation_node.py, 53, "{'chapter': 1, 'model': 'test-model', 'event': 'generate_chapter: starting generation', 'level': 'info', 'logger': 'core.langgraph.nodes.generation_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.generation_node] - info - generate_chapter: calling LLM - (chapter=1 model=test-model max_tokens=16384 prompt_tokens=500 _record=<LogRecord: core.langgraph.nodes.generation_node, 20, /home/user/saga/core/langgraph/nodes/generation_node.py, 158, "{'chapter': 1, 'model': 'test-model', 'max_tokens': 16384, 'prompt_tokens': 500, 'event': 'generate_chapter: calling LLM', 'level': 'info', 'logger': 'core.langgraph.nodes.generation_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.generation_node] - info - generate_chapter: generation complete - (chapter=1 word_count=40 tokens_used=700 _record=<LogRecord: core.langgraph.nodes.generation_node, 20, /home/user/saga/core/langgraph/nodes/generation_node.py, 194, "{'chapter': 1, 'word_count': 40, 'tokens_used': 700, 'event': 'generate_chapter: generation complete', 'level': 'info', 'logger': 'core.langgraph.nodes.generation_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.generation_node] - info - generate_chapter: starting generation - (chapter=1 model=test-model _record=<LogRecord: core.langgraph.nodes.generation_node, 20, /home/user/saga/core/langgraph/nodes/generation_node.py, 53, "{'chapter': 1, 'model': 'test-model', 'event': 'generate_chapter: starting generation', 'level': 'info', 'logger': 'core.langgraph.nodes.generation_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.generation_node] - info - generate_chapter: calling LLM - (chapter=1 model=test-model max_tokens=16384 prompt_tokens=500 _record=<LogRecord: core.langgraph.nodes.generation_node, 20, /home/user/saga/core/langgraph/nodes/generation_node.py, 158, "{'chapter': 1, 'model': 'test-model', 'max_tokens': 16384, 'prompt_tokens': 500, 'event': 'generate_chapter: calling LLM', 'level': 'info', 'logger': 'core.langgraph.nodes.generation_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.generation_node] - info - generate_chapter: generation complete - (chapter=1 word_count=40 tokens_used=700 _record=<LogRecord: core.langgraph.nodes.generation_node, 20, /home/user/saga/core/langgraph/nodes/generation_node.py, 194, "{'chapter': 1, 'word_count': 40, 'tokens_used': 700, 'event': 'generate_chapter: generation complete', 'level': 'info', 'logger': 'core.langgraph.nodes.generation_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.generation_node] - info - generate_chapter: starting generation - (chapter=1 model=qwen3-a3b _record=<LogRecord: core.langgraph.nodes.generation_node, 20, /home/user/saga/core/langgraph/nodes/generation_node.py, 53, "{'chapter': 1, 'model': 'qwen3-a3b', 'event': 'generate_chapter: starting generation', 'level': 'info', 'logger': 'core.langgraph.nodes.generation_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.generation_node] - info - generate_chapter: calling LLM - (chapter=1 model=qwen3-a3b max_tokens=16384 prompt_tokens=500 _record=<LogRecord: core.langgraph.nodes.generation_node, 20, /home/user/saga/core/langgraph/nodes/generation_node.py, 158, "{'chapter': 1, 'model': 'qwen3-a3b', 'max_tokens': 16384, 'prompt_tokens': 500, 'event': 'generate_chapter: calling LLM', 'level': 'info', 'logger': 'core.langgraph.nodes.generation_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.generation_node] - info - generate_chapter: generation complete - (chapter=1 word_count=40 tokens_used=700 _record=<LogRecord: core.langgraph.nodes.generation_node, 20, /home/user/saga/core/langgraph/nodes/generation_node.py, 194, "{'chapter': 1, 'word_count': 40, 'tokens_used': 700, 'event': 'generate_chapter: generation complete', 'level': 'info', 'logger': 'core.langgraph.nodes.generation_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.graph_context] - info - build_context_from_graph - (chapter=5 lookback=5 char_count=auto _record=<LogRecord: core.langgraph.graph_context, 20, /home/user/saga/core/langgraph/graph_context.py, 71, "{'chapter': 5, 'lookback': 5, 'char_count': 'auto', 'event': 'build_context_from_graph', 'level': 'info', 'logger': 'core.langgraph.graph_context', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.graph_context] - info - build_context_from_graph: context built - (characters=0 world_items=0 relationships=0 summaries=0 _record=<LogRecord: core.langgraph.graph_context, 20, /home/user/saga/core/langgraph/graph_context.py, 131, "{'characters': 0, 'world_items': 0, 'relationships': 0, 'summaries': 0, 'event': 'build_context_from_graph: context built', 'level': 'info', 'logger': 'core.langgraph.graph_context', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.graph_context] - info - build_context_from_graph - (chapter=5 lookback=5 char_count=1 _record=<LogRecord: core.langgraph.graph_context, 20, /home/user/saga/core/langgraph/graph_context.py, 71, "{'chapter': 5, 'lookback': 5, 'char_count': 1, 'event': 'build_context_from_graph', 'level': 'info', 'logger': 'core.langgraph.graph_context', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.graph_context] - info - build_context_from_graph: context built - (characters=1 world_items=0 relationships=0 summaries=0 _record=<LogRecord: core.langgraph.graph_context, 20, /home/user/saga/core/langgraph/graph_context.py, 131, "{'characters': 1, 'world_items': 0, 'relationships': 0, 'summaries': 0, 'event': 'build_context_from_graph: context built', 'level': 'info', 'logger': 'core.langgraph.graph_context', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.graph_context] - info - build_context_from_graph - (chapter=5 lookback=5 char_count=auto _record=<LogRecord: core.langgraph.graph_context, 20, /home/user/saga/core/langgraph/graph_context.py, 71, "{'chapter': 5, 'lookback': 5, 'char_count': 'auto', 'event': 'build_context_from_graph', 'level': 'info', 'logger': 'core.langgraph.graph_context', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.graph_context] - info - build_context_from_graph: context built - (characters=0 world_items=0 relationships=0 summaries=0 _record=<LogRecord: core.langgraph.graph_context, 20, /home/user/saga/core/langgraph/graph_context.py, 131, "{'characters': 0, 'world_items': 0, 'relationships': 0, 'summaries': 0, 'event': 'build_context_from_graph: context built', 'level': 'info', 'logger': 'core.langgraph.graph_context', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.graph_context] - info - build_context_from_graph - (chapter=5 lookback=5 char_count=auto _record=<LogRecord: core.langgraph.graph_context, 20, /home/user/saga/core/langgraph/graph_context.py, 71, "{'chapter': 5, 'lookback': 5, 'char_count': 'auto', 'event': 'build_context_from_graph', 'level': 'info', 'logger': 'core.langgraph.graph_context', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.graph_context] - error - build_context_from_graph: error building context - (error=Query error chapter=5 exc_info=True _record=<LogRecord: core.langgraph.graph_context, 40, /home/user/saga/core/langgraph/graph_context.py, 142, "{'error': 'Query error', 'chapter': 5, 'exc_info': True, 'event': 'build_context_from_graph: error building context', 'level': 'error', 'logger': 'core.langgraph.graph_context', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.graph_context] - warning - get_key_events: error retrieving events (returning empty list) - (error=Query error chapter=5 start_chapter=1 exc_info=True _record=<LogRecord: core.langgraph.graph_context, 30, /home/user/saga/core/langgraph/graph_context.py, 445, "{'error': 'Query error', 'chapter': 5, 'start_chapter': 1, 'exc_info': True, 'event': 'get_key_events: error retrieving events (returning empty list)', 'level': 'warning', 'logger': 'core.langgraph.graph_context', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.workflow] - info - should_revise_or_continue: routing decision - (needs_revision=False iteration=0 max_iterations=3 force_continue=False _record=<LogRecord: core.langgraph.workflow, 20, /home/user/saga/core/langgraph/workflow.py, 220, "{'needs_revision': False, 'iteration': 0, 'max_iterations': 3, 'force_continue': False, 'event': 'should_revise_or_continue: routing decision', 'level': 'info', 'logger': 'core.langgraph.workflow', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.workflow] - info - should_revise_or_continue: no revision needed, routing to summarize - (_record=<LogRecord: core.langgraph.workflow, 20, /home/user/saga/core/langgraph/workflow.py, 252, "{'event': 'should_revise_or_continue: no revision needed, routing to summarize', 'level': 'info', 'logger': 'core.langgraph.workflow', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.workflow] - info - should_revise_or_continue: routing decision - (needs_revision=True iteration=0 max_iterations=3 force_continue=False _record=<LogRecord: core.langgraph.workflow, 20, /home/user/saga/core/langgraph/workflow.py, 220, "{'needs_revision': True, 'iteration': 0, 'max_iterations': 3, 'force_continue': False, 'event': 'should_revise_or_continue: routing decision', 'level': 'info', 'logger': 'core.langgraph.workflow', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.workflow] - info - should_revise_or_continue: revision needed, routing to revise node - (_record=<LogRecord: core.langgraph.workflow, 20, /home/user/saga/core/langgraph/workflow.py, 246, "{'event': 'should_revise_or_continue: revision needed, routing to revise node', 'level': 'info', 'logger': 'core.langgraph.workflow', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.workflow] - info - should_revise_or_continue: routing decision - (needs_revision=True iteration=3 max_iterations=3 force_continue=False _record=<LogRecord: core.langgraph.workflow, 20, /home/user/saga/core/langgraph/workflow.py, 220, "{'needs_revision': True, 'iteration': 3, 'max_iterations': 3, 'force_continue': False, 'event': 'should_revise_or_continue: routing decision', 'level': 'info', 'logger': 'core.langgraph.workflow', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.workflow] - warning - should_revise_or_continue: max iterations reached, routing to summarize - (iteration_count=3 max_iterations=3 _record=<LogRecord: core.langgraph.workflow, 30, /home/user/saga/core/langgraph/workflow.py, 237, "{'iteration_count': 3, 'max_iterations': 3, 'event': 'should_revise_or_continue: max iterations reached, routing to summarize', 'level': 'warning', 'logger': 'core.langgraph.workflow', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.workflow] - info - should_revise_or_continue: routing decision - (needs_revision=True iteration=0 max_iterations=3 force_continue=True _record=<LogRecord: core.langgraph.workflow, 20, /home/user/saga/core/langgraph/workflow.py, 220, "{'needs_revision': True, 'iteration': 0, 'max_iterations': 3, 'force_continue': True, 'event': 'should_revise_or_continue: routing decision', 'level': 'info', 'logger': 'core.langgraph.workflow', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.workflow] - info - should_revise_or_continue: force_continue enabled, routing to summarize - (_record=<LogRecord: core.langgraph.workflow, 20, /home/user/saga/core/langgraph/workflow.py, 230, "{'event': 'should_revise_or_continue: force_continue enabled, routing to summarize', 'level': 'info', 'logger': 'core.langgraph.workflow', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.workflow] - info - should_revise_or_continue: routing decision - (needs_revision=True iteration=1 max_iterations=3 force_continue=False _record=<LogRecord: core.langgraph.workflow, 20, /home/user/saga/core/langgraph/workflow.py, 220, "{'needs_revision': True, 'iteration': 1, 'max_iterations': 3, 'force_continue': False, 'event': 'should_revise_or_continue: routing decision', 'level': 'info', 'logger': 'core.langgraph.workflow', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.workflow] - info - should_revise_or_continue: revision needed, routing to revise node - (_record=<LogRecord: core.langgraph.workflow, 20, /home/user/saga/core/langgraph/workflow.py, 246, "{'event': 'should_revise_or_continue: revision needed, routing to revise node', 'level': 'info', 'logger': 'core.langgraph.workflow', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.workflow] - info - create_phase2_graph: building complete workflow graph - (_record=<LogRecord: core.langgraph.workflow, 20, /home/user/saga/core/langgraph/workflow.py, 281, "{'event': 'create_phase2_graph: building complete workflow graph', 'level': 'info', 'logger': 'core.langgraph.workflow', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.workflow] - info - create_phase2_graph: graph built successfully - (nodes=['generate', 'extract', 'commit', 'validate', 'revise', 'summarize', 'finalize'] entry_point=generate _record=<LogRecord: core.langgraph.workflow, 20, /home/user/saga/core/langgraph/workflow.py, 321, "{'nodes': ['generate', 'extract', 'commit', 'validate', 'revise', 'summarize', 'finalize'], 'entry_point': 'generate', 'event': 'create_phase2_graph: graph built successfully', 'level': 'info', 'logger': 'core.langgraph.workflow', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.workflow] - info - create_phase2_graph: compiling without checkpointing - (_record=<LogRecord: core.langgraph.workflow, 20, /home/user/saga/core/langgraph/workflow.py, 340, "{'event': 'create_phase2_graph: compiling without checkpointing', 'level': 'info', 'logger': 'core.langgraph.workflow', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.workflow] - info - should_revise_or_continue: routing decision - (needs_revision=False iteration=0 max_iterations=3 force_continue=False _record=<LogRecord: core.langgraph.workflow, 20, /home/user/saga/core/langgraph/workflow.py, 220, "{'needs_revision': False, 'iteration': 0, 'max_iterations': 3, 'force_continue': False, 'event': 'should_revise_or_continue: routing decision', 'level': 'info', 'logger': 'core.langgraph.workflow', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.workflow] - info - should_revise_or_continue: no revision needed, routing to summarize - (_record=<LogRecord: core.langgraph.workflow, 20, /home/user/saga/core/langgraph/workflow.py, 252, "{'event': 'should_revise_or_continue: no revision needed, routing to summarize', 'level': 'info', 'logger': 'core.langgraph.workflow', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.workflow] - info - create_phase2_graph: building complete workflow graph - (_record=<LogRecord: core.langgraph.workflow, 20, /home/user/saga/core/langgraph/workflow.py, 281, "{'event': 'create_phase2_graph: building complete workflow graph', 'level': 'info', 'logger': 'core.langgraph.workflow', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.workflow] - info - create_phase2_graph: graph built successfully - (nodes=['generate', 'extract', 'commit', 'validate', 'revise', 'summarize', 'finalize'] entry_point=generate _record=<LogRecord: core.langgraph.workflow, 20, /home/user/saga/core/langgraph/workflow.py, 321, "{'nodes': ['generate', 'extract', 'commit', 'validate', 'revise', 'summarize', 'finalize'], 'entry_point': 'generate', 'event': 'create_phase2_graph: graph built successfully', 'level': 'info', 'logger': 'core.langgraph.workflow', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.workflow] - info - create_phase2_graph: compiling without checkpointing - (_record=<LogRecord: core.langgraph.workflow, 20, /home/user/saga/core/langgraph/workflow.py, 340, "{'event': 'create_phase2_graph: compiling without checkpointing', 'level': 'info', 'logger': 'core.langgraph.workflow', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.workflow] - info - should_revise_or_continue: routing decision - (needs_revision=True iteration=0 max_iterations=3 force_continue=False _record=<LogRecord: core.langgraph.workflow, 20, /home/user/saga/core/langgraph/workflow.py, 220, "{'needs_revision': True, 'iteration': 0, 'max_iterations': 3, 'force_continue': False, 'event': 'should_revise_or_continue: routing decision', 'level': 'info', 'logger': 'core.langgraph.workflow', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.workflow] - info - should_revise_or_continue: revision needed, routing to revise node - (_record=<LogRecord: core.langgraph.workflow, 20, /home/user/saga/core/langgraph/workflow.py, 246, "{'event': 'should_revise_or_continue: revision needed, routing to revise node', 'level': 'info', 'logger': 'core.langgraph.workflow', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.workflow] - info - should_revise_or_continue: routing decision - (needs_revision=False iteration=1 max_iterations=3 force_continue=False _record=<LogRecord: core.langgraph.workflow, 20, /home/user/saga/core/langgraph/workflow.py, 220, "{'needs_revision': False, 'iteration': 1, 'max_iterations': 3, 'force_continue': False, 'event': 'should_revise_or_continue: routing decision', 'level': 'info', 'logger': 'core.langgraph.workflow', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.workflow] - info - should_revise_or_continue: no revision needed, routing to summarize - (_record=<LogRecord: core.langgraph.workflow, 20, /home/user/saga/core/langgraph/workflow.py, 252, "{'event': 'should_revise_or_continue: no revision needed, routing to summarize', 'level': 'info', 'logger': 'core.langgraph.workflow', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.workflow] - info - create_phase2_graph: building complete workflow graph - (_record=<LogRecord: core.langgraph.workflow, 20, /home/user/saga/core/langgraph/workflow.py, 281, "{'event': 'create_phase2_graph: building complete workflow graph', 'level': 'info', 'logger': 'core.langgraph.workflow', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.workflow] - info - create_phase2_graph: graph built successfully - (nodes=['generate', 'extract', 'commit', 'validate', 'revise', 'summarize', 'finalize'] entry_point=generate _record=<LogRecord: core.langgraph.workflow, 20, /home/user/saga/core/langgraph/workflow.py, 321, "{'nodes': ['generate', 'extract', 'commit', 'validate', 'revise', 'summarize', 'finalize'], 'entry_point': 'generate', 'event': 'create_phase2_graph: graph built successfully', 'level': 'info', 'logger': 'core.langgraph.workflow', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.workflow] - info - create_phase2_graph: compiling without checkpointing - (_record=<LogRecord: core.langgraph.workflow, 20, /home/user/saga/core/langgraph/workflow.py, 340, "{'event': 'create_phase2_graph: compiling without checkpointing', 'level': 'info', 'logger': 'core.langgraph.workflow', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.workflow] - info - should_revise_or_continue: routing decision - (needs_revision=True iteration=0 max_iterations=2 force_continue=False _record=<LogRecord: core.langgraph.workflow, 20, /home/user/saga/core/langgraph/workflow.py, 220, "{'needs_revision': True, 'iteration': 0, 'max_iterations': 2, 'force_continue': False, 'event': 'should_revise_or_continue: routing decision', 'level': 'info', 'logger': 'core.langgraph.workflow', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.workflow] - info - should_revise_or_continue: revision needed, routing to revise node - (_record=<LogRecord: core.langgraph.workflow, 20, /home/user/saga/core/langgraph/workflow.py, 246, "{'event': 'should_revise_or_continue: revision needed, routing to revise node', 'level': 'info', 'logger': 'core.langgraph.workflow', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.workflow] - info - should_revise_or_continue: routing decision - (needs_revision=True iteration=1 max_iterations=2 force_continue=False _record=<LogRecord: core.langgraph.workflow, 20, /home/user/saga/core/langgraph/workflow.py, 220, "{'needs_revision': True, 'iteration': 1, 'max_iterations': 2, 'force_continue': False, 'event': 'should_revise_or_continue: routing decision', 'level': 'info', 'logger': 'core.langgraph.workflow', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.workflow] - info - should_revise_or_continue: revision needed, routing to revise node - (_record=<LogRecord: core.langgraph.workflow, 20, /home/user/saga/core/langgraph/workflow.py, 246, "{'event': 'should_revise_or_continue: revision needed, routing to revise node', 'level': 'info', 'logger': 'core.langgraph.workflow', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.workflow] - info - should_revise_or_continue: routing decision - (needs_revision=True iteration=2 max_iterations=2 force_continue=False _record=<LogRecord: core.langgraph.workflow, 20, /home/user/saga/core/langgraph/workflow.py, 220, "{'needs_revision': True, 'iteration': 2, 'max_iterations': 2, 'force_continue': False, 'event': 'should_revise_or_continue: routing decision', 'level': 'info', 'logger': 'core.langgraph.workflow', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.workflow] - warning - should_revise_or_continue: max iterations reached, routing to summarize - (iteration_count=2 max_iterations=2 _record=<LogRecord: core.langgraph.workflow, 30, /home/user/saga/core/langgraph/workflow.py, 237, "{'iteration_count': 2, 'max_iterations': 2, 'event': 'should_revise_or_continue: max iterations reached, routing to summarize', 'level': 'warning', 'logger': 'core.langgraph.workflow', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.workflow] - info - create_phase2_graph: building complete workflow graph - (_record=<LogRecord: core.langgraph.workflow, 20, /home/user/saga/core/langgraph/workflow.py, 281, "{'event': 'create_phase2_graph: building complete workflow graph', 'level': 'info', 'logger': 'core.langgraph.workflow', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.workflow] - info - create_phase2_graph: graph built successfully - (nodes=['generate', 'extract', 'commit', 'validate', 'revise', 'summarize', 'finalize'] entry_point=generate _record=<LogRecord: core.langgraph.workflow, 20, /home/user/saga/core/langgraph/workflow.py, 321, "{'nodes': ['generate', 'extract', 'commit', 'validate', 'revise', 'summarize', 'finalize'], 'entry_point': 'generate', 'event': 'create_phase2_graph: graph built successfully', 'level': 'info', 'logger': 'core.langgraph.workflow', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.workflow] - info - create_phase2_graph: compiling without checkpointing - (_record=<LogRecord: core.langgraph.workflow, 20, /home/user/saga/core/langgraph/workflow.py, 340, "{'event': 'create_phase2_graph: compiling without checkpointing', 'level': 'info', 'logger': 'core.langgraph.workflow', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.workflow] - info - should_revise_or_continue: routing decision - (needs_revision=True iteration=0 max_iterations=3 force_continue=True _record=<LogRecord: core.langgraph.workflow, 20, /home/user/saga/core/langgraph/workflow.py, 220, "{'needs_revision': True, 'iteration': 0, 'max_iterations': 3, 'force_continue': True, 'event': 'should_revise_or_continue: routing decision', 'level': 'info', 'logger': 'core.langgraph.workflow', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.workflow] - info - should_revise_or_continue: force_continue enabled, routing to summarize - (_record=<LogRecord: core.langgraph.workflow, 20, /home/user/saga/core/langgraph/workflow.py, 230, "{'event': 'should_revise_or_continue: force_continue enabled, routing to summarize', 'level': 'info', 'logger': 'core.langgraph.workflow', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.workflow] - info - create_phase2_graph: building complete workflow graph - (_record=<LogRecord: core.langgraph.workflow, 20, /home/user/saga/core/langgraph/workflow.py, 281, "{'event': 'create_phase2_graph: building complete workflow graph', 'level': 'info', 'logger': 'core.langgraph.workflow', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.workflow] - info - create_phase2_graph: graph built successfully - (nodes=['generate', 'extract', 'commit', 'validate', 'revise', 'summarize', 'finalize'] entry_point=generate _record=<LogRecord: core.langgraph.workflow, 20, /home/user/saga/core/langgraph/workflow.py, 321, "{'nodes': ['generate', 'extract', 'commit', 'validate', 'revise', 'summarize', 'finalize'], 'entry_point': 'generate', 'event': 'create_phase2_graph: graph built successfully', 'level': 'info', 'logger': 'core.langgraph.workflow', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.workflow] - info - create_phase2_graph: compiling without checkpointing - (_record=<LogRecord: core.langgraph.workflow, 20, /home/user/saga/core/langgraph/workflow.py, 340, "{'event': 'create_phase2_graph: compiling without checkpointing', 'level': 'info', 'logger': 'core.langgraph.workflow', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.workflow] - info - should_revise_or_continue: routing decision - (needs_revision=False iteration=0 max_iterations=3 force_continue=False _record=<LogRecord: core.langgraph.workflow, 20, /home/user/saga/core/langgraph/workflow.py, 220, "{'needs_revision': False, 'iteration': 0, 'max_iterations': 3, 'force_continue': False, 'event': 'should_revise_or_continue: routing decision', 'level': 'info', 'logger': 'core.langgraph.workflow', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.workflow] - info - should_revise_or_continue: no revision needed, routing to summarize - (_record=<LogRecord: core.langgraph.workflow, 20, /home/user/saga/core/langgraph/workflow.py, 252, "{'event': 'should_revise_or_continue: no revision needed, routing to summarize', 'level': 'info', 'logger': 'core.langgraph.workflow', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.workflow] - info - create_phase2_graph: building complete workflow graph - (_record=<LogRecord: core.langgraph.workflow, 20, /home/user/saga/core/langgraph/workflow.py, 281, "{'event': 'create_phase2_graph: building complete workflow graph', 'level': 'info', 'logger': 'core.langgraph.workflow', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.workflow] - info - create_phase2_graph: graph built successfully - (nodes=['generate', 'extract', 'commit', 'validate', 'revise', 'summarize', 'finalize'] entry_point=generate _record=<LogRecord: core.langgraph.workflow, 20, /home/user/saga/core/langgraph/workflow.py, 321, "{'nodes': ['generate', 'extract', 'commit', 'validate', 'revise', 'summarize', 'finalize'], 'entry_point': 'generate', 'event': 'create_phase2_graph: graph built successfully', 'level': 'info', 'logger': 'core.langgraph.workflow', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.workflow] - info - create_phase2_graph: compiling without checkpointing - (_record=<LogRecord: core.langgraph.workflow, 20, /home/user/saga/core/langgraph/workflow.py, 340, "{'event': 'create_phase2_graph: compiling without checkpointing', 'level': 'info', 'logger': 'core.langgraph.workflow', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.workflow] - info - should_revise_or_continue: routing decision - (needs_revision=False iteration=0 max_iterations=3 force_continue=False _record=<LogRecord: core.langgraph.workflow, 20, /home/user/saga/core/langgraph/workflow.py, 220, "{'needs_revision': False, 'iteration': 0, 'max_iterations': 3, 'force_continue': False, 'event': 'should_revise_or_continue: routing decision', 'level': 'info', 'logger': 'core.langgraph.workflow', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.workflow] - info - should_revise_or_continue: no revision needed, routing to summarize - (_record=<LogRecord: core.langgraph.workflow, 20, /home/user/saga/core/langgraph/workflow.py, 252, "{'event': 'should_revise_or_continue: no revision needed, routing to summarize', 'level': 'info', 'logger': 'core.langgraph.workflow', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.workflow] - info - create_phase2_graph: building complete workflow graph - (_record=<LogRecord: core.langgraph.workflow, 20, /home/user/saga/core/langgraph/workflow.py, 281, "{'event': 'create_phase2_graph: building complete workflow graph', 'level': 'info', 'logger': 'core.langgraph.workflow', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.workflow] - info - create_phase2_graph: graph built successfully - (nodes=['generate', 'extract', 'commit', 'validate', 'revise', 'summarize', 'finalize'] entry_point=generate _record=<LogRecord: core.langgraph.workflow, 20, /home/user/saga/core/langgraph/workflow.py, 321, "{'nodes': ['generate', 'extract', 'commit', 'validate', 'revise', 'summarize', 'finalize'], 'entry_point': 'generate', 'event': 'create_phase2_graph: graph built successfully', 'level': 'info', 'logger': 'core.langgraph.workflow', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.workflow] - info - create_phase2_graph: compiling without checkpointing - (_record=<LogRecord: core.langgraph.workflow, 20, /home/user/saga/core/langgraph/workflow.py, 340, "{'event': 'create_phase2_graph: compiling without checkpointing', 'level': 'info', 'logger': 'core.langgraph.workflow', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.workflow] - info - should_revise_or_continue: routing decision - (needs_revision=True iteration=0 max_iterations=3 force_continue=False _record=<LogRecord: core.langgraph.workflow, 20, /home/user/saga/core/langgraph/workflow.py, 220, "{'needs_revision': True, 'iteration': 0, 'max_iterations': 3, 'force_continue': False, 'event': 'should_revise_or_continue: routing decision', 'level': 'info', 'logger': 'core.langgraph.workflow', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.workflow] - info - should_revise_or_continue: revision needed, routing to revise node - (_record=<LogRecord: core.langgraph.workflow, 20, /home/user/saga/core/langgraph/workflow.py, 246, "{'event': 'should_revise_or_continue: revision needed, routing to revise node', 'level': 'info', 'logger': 'core.langgraph.workflow', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.workflow] - info - should_revise_or_continue: routing decision - (needs_revision=True iteration=1 max_iterations=3 force_continue=False _record=<LogRecord: core.langgraph.workflow, 20, /home/user/saga/core/langgraph/workflow.py, 220, "{'needs_revision': True, 'iteration': 1, 'max_iterations': 3, 'force_continue': False, 'event': 'should_revise_or_continue: routing decision', 'level': 'info', 'logger': 'core.langgraph.workflow', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.workflow] - info - should_revise_or_continue: revision needed, routing to revise node - (_record=<LogRecord: core.langgraph.workflow, 20, /home/user/saga/core/langgraph/workflow.py, 246, "{'event': 'should_revise_or_continue: revision needed, routing to revise node', 'level': 'info', 'logger': 'core.langgraph.workflow', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.workflow] - info - should_revise_or_continue: routing decision - (needs_revision=False iteration=2 max_iterations=3 force_continue=False _record=<LogRecord: core.langgraph.workflow, 20, /home/user/saga/core/langgraph/workflow.py, 220, "{'needs_revision': False, 'iteration': 2, 'max_iterations': 3, 'force_continue': False, 'event': 'should_revise_or_continue: routing decision', 'level': 'info', 'logger': 'core.langgraph.workflow', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.workflow] - info - should_revise_or_continue: no revision needed, routing to summarize - (_record=<LogRecord: core.langgraph.workflow, 20, /home/user/saga/core/langgraph/workflow.py, 252, "{'event': 'should_revise_or_continue: no revision needed, routing to summarize', 'level': 'info', 'logger': 'core.langgraph.workflow', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.workflow] - info - create_phase2_graph: building complete workflow graph - (_record=<LogRecord: core.langgraph.workflow, 20, /home/user/saga/core/langgraph/workflow.py, 281, "{'event': 'create_phase2_graph: building complete workflow graph', 'level': 'info', 'logger': 'core.langgraph.workflow', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.workflow] - info - create_phase2_graph: graph built successfully - (nodes=['generate', 'extract', 'commit', 'validate', 'revise', 'summarize', 'finalize'] entry_point=generate _record=<LogRecord: core.langgraph.workflow, 20, /home/user/saga/core/langgraph/workflow.py, 321, "{'nodes': ['generate', 'extract', 'commit', 'validate', 'revise', 'summarize', 'finalize'], 'entry_point': 'generate', 'event': 'create_phase2_graph: graph built successfully', 'level': 'info', 'logger': 'core.langgraph.workflow', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.workflow] - info - create_phase2_graph: compiling without checkpointing - (_record=<LogRecord: core.langgraph.workflow, 20, /home/user/saga/core/langgraph/workflow.py, 340, "{'event': 'create_phase2_graph: compiling without checkpointing', 'level': 'info', 'logger': 'core.langgraph.workflow', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.workflow] - info - should_revise_or_continue: routing decision - (needs_revision=False iteration=0 max_iterations=3 force_continue=False _record=<LogRecord: core.langgraph.workflow, 20, /home/user/saga/core/langgraph/workflow.py, 220, "{'needs_revision': False, 'iteration': 0, 'max_iterations': 3, 'force_continue': False, 'event': 'should_revise_or_continue: routing decision', 'level': 'info', 'logger': 'core.langgraph.workflow', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.workflow] - info - should_revise_or_continue: no revision needed, routing to summarize - (_record=<LogRecord: core.langgraph.workflow, 20, /home/user/saga/core/langgraph/workflow.py, 252, "{'event': 'should_revise_or_continue: no revision needed, routing to summarize', 'level': 'info', 'logger': 'core.langgraph.workflow', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.workflow] - info - create_phase2_graph: building complete workflow graph - (_record=<LogRecord: core.langgraph.workflow, 20, /home/user/saga/core/langgraph/workflow.py, 281, "{'event': 'create_phase2_graph: building complete workflow graph', 'level': 'info', 'logger': 'core.langgraph.workflow', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.workflow] - info - create_phase2_graph: graph built successfully - (nodes=['generate', 'extract', 'commit', 'validate', 'revise', 'summarize', 'finalize'] entry_point=generate _record=<LogRecord: core.langgraph.workflow, 20, /home/user/saga/core/langgraph/workflow.py, 321, "{'nodes': ['generate', 'extract', 'commit', 'validate', 'revise', 'summarize', 'finalize'], 'entry_point': 'generate', 'event': 'create_phase2_graph: graph built successfully', 'level': 'info', 'logger': 'core.langgraph.workflow', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.workflow] - info - create_phase2_graph: compiling without checkpointing - (_record=<LogRecord: core.langgraph.workflow, 20, /home/user/saga/core/langgraph/workflow.py, 340, "{'event': 'create_phase2_graph: compiling without checkpointing', 'level': 'info', 'logger': 'core.langgraph.workflow', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.revision_node] - info - revise_chapter: starting revision - (chapter=1 iteration=0 contradictions=2 _record=<LogRecord: core.langgraph.nodes.revision_node, 20, /home/user/saga/core/langgraph/nodes/revision_node.py, 54, "{'chapter': 1, 'iteration': 0, 'contradictions': 2, 'event': 'revise_chapter: starting revision', 'level': 'info', 'logger': 'core.langgraph.nodes.revision_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.revision_node] - info - revise_chapter: calling LLM for revision - (chapter=1 model=test-revision-model iteration=1 max_tokens=16384 _record=<LogRecord: core.langgraph.nodes.revision_node, 20, /home/user/saga/core/langgraph/nodes/revision_node.py, 138, "{'chapter': 1, 'model': 'test-revision-model', 'iteration': 1, 'max_tokens': 16384, 'event': 'revise_chapter: calling LLM for revision', 'level': 'info', 'logger': 'core.langgraph.nodes.revision_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.revision_node] - info - revise_chapter: revision complete - (chapter=1 iteration=1 word_count=69 tokens_used=950 _record=<LogRecord: core.langgraph.nodes.revision_node, 20, /home/user/saga/core/langgraph/nodes/revision_node.py, 176, "{'chapter': 1, 'iteration': 1, 'word_count': 69, 'tokens_used': 950, 'event': 'revise_chapter: revision complete', 'level': 'info', 'logger': 'core.langgraph.nodes.revision_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.revision_node] - info - revise_chapter: starting revision - (chapter=1 iteration=3 contradictions=2 _record=<LogRecord: core.langgraph.nodes.revision_node, 20, /home/user/saga/core/langgraph/nodes/revision_node.py, 54, "{'chapter': 1, 'iteration': 3, 'contradictions': 2, 'event': 'revise_chapter: starting revision', 'level': 'info', 'logger': 'core.langgraph.nodes.revision_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.revision_node] - warning - revise_chapter: max iterations reached - (iteration_count=3 max_iterations=3 _record=<LogRecord: core.langgraph.nodes.revision_node, 30, /home/user/saga/core/langgraph/nodes/revision_node.py, 66, "{'iteration_count': 3, 'max_iterations': 3, 'event': 'revise_chapter: max iterations reached', 'level': 'warning', 'logger': 'core.langgraph.nodes.revision_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.revision_node] - info - revise_chapter: starting revision - (chapter=1 iteration=0 contradictions=2 _record=<LogRecord: core.langgraph.nodes.revision_node, 20, /home/user/saga/core/langgraph/nodes/revision_node.py, 54, "{'chapter': 1, 'iteration': 0, 'contradictions': 2, 'event': 'revise_chapter: starting revision', 'level': 'info', 'logger': 'core.langgraph.nodes.revision_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.revision_node] - error - revise_chapter: no draft text to revise - (_record=<LogRecord: core.langgraph.nodes.revision_node, 40, /home/user/saga/core/langgraph/nodes/revision_node.py, 80, "{'event': 'revise_chapter: no draft text to revise', 'level': 'error', 'logger': 'core.langgraph.nodes.revision_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.revision_node] - info - revise_chapter: starting revision - (chapter=1 iteration=0 contradictions=2 _record=<LogRecord: core.langgraph.nodes.revision_node, 20, /home/user/saga/core/langgraph/nodes/revision_node.py, 54, "{'chapter': 1, 'iteration': 0, 'contradictions': 2, 'event': 'revise_chapter: starting revision', 'level': 'info', 'logger': 'core.langgraph.nodes.revision_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.revision_node] - info - revise_chapter: calling LLM for revision - (chapter=1 model=test-revision-model iteration=1 max_tokens=16384 _record=<LogRecord: core.langgraph.nodes.revision_node, 20, /home/user/saga/core/langgraph/nodes/revision_node.py, 138, "{'chapter': 1, 'model': 'test-revision-model', 'iteration': 1, 'max_tokens': 16384, 'event': 'revise_chapter: calling LLM for revision', 'level': 'info', 'logger': 'core.langgraph.nodes.revision_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.revision_node] - error - revise_chapter: LLM returned empty text - (chapter=1 _record=<LogRecord: core.langgraph.nodes.revision_node, 40, /home/user/saga/core/langgraph/nodes/revision_node.py, 163, "{'chapter': 1, 'event': 'revise_chapter: LLM returned empty text', 'level': 'error', 'logger': 'core.langgraph.nodes.revision_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.revision_node] - info - revise_chapter: starting revision - (chapter=1 iteration=0 contradictions=2 _record=<LogRecord: core.langgraph.nodes.revision_node, 20, /home/user/saga/core/langgraph/nodes/revision_node.py, 54, "{'chapter': 1, 'iteration': 0, 'contradictions': 2, 'event': 'revise_chapter: starting revision', 'level': 'info', 'logger': 'core.langgraph.nodes.revision_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.revision_node] - info - revise_chapter: calling LLM for revision - (chapter=1 model=test-revision-model iteration=1 max_tokens=16384 _record=<LogRecord: core.langgraph.nodes.revision_node, 20, /home/user/saga/core/langgraph/nodes/revision_node.py, 138, "{'chapter': 1, 'model': 'test-revision-model', 'iteration': 1, 'max_tokens': 16384, 'event': 'revise_chapter: calling LLM for revision', 'level': 'info', 'logger': 'core.langgraph.nodes.revision_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.revision_node] - error - revise_chapter: exception during revision - (chapter=1 error=LLM service unavailable exc_info=True _record=<LogRecord: core.langgraph.nodes.revision_node, 40, /home/user/saga/core/langgraph/nodes/revision_node.py, 197, "{'chapter': 1, 'error': 'LLM service unavailable', 'exc_info': True, 'event': 'revise_chapter: exception during revision', 'level': 'error', 'logger': 'core.langgraph.nodes.revision_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.revision_node] - info - revise_chapter: starting revision - (chapter=1 iteration=0 contradictions=2 _record=<LogRecord: core.langgraph.nodes.revision_node, 20, /home/user/saga/core/langgraph/nodes/revision_node.py, 54, "{'chapter': 1, 'iteration': 0, 'contradictions': 2, 'event': 'revise_chapter: starting revision', 'level': 'info', 'logger': 'core.langgraph.nodes.revision_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.revision_node] - error - revise_chapter: token budget exceeded - (error=Insufficient token space for revision. Prompt tokens: 150000, available: -109240 _record=<LogRecord: core.langgraph.nodes.revision_node, 40, /home/user/saga/core/langgraph/nodes/revision_node.py, 130, "{'error': 'Insufficient token space for revision. Prompt tokens: 150000, available: -109240', 'event': 'revise_chapter: token budget exceeded', 'level': 'error', 'logger': 'core.langgraph.nodes.revision_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.revision_node] - info - revise_chapter: starting revision - (chapter=1 iteration=0 contradictions=2 _record=<LogRecord: core.langgraph.nodes.revision_node, 20, /home/user/saga/core/langgraph/nodes/revision_node.py, 54, "{'chapter': 1, 'iteration': 0, 'contradictions': 2, 'event': 'revise_chapter: starting revision', 'level': 'info', 'logger': 'core.langgraph.nodes.revision_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.revision_node] - info - revise_chapter: calling LLM for revision - (chapter=1 model=test-revision-model iteration=1 max_tokens=16384 _record=<LogRecord: core.langgraph.nodes.revision_node, 20, /home/user/saga/core/langgraph/nodes/revision_node.py, 138, "{'chapter': 1, 'model': 'test-revision-model', 'iteration': 1, 'max_tokens': 16384, 'event': 'revise_chapter: calling LLM for revision', 'level': 'info', 'logger': 'core.langgraph.nodes.revision_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.revision_node] - info - revise_chapter: revision complete - (chapter=1 iteration=1 word_count=69 tokens_used=950 _record=<LogRecord: core.langgraph.nodes.revision_node, 20, /home/user/saga/core/langgraph/nodes/revision_node.py, 176, "{'chapter': 1, 'iteration': 1, 'word_count': 69, 'tokens_used': 950, 'event': 'revise_chapter: revision complete', 'level': 'info', 'logger': 'core.langgraph.nodes.revision_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.revision_node] - info - revise_chapter: starting revision - (chapter=1 iteration=0 contradictions=2 _record=<LogRecord: core.langgraph.nodes.revision_node, 20, /home/user/saga/core/langgraph/nodes/revision_node.py, 54, "{'chapter': 1, 'iteration': 0, 'contradictions': 2, 'event': 'revise_chapter: starting revision', 'level': 'info', 'logger': 'core.langgraph.nodes.revision_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.revision_node] - info - revise_chapter: calling LLM for revision - (chapter=1 model=test-revision-model iteration=1 max_tokens=16384 _record=<LogRecord: core.langgraph.nodes.revision_node, 20, /home/user/saga/core/langgraph/nodes/revision_node.py, 138, "{'chapter': 1, 'model': 'test-revision-model', 'iteration': 1, 'max_tokens': 16384, 'event': 'revise_chapter: calling LLM for revision', 'level': 'info', 'logger': 'core.langgraph.nodes.revision_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.revision_node] - info - revise_chapter: revision complete - (chapter=1 iteration=1 word_count=69 tokens_used=950 _record=<LogRecord: core.langgraph.nodes.revision_node, 20, /home/user/saga/core/langgraph/nodes/revision_node.py, 176, "{'chapter': 1, 'iteration': 1, 'word_count': 69, 'tokens_used': 950, 'event': 'revise_chapter: revision complete', 'level': 'info', 'logger': 'core.langgraph.nodes.revision_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.revision_node] - info - revise_chapter: starting revision - (chapter=1 iteration=1 contradictions=2 _record=<LogRecord: core.langgraph.nodes.revision_node, 20, /home/user/saga/core/langgraph/nodes/revision_node.py, 54, "{'chapter': 1, 'iteration': 1, 'contradictions': 2, 'event': 'revise_chapter: starting revision', 'level': 'info', 'logger': 'core.langgraph.nodes.revision_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.revision_node] - info - revise_chapter: calling LLM for revision - (chapter=1 model=test-revision-model iteration=2 max_tokens=16384 _record=<LogRecord: core.langgraph.nodes.revision_node, 20, /home/user/saga/core/langgraph/nodes/revision_node.py, 138, "{'chapter': 1, 'model': 'test-revision-model', 'iteration': 2, 'max_tokens': 16384, 'event': 'revise_chapter: calling LLM for revision', 'level': 'info', 'logger': 'core.langgraph.nodes.revision_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.revision_node] - info - revise_chapter: revision complete - (chapter=1 iteration=2 word_count=69 tokens_used=950 _record=<LogRecord: core.langgraph.nodes.revision_node, 20, /home/user/saga/core/langgraph/nodes/revision_node.py, 176, "{'chapter': 1, 'iteration': 2, 'word_count': 69, 'tokens_used': 950, 'event': 'revise_chapter: revision complete', 'level': 'info', 'logger': 'core.langgraph.nodes.revision_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.revision_node] - info - revise_chapter: starting revision - (chapter=1 iteration=0 contradictions=2 _record=<LogRecord: core.langgraph.nodes.revision_node, 20, /home/user/saga/core/langgraph/nodes/revision_node.py, 54, "{'chapter': 1, 'iteration': 0, 'contradictions': 2, 'event': 'revise_chapter: starting revision', 'level': 'info', 'logger': 'core.langgraph.nodes.revision_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.revision_node] - info - revise_chapter: calling LLM for revision - (chapter=1 model=test-revision-model iteration=1 max_tokens=16384 _record=<LogRecord: core.langgraph.nodes.revision_node, 20, /home/user/saga/core/langgraph/nodes/revision_node.py, 138, "{'chapter': 1, 'model': 'test-revision-model', 'iteration': 1, 'max_tokens': 16384, 'event': 'revise_chapter: calling LLM for revision', 'level': 'info', 'logger': 'core.langgraph.nodes.revision_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.revision_node] - info - revise_chapter: revision complete - (chapter=1 iteration=1 word_count=69 tokens_used=950 _record=<LogRecord: core.langgraph.nodes.revision_node, 20, /home/user/saga/core/langgraph/nodes/revision_node.py, 176, "{'chapter': 1, 'iteration': 1, 'word_count': 69, 'tokens_used': 950, 'event': 'revise_chapter: revision complete', 'level': 'info', 'logger': 'core.langgraph.nodes.revision_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.revision_node] - info - revise_chapter: starting revision - (chapter=1 iteration=0 contradictions=2 _record=<LogRecord: core.langgraph.nodes.revision_node, 20, /home/user/saga/core/langgraph/nodes/revision_node.py, 54, "{'chapter': 1, 'iteration': 0, 'contradictions': 2, 'event': 'revise_chapter: starting revision', 'level': 'info', 'logger': 'core.langgraph.nodes.revision_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.revision_node] - info - revise_chapter: calling LLM for revision - (chapter=1 model=test-revision-model iteration=1 max_tokens=16384 _record=<LogRecord: core.langgraph.nodes.revision_node, 20, /home/user/saga/core/langgraph/nodes/revision_node.py, 138, "{'chapter': 1, 'model': 'test-revision-model', 'iteration': 1, 'max_tokens': 16384, 'event': 'revise_chapter: calling LLM for revision', 'level': 'info', 'logger': 'core.langgraph.nodes.revision_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.revision_node] - info - revise_chapter: revision complete - (chapter=1 iteration=1 word_count=10 tokens_used=0 _record=<LogRecord: core.langgraph.nodes.revision_node, 20, /home/user/saga/core/langgraph/nodes/revision_node.py, 176, "{'chapter': 1, 'iteration': 1, 'word_count': 10, 'tokens_used': 0, 'event': 'revise_chapter: revision complete', 'level': 'info', 'logger': 'core.langgraph.nodes.revision_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.revision_node] - info - revise_chapter: starting revision - (chapter=1 iteration=0 contradictions=2 _record=<LogRecord: core.langgraph.nodes.revision_node, 20, /home/user/saga/core/langgraph/nodes/revision_node.py, 54, "{'chapter': 1, 'iteration': 0, 'contradictions': 2, 'event': 'revise_chapter: starting revision', 'level': 'info', 'logger': 'core.langgraph.nodes.revision_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.revision_node] - warning - revise_chapter: failed to fetch KG facts - (error=KG query failed _record=<LogRecord: core.langgraph.nodes.revision_node, 30, /home/user/saga/core/langgraph/nodes/revision_node.py, 268, "{'error': 'KG query failed', 'event': 'revise_chapter: failed to fetch KG facts', 'level': 'warning', 'logger': 'core.langgraph.nodes.revision_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.revision_node] - info - revise_chapter: calling LLM for revision - (chapter=1 model=test-revision-model iteration=1 max_tokens=16384 _record=<LogRecord: core.langgraph.nodes.revision_node, 20, /home/user/saga/core/langgraph/nodes/revision_node.py, 138, "{'chapter': 1, 'model': 'test-revision-model', 'iteration': 1, 'max_tokens': 16384, 'event': 'revise_chapter: calling LLM for revision', 'level': 'info', 'logger': 'core.langgraph.nodes.revision_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.revision_node] - info - revise_chapter: revision complete - (chapter=1 iteration=1 word_count=69 tokens_used=950 _record=<LogRecord: core.langgraph.nodes.revision_node, 20, /home/user/saga/core/langgraph/nodes/revision_node.py, 176, "{'chapter': 1, 'iteration': 1, 'word_count': 69, 'tokens_used': 950, 'event': 'revise_chapter: revision complete', 'level': 'info', 'logger': 'core.langgraph.nodes.revision_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.revision_node] - info - revise_chapter: starting revision - (chapter=1 iteration=0 contradictions=2 _record=<LogRecord: core.langgraph.nodes.revision_node, 20, /home/user/saga/core/langgraph/nodes/revision_node.py, 54, "{'chapter': 1, 'iteration': 0, 'contradictions': 2, 'event': 'revise_chapter: starting revision', 'level': 'info', 'logger': 'core.langgraph.nodes.revision_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.revision_node] - info - revise_chapter: calling LLM for revision - (chapter=1 model=test-revision-model iteration=1 max_tokens=16384 _record=<LogRecord: core.langgraph.nodes.revision_node, 20, /home/user/saga/core/langgraph/nodes/revision_node.py, 138, "{'chapter': 1, 'model': 'test-revision-model', 'iteration': 1, 'max_tokens': 16384, 'event': 'revise_chapter: calling LLM for revision', 'level': 'info', 'logger': 'core.langgraph.nodes.revision_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.revision_node] - info - revise_chapter: revision complete - (chapter=1 iteration=1 word_count=69 tokens_used=950 _record=<LogRecord: core.langgraph.nodes.revision_node, 20, /home/user/saga/core/langgraph/nodes/revision_node.py, 176, "{'chapter': 1, 'iteration': 1, 'word_count': 69, 'tokens_used': 950, 'event': 'revise_chapter: revision complete', 'level': 'info', 'logger': 'core.langgraph.nodes.revision_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.revision_node] - info - revise_chapter: starting revision - (chapter=1 iteration=0 contradictions=2 _record=<LogRecord: core.langgraph.nodes.revision_node, 20, /home/user/saga/core/langgraph/nodes/revision_node.py, 54, "{'chapter': 1, 'iteration': 0, 'contradictions': 2, 'event': 'revise_chapter: starting revision', 'level': 'info', 'logger': 'core.langgraph.nodes.revision_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.revision_node] - info - revise_chapter: calling LLM for revision - (chapter=1 model=test-revision-model iteration=1 max_tokens=16384 _record=<LogRecord: core.langgraph.nodes.revision_node, 20, /home/user/saga/core/langgraph/nodes/revision_node.py, 138, "{'chapter': 1, 'model': 'test-revision-model', 'iteration': 1, 'max_tokens': 16384, 'event': 'revise_chapter: calling LLM for revision', 'level': 'info', 'logger': 'core.langgraph.nodes.revision_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.revision_node] - info - revise_chapter: revision complete - (chapter=1 iteration=1 word_count=69 tokens_used=950 _record=<LogRecord: core.langgraph.nodes.revision_node, 20, /home/user/saga/core/langgraph/nodes/revision_node.py, 176, "{'chapter': 1, 'iteration': 1, 'word_count': 69, 'tokens_used': 950, 'event': 'revise_chapter: revision complete', 'level': 'info', 'logger': 'core.langgraph.nodes.revision_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.revision_node] - info - revise_chapter: starting revision - (chapter=1 iteration=1 contradictions=1 _record=<LogRecord: core.langgraph.nodes.revision_node, 20, /home/user/saga/core/langgraph/nodes/revision_node.py, 54, "{'chapter': 1, 'iteration': 1, 'contradictions': 1, 'event': 'revise_chapter: starting revision', 'level': 'info', 'logger': 'core.langgraph.nodes.revision_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.revision_node] - info - revise_chapter: calling LLM for revision - (chapter=1 model=test-revision-model iteration=2 max_tokens=16384 _record=<LogRecord: core.langgraph.nodes.revision_node, 20, /home/user/saga/core/langgraph/nodes/revision_node.py, 138, "{'chapter': 1, 'model': 'test-revision-model', 'iteration': 2, 'max_tokens': 16384, 'event': 'revise_chapter: calling LLM for revision', 'level': 'info', 'logger': 'core.langgraph.nodes.revision_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.revision_node] - info - revise_chapter: revision complete - (chapter=1 iteration=2 word_count=69 tokens_used=950 _record=<LogRecord: core.langgraph.nodes.revision_node, 20, /home/user/saga/core/langgraph/nodes/revision_node.py, 176, "{'chapter': 1, 'iteration': 2, 'word_count': 69, 'tokens_used': 950, 'event': 'revise_chapter: revision complete', 'level': 'info', 'logger': 'core.langgraph.nodes.revision_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.revision_node] - info - revise_chapter: starting revision - (chapter=1 iteration=2 contradictions=1 _record=<LogRecord: core.langgraph.nodes.revision_node, 20, /home/user/saga/core/langgraph/nodes/revision_node.py, 54, "{'chapter': 1, 'iteration': 2, 'contradictions': 1, 'event': 'revise_chapter: starting revision', 'level': 'info', 'logger': 'core.langgraph.nodes.revision_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.revision_node] - info - revise_chapter: calling LLM for revision - (chapter=1 model=test-revision-model iteration=3 max_tokens=16384 _record=<LogRecord: core.langgraph.nodes.revision_node, 20, /home/user/saga/core/langgraph/nodes/revision_node.py, 138, "{'chapter': 1, 'model': 'test-revision-model', 'iteration': 3, 'max_tokens': 16384, 'event': 'revise_chapter: calling LLM for revision', 'level': 'info', 'logger': 'core.langgraph.nodes.revision_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.revision_node] - info - revise_chapter: revision complete - (chapter=1 iteration=3 word_count=69 tokens_used=950 _record=<LogRecord: core.langgraph.nodes.revision_node, 20, /home/user/saga/core/langgraph/nodes/revision_node.py, 176, "{'chapter': 1, 'iteration': 3, 'word_count': 69, 'tokens_used': 950, 'event': 'revise_chapter: revision complete', 'level': 'info', 'logger': 'core.langgraph.nodes.revision_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.revision_node] - info - revise_chapter: starting revision - (chapter=1 iteration=3 contradictions=1 _record=<LogRecord: core.langgraph.nodes.revision_node, 20, /home/user/saga/core/langgraph/nodes/revision_node.py, 54, "{'chapter': 1, 'iteration': 3, 'contradictions': 1, 'event': 'revise_chapter: starting revision', 'level': 'info', 'logger': 'core.langgraph.nodes.revision_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.revision_node] - warning - revise_chapter: max iterations reached - (iteration_count=3 max_iterations=3 _record=<LogRecord: core.langgraph.nodes.revision_node, 30, /home/user/saga/core/langgraph/nodes/revision_node.py, 66, "{'iteration_count': 3, 'max_iterations': 3, 'event': 'revise_chapter: max iterations reached', 'level': 'warning', 'logger': 'core.langgraph.nodes.revision_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.revision_node] - info - revise_chapter: starting revision - (chapter=1 iteration=0 contradictions=0 _record=<LogRecord: core.langgraph.nodes.revision_node, 20, /home/user/saga/core/langgraph/nodes/revision_node.py, 54, "{'chapter': 1, 'iteration': 0, 'contradictions': 0, 'event': 'revise_chapter: starting revision', 'level': 'info', 'logger': 'core.langgraph.nodes.revision_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.revision_node] - info - revise_chapter: calling LLM for revision - (chapter=1 model=test-revision-model iteration=1 max_tokens=16384 _record=<LogRecord: core.langgraph.nodes.revision_node, 20, /home/user/saga/core/langgraph/nodes/revision_node.py, 138, "{'chapter': 1, 'model': 'test-revision-model', 'iteration': 1, 'max_tokens': 16384, 'event': 'revise_chapter: calling LLM for revision', 'level': 'info', 'logger': 'core.langgraph.nodes.revision_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.revision_node] - info - revise_chapter: revision complete - (chapter=1 iteration=1 word_count=69 tokens_used=950 _record=<LogRecord: core.langgraph.nodes.revision_node, 20, /home/user/saga/core/langgraph/nodes/revision_node.py, 176, "{'chapter': 1, 'iteration': 1, 'word_count': 69, 'tokens_used': 950, 'event': 'revise_chapter: revision complete', 'level': 'info', 'logger': 'core.langgraph.nodes.revision_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.summary_node] - info - summarize_chapter: starting summarization - (chapter=1 _record=<LogRecord: core.langgraph.nodes.summary_node, 20, /home/user/saga/core/langgraph/nodes/summary_node.py, 51, "{'chapter': 1, 'event': 'summarize_chapter: starting summarization', 'level': 'info', 'logger': 'core.langgraph.nodes.summary_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.summary_node] - info - summarize_chapter: calling LLM for summary - (chapter=1 model=test-extraction-model _record=<LogRecord: core.langgraph.nodes.summary_node, 20, /home/user/saga/core/langgraph/nodes/summary_node.py, 74, "{'chapter': 1, 'model': 'test-extraction-model', 'event': 'summarize_chapter: calling LLM for summary', 'level': 'info', 'logger': 'core.langgraph.nodes.summary_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.summary_node] - info - summarize_chapter: summary generated - (chapter=1 summary_length=122 _record=<LogRecord: core.langgraph.nodes.summary_node, 20, /home/user/saga/core/langgraph/nodes/summary_node.py, 115, "{'chapter': 1, 'summary_length': 122, 'event': 'summarize_chapter: summary generated', 'level': 'info', 'logger': 'core.langgraph.nodes.summary_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.summary_node] - info - summarize_chapter: summary saved to Neo4j - (chapter=1 _record=<LogRecord: core.langgraph.nodes.summary_node, 20, /home/user/saga/core/langgraph/nodes/summary_node.py, 232, "{'chapter': 1, 'event': 'summarize_chapter: summary saved to Neo4j', 'level': 'info', 'logger': 'core.langgraph.nodes.summary_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.summary_node] - info - summarize_chapter: complete - (chapter=1 total_summaries_in_state=1 _record=<LogRecord: core.langgraph.nodes.summary_node, 20, /home/user/saga/core/langgraph/nodes/summary_node.py, 132, "{'chapter': 1, 'total_summaries_in_state': 1, 'event': 'summarize_chapter: complete', 'level': 'info', 'logger': 'core.langgraph.nodes.summary_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.summary_node] - info - summarize_chapter: starting summarization - (chapter=1 _record=<LogRecord: core.langgraph.nodes.summary_node, 20, /home/user/saga/core/langgraph/nodes/summary_node.py, 51, "{'chapter': 1, 'event': 'summarize_chapter: starting summarization', 'level': 'info', 'logger': 'core.langgraph.nodes.summary_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.summary_node] - warning - summarize_chapter: no draft text to summarize - (_record=<LogRecord: core.langgraph.nodes.summary_node, 30, /home/user/saga/core/langgraph/nodes/summary_node.py, 58, "{'event': 'summarize_chapter: no draft text to summarize', 'level': 'warning', 'logger': 'core.langgraph.nodes.summary_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.summary_node] - info - summarize_chapter: starting summarization - (chapter=1 _record=<LogRecord: core.langgraph.nodes.summary_node, 20, /home/user/saga/core/langgraph/nodes/summary_node.py, 51, "{'chapter': 1, 'event': 'summarize_chapter: starting summarization', 'level': 'info', 'logger': 'core.langgraph.nodes.summary_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.summary_node] - info - summarize_chapter: calling LLM for summary - (chapter=1 model=test-extraction-model _record=<LogRecord: core.langgraph.nodes.summary_node, 20, /home/user/saga/core/langgraph/nodes/summary_node.py, 74, "{'chapter': 1, 'model': 'test-extraction-model', 'event': 'summarize_chapter: calling LLM for summary', 'level': 'info', 'logger': 'core.langgraph.nodes.summary_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.summary_node] - error - summarize_chapter: LLM returned empty summary - (chapter=1 _record=<LogRecord: core.langgraph.nodes.summary_node, 40, /home/user/saga/core/langgraph/nodes/summary_node.py, 93, "{'chapter': 1, 'event': 'summarize_chapter: LLM returned empty summary', 'level': 'error', 'logger': 'core.langgraph.nodes.summary_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.summary_node] - info - summarize_chapter: starting summarization - (chapter=1 _record=<LogRecord: core.langgraph.nodes.summary_node, 20, /home/user/saga/core/langgraph/nodes/summary_node.py, 51, "{'chapter': 1, 'event': 'summarize_chapter: starting summarization', 'level': 'info', 'logger': 'core.langgraph.nodes.summary_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.summary_node] - info - summarize_chapter: calling LLM for summary - (chapter=1 model=test-extraction-model _record=<LogRecord: core.langgraph.nodes.summary_node, 20, /home/user/saga/core/langgraph/nodes/summary_node.py, 74, "{'chapter': 1, 'model': 'test-extraction-model', 'event': 'summarize_chapter: calling LLM for summary', 'level': 'info', 'logger': 'core.langgraph.nodes.summary_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.summary_node] - error - summarize_chapter: exception during summarization - (chapter=1 error=LLM service unavailable exc_info=True _record=<LogRecord: core.langgraph.nodes.summary_node, 40, /home/user/saga/core/langgraph/nodes/summary_node.py, 145, "{'chapter': 1, 'error': 'LLM service unavailable', 'exc_info': True, 'event': 'summarize_chapter: exception during summarization', 'level': 'error', 'logger': 'core.langgraph.nodes.summary_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.summary_node] - info - summarize_chapter: starting summarization - (chapter=1 _record=<LogRecord: core.langgraph.nodes.summary_node, 20, /home/user/saga/core/langgraph/nodes/summary_node.py, 51, "{'chapter': 1, 'event': 'summarize_chapter: starting summarization', 'level': 'info', 'logger': 'core.langgraph.nodes.summary_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.summary_node] - info - summarize_chapter: calling LLM for summary - (chapter=1 model=test-extraction-model _record=<LogRecord: core.langgraph.nodes.summary_node, 20, /home/user/saga/core/langgraph/nodes/summary_node.py, 74, "{'chapter': 1, 'model': 'test-extraction-model', 'event': 'summarize_chapter: calling LLM for summary', 'level': 'info', 'logger': 'core.langgraph.nodes.summary_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.summary_node] - info - summarize_chapter: summary generated - (chapter=1 summary_length=122 _record=<LogRecord: core.langgraph.nodes.summary_node, 20, /home/user/saga/core/langgraph/nodes/summary_node.py, 115, "{'chapter': 1, 'summary_length': 122, 'event': 'summarize_chapter: summary generated', 'level': 'info', 'logger': 'core.langgraph.nodes.summary_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.summary_node] - error - summarize_chapter: failed to save summary to Neo4j - (chapter=1 error=Neo4j unavailable exc_info=True _record=<LogRecord: core.langgraph.nodes.summary_node, 40, /home/user/saga/core/langgraph/nodes/summary_node.py, 237, "{'chapter': 1, 'error': 'Neo4j unavailable', 'exc_info': True, 'event': 'summarize_chapter: failed to save summary to Neo4j', 'level': 'error', 'logger': 'core.langgraph.nodes.summary_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.summary_node] - info - summarize_chapter: complete - (chapter=1 total_summaries_in_state=1 _record=<LogRecord: core.langgraph.nodes.summary_node, 20, /home/user/saga/core/langgraph/nodes/summary_node.py, 132, "{'chapter': 1, 'total_summaries_in_state': 1, 'event': 'summarize_chapter: complete', 'level': 'info', 'logger': 'core.langgraph.nodes.summary_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.summary_node] - info - summarize_chapter: starting summarization - (chapter=5 _record=<LogRecord: core.langgraph.nodes.summary_node, 20, /home/user/saga/core/langgraph/nodes/summary_node.py, 51, "{'chapter': 5, 'event': 'summarize_chapter: starting summarization', 'level': 'info', 'logger': 'core.langgraph.nodes.summary_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.summary_node] - info - summarize_chapter: calling LLM for summary - (chapter=5 model=test-extraction-model _record=<LogRecord: core.langgraph.nodes.summary_node, 20, /home/user/saga/core/langgraph/nodes/summary_node.py, 74, "{'chapter': 5, 'model': 'test-extraction-model', 'event': 'summarize_chapter: calling LLM for summary', 'level': 'info', 'logger': 'core.langgraph.nodes.summary_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.summary_node] - info - summarize_chapter: summary generated - (chapter=5 summary_length=122 _record=<LogRecord: core.langgraph.nodes.summary_node, 20, /home/user/saga/core/langgraph/nodes/summary_node.py, 115, "{'chapter': 5, 'summary_length': 122, 'event': 'summarize_chapter: summary generated', 'level': 'info', 'logger': 'core.langgraph.nodes.summary_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.summary_node] - info - summarize_chapter: summary saved to Neo4j - (chapter=5 _record=<LogRecord: core.langgraph.nodes.summary_node, 20, /home/user/saga/core/langgraph/nodes/summary_node.py, 232, "{'chapter': 5, 'event': 'summarize_chapter: summary saved to Neo4j', 'level': 'info', 'logger': 'core.langgraph.nodes.summary_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.summary_node] - info - summarize_chapter: complete - (chapter=5 total_summaries_in_state=5 _record=<LogRecord: core.langgraph.nodes.summary_node, 20, /home/user/saga/core/langgraph/nodes/summary_node.py, 132, "{'chapter': 5, 'total_summaries_in_state': 5, 'event': 'summarize_chapter: complete', 'level': 'info', 'logger': 'core.langgraph.nodes.summary_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.summary_node] - info - summarize_chapter: starting summarization - (chapter=6 _record=<LogRecord: core.langgraph.nodes.summary_node, 20, /home/user/saga/core/langgraph/nodes/summary_node.py, 51, "{'chapter': 6, 'event': 'summarize_chapter: starting summarization', 'level': 'info', 'logger': 'core.langgraph.nodes.summary_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.summary_node] - info - summarize_chapter: calling LLM for summary - (chapter=6 model=test-extraction-model _record=<LogRecord: core.langgraph.nodes.summary_node, 20, /home/user/saga/core/langgraph/nodes/summary_node.py, 74, "{'chapter': 6, 'model': 'test-extraction-model', 'event': 'summarize_chapter: calling LLM for summary', 'level': 'info', 'logger': 'core.langgraph.nodes.summary_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.summary_node] - info - summarize_chapter: summary generated - (chapter=6 summary_length=122 _record=<LogRecord: core.langgraph.nodes.summary_node, 20, /home/user/saga/core/langgraph/nodes/summary_node.py, 115, "{'chapter': 6, 'summary_length': 122, 'event': 'summarize_chapter: summary generated', 'level': 'info', 'logger': 'core.langgraph.nodes.summary_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.summary_node] - info - summarize_chapter: summary saved to Neo4j - (chapter=6 _record=<LogRecord: core.langgraph.nodes.summary_node, 20, /home/user/saga/core/langgraph/nodes/summary_node.py, 232, "{'chapter': 6, 'event': 'summarize_chapter: summary saved to Neo4j', 'level': 'info', 'logger': 'core.langgraph.nodes.summary_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.summary_node] - info - summarize_chapter: complete - (chapter=6 total_summaries_in_state=5 _record=<LogRecord: core.langgraph.nodes.summary_node, 20, /home/user/saga/core/langgraph/nodes/summary_node.py, 132, "{'chapter': 6, 'total_summaries_in_state': 5, 'event': 'summarize_chapter: complete', 'level': 'info', 'logger': 'core.langgraph.nodes.summary_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.summary_node] - info - summarize_chapter: starting summarization - (chapter=1 _record=<LogRecord: core.langgraph.nodes.summary_node, 20, /home/user/saga/core/langgraph/nodes/summary_node.py, 51, "{'chapter': 1, 'event': 'summarize_chapter: starting summarization', 'level': 'info', 'logger': 'core.langgraph.nodes.summary_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.summary_node] - info - summarize_chapter: calling LLM for summary - (chapter=1 model=test-extraction-model _record=<LogRecord: core.langgraph.nodes.summary_node, 20, /home/user/saga/core/langgraph/nodes/summary_node.py, 74, "{'chapter': 1, 'model': 'test-extraction-model', 'event': 'summarize_chapter: calling LLM for summary', 'level': 'info', 'logger': 'core.langgraph.nodes.summary_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.summary_node] - info - summarize_chapter: summary generated - (chapter=1 summary_length=122 _record=<LogRecord: core.langgraph.nodes.summary_node, 20, /home/user/saga/core/langgraph/nodes/summary_node.py, 115, "{'chapter': 1, 'summary_length': 122, 'event': 'summarize_chapter: summary generated', 'level': 'info', 'logger': 'core.langgraph.nodes.summary_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.summary_node] - info - summarize_chapter: summary saved to Neo4j - (chapter=1 _record=<LogRecord: core.langgraph.nodes.summary_node, 20, /home/user/saga/core/langgraph/nodes/summary_node.py, 232, "{'chapter': 1, 'event': 'summarize_chapter: summary saved to Neo4j', 'level': 'info', 'logger': 'core.langgraph.nodes.summary_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.summary_node] - info - summarize_chapter: complete - (chapter=1 total_summaries_in_state=1 _record=<LogRecord: core.langgraph.nodes.summary_node, 20, /home/user/saga/core/langgraph/nodes/summary_node.py, 132, "{'chapter': 1, 'total_summaries_in_state': 1, 'event': 'summarize_chapter: complete', 'level': 'info', 'logger': 'core.langgraph.nodes.summary_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.summary_node] - info - summarize_chapter: starting summarization - (chapter=1 _record=<LogRecord: core.langgraph.nodes.summary_node, 20, /home/user/saga/core/langgraph/nodes/summary_node.py, 51, "{'chapter': 1, 'event': 'summarize_chapter: starting summarization', 'level': 'info', 'logger': 'core.langgraph.nodes.summary_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.summary_node] - info - summarize_chapter: calling LLM for summary - (chapter=1 model=test-extraction-model _record=<LogRecord: core.langgraph.nodes.summary_node, 20, /home/user/saga/core/langgraph/nodes/summary_node.py, 74, "{'chapter': 1, 'model': 'test-extraction-model', 'event': 'summarize_chapter: calling LLM for summary', 'level': 'info', 'logger': 'core.langgraph.nodes.summary_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.summary_node] - info - summarize_chapter: summary generated - (chapter=1 summary_length=122 _record=<LogRecord: core.langgraph.nodes.summary_node, 20, /home/user/saga/core/langgraph/nodes/summary_node.py, 115, "{'chapter': 1, 'summary_length': 122, 'event': 'summarize_chapter: summary generated', 'level': 'info', 'logger': 'core.langgraph.nodes.summary_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.summary_node] - info - summarize_chapter: summary saved to Neo4j - (chapter=1 _record=<LogRecord: core.langgraph.nodes.summary_node, 20, /home/user/saga/core/langgraph/nodes/summary_node.py, 232, "{'chapter': 1, 'event': 'summarize_chapter: summary saved to Neo4j', 'level': 'info', 'logger': 'core.langgraph.nodes.summary_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.summary_node] - info - summarize_chapter: complete - (chapter=1 total_summaries_in_state=1 _record=<LogRecord: core.langgraph.nodes.summary_node, 20, /home/user/saga/core/langgraph/nodes/summary_node.py, 132, "{'chapter': 1, 'total_summaries_in_state': 1, 'event': 'summarize_chapter: complete', 'level': 'info', 'logger': 'core.langgraph.nodes.summary_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.summary_node] - info - summarize_chapter: starting summarization - (chapter=1 _record=<LogRecord: core.langgraph.nodes.summary_node, 20, /home/user/saga/core/langgraph/nodes/summary_node.py, 51, "{'chapter': 1, 'event': 'summarize_chapter: starting summarization', 'level': 'info', 'logger': 'core.langgraph.nodes.summary_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.summary_node] - info - summarize_chapter: calling LLM for summary - (chapter=1 model=test-extraction-model _record=<LogRecord: core.langgraph.nodes.summary_node, 20, /home/user/saga/core/langgraph/nodes/summary_node.py, 74, "{'chapter': 1, 'model': 'test-extraction-model', 'event': 'summarize_chapter: calling LLM for summary', 'level': 'info', 'logger': 'core.langgraph.nodes.summary_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.summary_node] - info - summarize_chapter: summary generated - (chapter=1 summary_length=122 _record=<LogRecord: core.langgraph.nodes.summary_node, 20, /home/user/saga/core/langgraph/nodes/summary_node.py, 115, "{'chapter': 1, 'summary_length': 122, 'event': 'summarize_chapter: summary generated', 'level': 'info', 'logger': 'core.langgraph.nodes.summary_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.summary_node] - info - summarize_chapter: summary saved to Neo4j - (chapter=1 _record=<LogRecord: core.langgraph.nodes.summary_node, 20, /home/user/saga/core/langgraph/nodes/summary_node.py, 232, "{'chapter': 1, 'event': 'summarize_chapter: summary saved to Neo4j', 'level': 'info', 'logger': 'core.langgraph.nodes.summary_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.summary_node] - info - summarize_chapter: complete - (chapter=1 total_summaries_in_state=1 _record=<LogRecord: core.langgraph.nodes.summary_node, 20, /home/user/saga/core/langgraph/nodes/summary_node.py, 132, "{'chapter': 1, 'total_summaries_in_state': 1, 'event': 'summarize_chapter: complete', 'level': 'info', 'logger': 'core.langgraph.nodes.summary_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.summary_node] - info - summarize_chapter: starting summarization - (chapter=1 _record=<LogRecord: core.langgraph.nodes.summary_node, 20, /home/user/saga/core/langgraph/nodes/summary_node.py, 51, "{'chapter': 1, 'event': 'summarize_chapter: starting summarization', 'level': 'info', 'logger': 'core.langgraph.nodes.summary_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.summary_node] - info - summarize_chapter: calling LLM for summary - (chapter=1 model=test-extraction-model _record=<LogRecord: core.langgraph.nodes.summary_node, 20, /home/user/saga/core/langgraph/nodes/summary_node.py, 74, "{'chapter': 1, 'model': 'test-extraction-model', 'event': 'summarize_chapter: calling LLM for summary', 'level': 'info', 'logger': 'core.langgraph.nodes.summary_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.summary_node] - info - summarize_chapter: summary generated - (chapter=1 summary_length=59 _record=<LogRecord: core.langgraph.nodes.summary_node, 20, /home/user/saga/core/langgraph/nodes/summary_node.py, 115, "{'chapter': 1, 'summary_length': 59, 'event': 'summarize_chapter: summary generated', 'level': 'info', 'logger': 'core.langgraph.nodes.summary_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.summary_node] - info - summarize_chapter: summary saved to Neo4j - (chapter=1 _record=<LogRecord: core.langgraph.nodes.summary_node, 20, /home/user/saga/core/langgraph/nodes/summary_node.py, 232, "{'chapter': 1, 'event': 'summarize_chapter: summary saved to Neo4j', 'level': 'info', 'logger': 'core.langgraph.nodes.summary_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.summary_node] - info - summarize_chapter: complete - (chapter=1 total_summaries_in_state=1 _record=<LogRecord: core.langgraph.nodes.summary_node, 20, /home/user/saga/core/langgraph/nodes/summary_node.py, 132, "{'chapter': 1, 'total_summaries_in_state': 1, 'event': 'summarize_chapter: complete', 'level': 'info', 'logger': 'core.langgraph.nodes.summary_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.summary_node] - info - summarize_chapter: starting summarization - (chapter=1 _record=<LogRecord: core.langgraph.nodes.summary_node, 20, /home/user/saga/core/langgraph/nodes/summary_node.py, 51, "{'chapter': 1, 'event': 'summarize_chapter: starting summarization', 'level': 'info', 'logger': 'core.langgraph.nodes.summary_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.summary_node] - info - summarize_chapter: calling LLM for summary - (chapter=1 model=test-extraction-model _record=<LogRecord: core.langgraph.nodes.summary_node, 20, /home/user/saga/core/langgraph/nodes/summary_node.py, 74, "{'chapter': 1, 'model': 'test-extraction-model', 'event': 'summarize_chapter: calling LLM for summary', 'level': 'info', 'logger': 'core.langgraph.nodes.summary_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.summary_node] - info - summarize_chapter: summary generated - (chapter=1 summary_length=122 _record=<LogRecord: core.langgraph.nodes.summary_node, 20, /home/user/saga/core/langgraph/nodes/summary_node.py, 115, "{'chapter': 1, 'summary_length': 122, 'event': 'summarize_chapter: summary generated', 'level': 'info', 'logger': 'core.langgraph.nodes.summary_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.summary_node] - info - summarize_chapter: summary saved to Neo4j - (chapter=1 _record=<LogRecord: core.langgraph.nodes.summary_node, 20, /home/user/saga/core/langgraph/nodes/summary_node.py, 232, "{'chapter': 1, 'event': 'summarize_chapter: summary saved to Neo4j', 'level': 'info', 'logger': 'core.langgraph.nodes.summary_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.summary_node] - info - summarize_chapter: complete - (chapter=1 total_summaries_in_state=1 _record=<LogRecord: core.langgraph.nodes.summary_node, 20, /home/user/saga/core/langgraph/nodes/summary_node.py, 132, "{'chapter': 1, 'total_summaries_in_state': 1, 'event': 'summarize_chapter: complete', 'level': 'info', 'logger': 'core.langgraph.nodes.summary_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.summary_node] - info - summarize_chapter: starting summarization - (chapter=1 _record=<LogRecord: core.langgraph.nodes.summary_node, 20, /home/user/saga/core/langgraph/nodes/summary_node.py, 51, "{'chapter': 1, 'event': 'summarize_chapter: starting summarization', 'level': 'info', 'logger': 'core.langgraph.nodes.summary_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.summary_node] - info - summarize_chapter: calling LLM for summary - (chapter=1 model=test-extraction-model _record=<LogRecord: core.langgraph.nodes.summary_node, 20, /home/user/saga/core/langgraph/nodes/summary_node.py, 74, "{'chapter': 1, 'model': 'test-extraction-model', 'event': 'summarize_chapter: calling LLM for summary', 'level': 'info', 'logger': 'core.langgraph.nodes.summary_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.summary_node] - info - summarize_chapter: summary generated - (chapter=1 summary_length=122 _record=<LogRecord: core.langgraph.nodes.summary_node, 20, /home/user/saga/core/langgraph/nodes/summary_node.py, 115, "{'chapter': 1, 'summary_length': 122, 'event': 'summarize_chapter: summary generated', 'level': 'info', 'logger': 'core.langgraph.nodes.summary_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.summary_node] - info - summarize_chapter: summary saved to Neo4j - (chapter=1 _record=<LogRecord: core.langgraph.nodes.summary_node, 20, /home/user/saga/core/langgraph/nodes/summary_node.py, 232, "{'chapter': 1, 'event': 'summarize_chapter: summary saved to Neo4j', 'level': 'info', 'logger': 'core.langgraph.nodes.summary_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.summary_node] - info - summarize_chapter: complete - (chapter=1 total_summaries_in_state=1 _record=<LogRecord: core.langgraph.nodes.summary_node, 20, /home/user/saga/core/langgraph/nodes/summary_node.py, 132, "{'chapter': 1, 'total_summaries_in_state': 1, 'event': 'summarize_chapter: complete', 'level': 'info', 'logger': 'core.langgraph.nodes.summary_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.summary_node] - info - summarize_chapter: starting summarization - (chapter=1 _record=<LogRecord: core.langgraph.nodes.summary_node, 20, /home/user/saga/core/langgraph/nodes/summary_node.py, 51, "{'chapter': 1, 'event': 'summarize_chapter: starting summarization', 'level': 'info', 'logger': 'core.langgraph.nodes.summary_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.summary_node] - info - summarize_chapter: calling LLM for summary - (chapter=1 model=test-extraction-model _record=<LogRecord: core.langgraph.nodes.summary_node, 20, /home/user/saga/core/langgraph/nodes/summary_node.py, 74, "{'chapter': 1, 'model': 'test-extraction-model', 'event': 'summarize_chapter: calling LLM for summary', 'level': 'info', 'logger': 'core.langgraph.nodes.summary_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.summary_node] - info - summarize_chapter: summary generated - (chapter=1 summary_length=122 _record=<LogRecord: core.langgraph.nodes.summary_node, 20, /home/user/saga/core/langgraph/nodes/summary_node.py, 115, "{'chapter': 1, 'summary_length': 122, 'event': 'summarize_chapter: summary generated', 'level': 'info', 'logger': 'core.langgraph.nodes.summary_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.summary_node] - info - summarize_chapter: summary saved to Neo4j - (chapter=1 _record=<LogRecord: core.langgraph.nodes.summary_node, 20, /home/user/saga/core/langgraph/nodes/summary_node.py, 232, "{'chapter': 1, 'event': 'summarize_chapter: summary saved to Neo4j', 'level': 'info', 'logger': 'core.langgraph.nodes.summary_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.summary_node] - info - summarize_chapter: complete - (chapter=1 total_summaries_in_state=1 _record=<LogRecord: core.langgraph.nodes.summary_node, 20, /home/user/saga/core/langgraph/nodes/summary_node.py, 132, "{'chapter': 1, 'total_summaries_in_state': 1, 'event': 'summarize_chapter: complete', 'level': 'info', 'logger': 'core.langgraph.nodes.summary_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.summary_node] - info - summarize_chapter: starting summarization - (chapter=2 _record=<LogRecord: core.langgraph.nodes.summary_node, 20, /home/user/saga/core/langgraph/nodes/summary_node.py, 51, "{'chapter': 2, 'event': 'summarize_chapter: starting summarization', 'level': 'info', 'logger': 'core.langgraph.nodes.summary_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.summary_node] - info - summarize_chapter: calling LLM for summary - (chapter=2 model=test-extraction-model _record=<LogRecord: core.langgraph.nodes.summary_node, 20, /home/user/saga/core/langgraph/nodes/summary_node.py, 74, "{'chapter': 2, 'model': 'test-extraction-model', 'event': 'summarize_chapter: calling LLM for summary', 'level': 'info', 'logger': 'core.langgraph.nodes.summary_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.summary_node] - info - summarize_chapter: summary generated - (chapter=2 summary_length=122 _record=<LogRecord: core.langgraph.nodes.summary_node, 20, /home/user/saga/core/langgraph/nodes/summary_node.py, 115, "{'chapter': 2, 'summary_length': 122, 'event': 'summarize_chapter: summary generated', 'level': 'info', 'logger': 'core.langgraph.nodes.summary_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.summary_node] - info - summarize_chapter: summary saved to Neo4j - (chapter=2 _record=<LogRecord: core.langgraph.nodes.summary_node, 20, /home/user/saga/core/langgraph/nodes/summary_node.py, 232, "{'chapter': 2, 'event': 'summarize_chapter: summary saved to Neo4j', 'level': 'info', 'logger': 'core.langgraph.nodes.summary_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.summary_node] - info - summarize_chapter: complete - (chapter=2 total_summaries_in_state=2 _record=<LogRecord: core.langgraph.nodes.summary_node, 20, /home/user/saga/core/langgraph/nodes/summary_node.py, 132, "{'chapter': 2, 'total_summaries_in_state': 2, 'event': 'summarize_chapter: complete', 'level': 'info', 'logger': 'core.langgraph.nodes.summary_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.summary_node] - info - summarize_chapter: starting summarization - (chapter=3 _record=<LogRecord: core.langgraph.nodes.summary_node, 20, /home/user/saga/core/langgraph/nodes/summary_node.py, 51, "{'chapter': 3, 'event': 'summarize_chapter: starting summarization', 'level': 'info', 'logger': 'core.langgraph.nodes.summary_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.summary_node] - info - summarize_chapter: calling LLM for summary - (chapter=3 model=test-extraction-model _record=<LogRecord: core.langgraph.nodes.summary_node, 20, /home/user/saga/core/langgraph/nodes/summary_node.py, 74, "{'chapter': 3, 'model': 'test-extraction-model', 'event': 'summarize_chapter: calling LLM for summary', 'level': 'info', 'logger': 'core.langgraph.nodes.summary_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.summary_node] - info - summarize_chapter: summary generated - (chapter=3 summary_length=122 _record=<LogRecord: core.langgraph.nodes.summary_node, 20, /home/user/saga/core/langgraph/nodes/summary_node.py, 115, "{'chapter': 3, 'summary_length': 122, 'event': 'summarize_chapter: summary generated', 'level': 'info', 'logger': 'core.langgraph.nodes.summary_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.summary_node] - info - summarize_chapter: summary saved to Neo4j - (chapter=3 _record=<LogRecord: core.langgraph.nodes.summary_node, 20, /home/user/saga/core/langgraph/nodes/summary_node.py, 232, "{'chapter': 3, 'event': 'summarize_chapter: summary saved to Neo4j', 'level': 'info', 'logger': 'core.langgraph.nodes.summary_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.summary_node] - info - summarize_chapter: complete - (chapter=3 total_summaries_in_state=3 _record=<LogRecord: core.langgraph.nodes.summary_node, 20, /home/user/saga/core/langgraph/nodes/summary_node.py, 132, "{'chapter': 3, 'total_summaries_in_state': 3, 'event': 'summarize_chapter: complete', 'level': 'info', 'logger': 'core.langgraph.nodes.summary_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.summary_node] - info - summarize_chapter: starting summarization - (chapter=1 _record=<LogRecord: core.langgraph.nodes.summary_node, 20, /home/user/saga/core/langgraph/nodes/summary_node.py, 51, "{'chapter': 1, 'event': 'summarize_chapter: starting summarization', 'level': 'info', 'logger': 'core.langgraph.nodes.summary_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.summary_node] - info - summarize_chapter: calling LLM for summary - (chapter=1 model=test-extraction-model _record=<LogRecord: core.langgraph.nodes.summary_node, 20, /home/user/saga/core/langgraph/nodes/summary_node.py, 74, "{'chapter': 1, 'model': 'test-extraction-model', 'event': 'summarize_chapter: calling LLM for summary', 'level': 'info', 'logger': 'core.langgraph.nodes.summary_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.summary_node] - info - summarize_chapter: summary generated - (chapter=1 summary_length=122 _record=<LogRecord: core.langgraph.nodes.summary_node, 20, /home/user/saga/core/langgraph/nodes/summary_node.py, 115, "{'chapter': 1, 'summary_length': 122, 'event': 'summarize_chapter: summary generated', 'level': 'info', 'logger': 'core.langgraph.nodes.summary_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.summary_node] - info - summarize_chapter: summary saved to Neo4j - (chapter=1 _record=<LogRecord: core.langgraph.nodes.summary_node, 20, /home/user/saga/core/langgraph/nodes/summary_node.py, 232, "{'chapter': 1, 'event': 'summarize_chapter: summary saved to Neo4j', 'level': 'info', 'logger': 'core.langgraph.nodes.summary_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.summary_node] - info - summarize_chapter: complete - (chapter=1 total_summaries_in_state=1 _record=<LogRecord: core.langgraph.nodes.summary_node, 20, /home/user/saga/core/langgraph/nodes/summary_node.py, 132, "{'chapter': 1, 'total_summaries_in_state': 1, 'event': 'summarize_chapter: complete', 'level': 'info', 'logger': 'core.langgraph.nodes.summary_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.validation_node] - info - validate_consistency - (chapter=1 relationships=1 characters=2 _record=<LogRecord: core.langgraph.nodes.validation_node, 20, /home/user/saga/core/langgraph/nodes/validation_node.py, 52, "{'chapter': 1, 'relationships': 1, 'characters': 2, 'event': 'validate_consistency', 'level': 'info', 'logger': 'core.langgraph.nodes.validation_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.validation_node] - info - validate_consistency: validation complete - (total_issues=0 critical=0 major=0 minor=0 needs_revision=False _record=<LogRecord: core.langgraph.nodes.validation_node, 20, /home/user/saga/core/langgraph/nodes/validation_node.py, 103, "{'total_issues': 0, 'critical': 0, 'major': 0, 'minor': 0, 'needs_revision': False, 'event': 'validate_consistency: validation complete', 'level': 'info', 'logger': 'core.langgraph.nodes.validation_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.validation_node] - info - validate_consistency - (chapter=1 relationships=1 characters=2 _record=<LogRecord: core.langgraph.nodes.validation_node, 20, /home/user/saga/core/langgraph/nodes/validation_node.py, 52, "{'chapter': 1, 'relationships': 1, 'characters': 2, 'event': 'validate_consistency', 'level': 'info', 'logger': 'core.langgraph.nodes.validation_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.validation_node] - info - validate_consistency: validation complete - (total_issues=1 critical=0 major=0 minor=1 needs_revision=False _record=<LogRecord: core.langgraph.nodes.validation_node, 20, /home/user/saga/core/langgraph/nodes/validation_node.py, 103, "{'total_issues': 1, 'critical': 0, 'major': 0, 'minor': 1, 'needs_revision': False, 'event': 'validate_consistency: validation complete', 'level': 'info', 'logger': 'core.langgraph.nodes.validation_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.validation_node] - info - validate_consistency - (chapter=1 relationships=0 characters=0 _record=<LogRecord: core.langgraph.nodes.validation_node, 20, /home/user/saga/core/langgraph/nodes/validation_node.py, 52, "{'chapter': 1, 'relationships': 0, 'characters': 0, 'event': 'validate_consistency', 'level': 'info', 'logger': 'core.langgraph.nodes.validation_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.validation_node] - info - validate_consistency: validation complete - (total_issues=1 critical=0 major=1 minor=0 needs_revision=False _record=<LogRecord: core.langgraph.nodes.validation_node, 20, /home/user/saga/core/langgraph/nodes/validation_node.py, 103, "{'total_issues': 1, 'critical': 0, 'major': 1, 'minor': 0, 'needs_revision': False, 'event': 'validate_consistency: validation complete', 'level': 'info', 'logger': 'core.langgraph.nodes.validation_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.validation_node] - info - validate_consistency - (chapter=1 relationships=3 characters=2 _record=<LogRecord: core.langgraph.nodes.validation_node, 20, /home/user/saga/core/langgraph/nodes/validation_node.py, 52, "{'chapter': 1, 'relationships': 3, 'characters': 2, 'event': 'validate_consistency', 'level': 'info', 'logger': 'core.langgraph.nodes.validation_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.validation_node] - info - validate_consistency: validation complete - (total_issues=3 critical=0 major=3 minor=0 needs_revision=True _record=<LogRecord: core.langgraph.nodes.validation_node, 20, /home/user/saga/core/langgraph/nodes/validation_node.py, 103, "{'total_issues': 3, 'critical': 0, 'major': 3, 'minor': 0, 'needs_revision': True, 'event': 'validate_consistency: validation complete', 'level': 'info', 'logger': 'core.langgraph.nodes.validation_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.validation_node] - info - validate_consistency - (chapter=1 relationships=1 characters=2 _record=<LogRecord: core.langgraph.nodes.validation_node, 20, /home/user/saga/core/langgraph/nodes/validation_node.py, 52, "{'chapter': 1, 'relationships': 1, 'characters': 2, 'event': 'validate_consistency', 'level': 'info', 'logger': 'core.langgraph.nodes.validation_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.validation_node] - info - validate_consistency: validation complete - (total_issues=1 critical=0 major=1 minor=0 needs_revision=False _record=<LogRecord: core.langgraph.nodes.validation_node, 20, /home/user/saga/core/langgraph/nodes/validation_node.py, 103, "{'total_issues': 1, 'critical': 0, 'major': 1, 'minor': 0, 'needs_revision': False, 'event': 'validate_consistency: validation complete', 'level': 'info', 'logger': 'core.langgraph.nodes.validation_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.validation_node] - error - _validate_relationships: error during validation - (error=Validation error exc_info=True _record=<LogRecord: core.langgraph.nodes.validation_node, 40, /home/user/saga/core/langgraph/nodes/validation_node.py, 204, "{'error': 'Validation error', 'exc_info': True, 'event': '_validate_relationships: error during validation', 'level': 'error', 'logger': 'core.langgraph.nodes.validation_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.workflow] - info - create_phase1_graph: building workflow graph - (_record=<LogRecord: core.langgraph.workflow, 20, /home/user/saga/core/langgraph/workflow.py, 127, "{'event': 'create_phase1_graph: building workflow graph', 'level': 'info', 'logger': 'core.langgraph.workflow', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.workflow] - info - create_phase1_graph: graph built successfully - (nodes=['extract', 'commit', 'validate', 'revise'] entry_point=extract _record=<LogRecord: core.langgraph.workflow, 20, /home/user/saga/core/langgraph/workflow.py, 180, "{'nodes': ['extract', 'commit', 'validate', 'revise'], 'entry_point': 'extract', 'event': 'create_phase1_graph: graph built successfully', 'level': 'info', 'logger': 'core.langgraph.workflow', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.workflow] - info - create_phase1_graph: compiling without checkpointing - (_record=<LogRecord: core.langgraph.workflow, 20, /home/user/saga/core/langgraph/workflow.py, 191, "{'event': 'create_phase1_graph: compiling without checkpointing', 'level': 'info', 'logger': 'core.langgraph.workflow', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.extraction_node] - info - extract_entities - (chapter=1 word_count=30 _record=<LogRecord: core.langgraph.nodes.extraction_node, 20, /home/user/saga/core/langgraph/nodes/extraction_node.py, 63, "{'chapter': 1, 'word_count': 30, 'event': 'extract_entities', 'level': 'info', 'logger': 'core.langgraph.nodes.extraction_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.extraction_node] - info - extract_entities: extraction complete - (characters=2 world_items=0 relationships=0 _record=<LogRecord: core.langgraph.nodes.extraction_node, 20, /home/user/saga/core/langgraph/nodes/extraction_node.py, 111, "{'characters': 2, 'world_items': 0, 'relationships': 0, 'event': 'extract_entities: extraction complete', 'level': 'info', 'logger': 'core.langgraph.nodes.extraction_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.commit_node] - info - commit_to_graph - (chapter=1 characters=2 world_items=0 relationships=0 _record=<LogRecord: core.langgraph.nodes.commit_node, 20, /home/user/saga/core/langgraph/nodes/commit_node.py, 72, "{'chapter': 1, 'characters': 2, 'world_items': 0, 'relationships': 0, 'event': 'commit_to_graph', 'level': 'info', 'logger': 'core.langgraph.nodes.commit_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.commit_node] - warning - commit_to_graph: entity persistence returned failure flag - (chapter=1 _record=<LogRecord: core.langgraph.nodes.commit_node, 30, /home/user/saga/core/langgraph/nodes/commit_node.py, 121, "{'chapter': 1, 'event': 'commit_to_graph: entity persistence returned failure flag', 'level': 'warning', 'logger': 'core.langgraph.nodes.commit_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.commit_node] - info - commit_to_graph: created chapter node - (chapter=1 word_count=30 _record=<LogRecord: core.langgraph.nodes.commit_node, 20, /home/user/saga/core/langgraph/nodes/commit_node.py, 546, "{'chapter': 1, 'word_count': 30, 'event': 'commit_to_graph: created chapter node', 'level': 'info', 'logger': 'core.langgraph.nodes.commit_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.commit_node] - info - commit_to_graph: successfully committed to knowledge graph - (chapter=1 characters=2 world_items=0 relationships=0 _record=<LogRecord: core.langgraph.nodes.commit_node, 20, /home/user/saga/core/langgraph/nodes/commit_node.py, 146, "{'chapter': 1, 'characters': 2, 'world_items': 0, 'relationships': 0, 'event': 'commit_to_graph: successfully committed to knowledge graph', 'level': 'info', 'logger': 'core.langgraph.nodes.commit_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.validation_node] - info - validate_consistency - (chapter=1 relationships=0 characters=2 _record=<LogRecord: core.langgraph.nodes.validation_node, 20, /home/user/saga/core/langgraph/nodes/validation_node.py, 52, "{'chapter': 1, 'relationships': 0, 'characters': 2, 'event': 'validate_consistency', 'level': 'info', 'logger': 'core.langgraph.nodes.validation_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.validation_node] - error - _check_character_traits: error during trait checking - (error=object MagicMock can't be used in 'await' expression exc_info=True _record=<LogRecord: core.langgraph.nodes.validation_node, 40, /home/user/saga/core/langgraph/nodes/validation_node.py, 326, "{'error': "object MagicMock can't be used in 'await' expression", 'exc_info': True, 'event': '_check_character_traits: error during trait checking', 'level': 'error', 'logger': 'core.langgraph.nodes.validation_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.validation_node] - info - validate_consistency: validation complete - (total_issues=1 critical=0 major=1 minor=0 needs_revision=False _record=<LogRecord: core.langgraph.nodes.validation_node, 20, /home/user/saga/core/langgraph/nodes/validation_node.py, 103, "{'total_issues': 1, 'critical': 0, 'major': 1, 'minor': 0, 'needs_revision': False, 'event': 'validate_consistency: validation complete', 'level': 'info', 'logger': 'core.langgraph.nodes.validation_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.workflow] - info - should_revise: routing decision - (needs_revision=False iteration=0 max_iterations=3 force_continue=False _record=<LogRecord: core.langgraph.workflow, 20, /home/user/saga/core/langgraph/workflow.py, 81, "{'needs_revision': False, 'iteration': 0, 'max_iterations': 3, 'force_continue': False, 'event': 'should_revise: routing decision', 'level': 'info', 'logger': 'core.langgraph.workflow', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.workflow] - info - should_revise: no revision needed, ending workflow - (_record=<LogRecord: core.langgraph.workflow, 20, /home/user/saga/core/langgraph/workflow.py, 109, "{'event': 'should_revise: no revision needed, ending workflow', 'level': 'info', 'logger': 'core.langgraph.workflow', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.workflow] - info - create_phase1_graph: building workflow graph - (_record=<LogRecord: core.langgraph.workflow, 20, /home/user/saga/core/langgraph/workflow.py, 127, "{'event': 'create_phase1_graph: building workflow graph', 'level': 'info', 'logger': 'core.langgraph.workflow', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.workflow] - info - create_phase1_graph: graph built successfully - (nodes=['extract', 'commit', 'validate', 'revise'] entry_point=extract _record=<LogRecord: core.langgraph.workflow, 20, /home/user/saga/core/langgraph/workflow.py, 180, "{'nodes': ['extract', 'commit', 'validate', 'revise'], 'entry_point': 'extract', 'event': 'create_phase1_graph: graph built successfully', 'level': 'info', 'logger': 'core.langgraph.workflow', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.workflow] - info - create_phase1_graph: compiling without checkpointing - (_record=<LogRecord: core.langgraph.workflow, 20, /home/user/saga/core/langgraph/workflow.py, 191, "{'event': 'create_phase1_graph: compiling without checkpointing', 'level': 'info', 'logger': 'core.langgraph.workflow', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.extraction_node] - info - extract_entities - (chapter=1 word_count=2 _record=<LogRecord: core.langgraph.nodes.extraction_node, 20, /home/user/saga/core/langgraph/nodes/extraction_node.py, 63, "{'chapter': 1, 'word_count': 2, 'event': 'extract_entities', 'level': 'info', 'logger': 'core.langgraph.nodes.extraction_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.extraction_node] - info - extract_entities: extraction complete - (characters=0 world_items=0 relationships=0 _record=<LogRecord: core.langgraph.nodes.extraction_node, 20, /home/user/saga/core/langgraph/nodes/extraction_node.py, 111, "{'characters': 0, 'world_items': 0, 'relationships': 0, 'event': 'extract_entities: extraction complete', 'level': 'info', 'logger': 'core.langgraph.nodes.extraction_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.commit_node] - info - commit_to_graph - (chapter=1 characters=0 world_items=0 relationships=0 _record=<LogRecord: core.langgraph.nodes.commit_node, 20, /home/user/saga/core/langgraph/nodes/commit_node.py, 72, "{'chapter': 1, 'characters': 0, 'world_items': 0, 'relationships': 0, 'event': 'commit_to_graph', 'level': 'info', 'logger': 'core.langgraph.nodes.commit_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.commit_node] - error - commit_to_graph: failed to create chapter node - (error=object MagicMock can't be used in 'await' expression chapter=1 exc_info=True _record=<LogRecord: core.langgraph.nodes.commit_node, 40, /home/user/saga/core/langgraph/nodes/commit_node.py, 553, "{'error': "object MagicMock can't be used in 'await' expression", 'chapter': 1, 'exc_info': True, 'event': 'commit_to_graph: failed to create chapter node', 'level': 'error', 'logger': 'core.langgraph.nodes.commit_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.commit_node] - info - commit_to_graph: successfully committed to knowledge graph - (chapter=1 characters=0 world_items=0 relationships=0 _record=<LogRecord: core.langgraph.nodes.commit_node, 20, /home/user/saga/core/langgraph/nodes/commit_node.py, 146, "{'chapter': 1, 'characters': 0, 'world_items': 0, 'relationships': 0, 'event': 'commit_to_graph: successfully committed to knowledge graph', 'level': 'info', 'logger': 'core.langgraph.nodes.commit_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.validation_node] - info - validate_consistency - (chapter=1 relationships=0 characters=0 _record=<LogRecord: core.langgraph.nodes.validation_node, 20, /home/user/saga/core/langgraph/nodes/validation_node.py, 52, "{'chapter': 1, 'relationships': 0, 'characters': 0, 'event': 'validate_consistency', 'level': 'info', 'logger': 'core.langgraph.nodes.validation_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.validation_node] - info - validate_consistency: validation complete - (total_issues=1 critical=0 major=1 minor=0 needs_revision=False _record=<LogRecord: core.langgraph.nodes.validation_node, 20, /home/user/saga/core/langgraph/nodes/validation_node.py, 103, "{'total_issues': 1, 'critical': 0, 'major': 1, 'minor': 0, 'needs_revision': False, 'event': 'validate_consistency: validation complete', 'level': 'info', 'logger': 'core.langgraph.nodes.validation_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.workflow] - info - should_revise: routing decision - (needs_revision=False iteration=0 max_iterations=2 force_continue=False _record=<LogRecord: core.langgraph.workflow, 20, /home/user/saga/core/langgraph/workflow.py, 81, "{'needs_revision': False, 'iteration': 0, 'max_iterations': 2, 'force_continue': False, 'event': 'should_revise: routing decision', 'level': 'info', 'logger': 'core.langgraph.workflow', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.workflow] - info - should_revise: no revision needed, ending workflow - (_record=<LogRecord: core.langgraph.workflow, 20, /home/user/saga/core/langgraph/workflow.py, 109, "{'event': 'should_revise: no revision needed, ending workflow', 'level': 'info', 'logger': 'core.langgraph.workflow', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.workflow] - info - create_phase1_graph: building workflow graph - (_record=<LogRecord: core.langgraph.workflow, 20, /home/user/saga/core/langgraph/workflow.py, 127, "{'event': 'create_phase1_graph: building workflow graph', 'level': 'info', 'logger': 'core.langgraph.workflow', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.workflow] - info - create_phase1_graph: graph built successfully - (nodes=['extract', 'commit', 'validate', 'revise'] entry_point=extract _record=<LogRecord: core.langgraph.workflow, 20, /home/user/saga/core/langgraph/workflow.py, 180, "{'nodes': ['extract', 'commit', 'validate', 'revise'], 'entry_point': 'extract', 'event': 'create_phase1_graph: graph built successfully', 'level': 'info', 'logger': 'core.langgraph.workflow', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.workflow] - info - create_phase1_graph: compiling without checkpointing - (_record=<LogRecord: core.langgraph.workflow, 20, /home/user/saga/core/langgraph/workflow.py, 191, "{'event': 'create_phase1_graph: compiling without checkpointing', 'level': 'info', 'logger': 'core.langgraph.workflow', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.extraction_node] - info - extract_entities - (chapter=1 word_count=2 _record=<LogRecord: core.langgraph.nodes.extraction_node, 20, /home/user/saga/core/langgraph/nodes/extraction_node.py, 63, "{'chapter': 1, 'word_count': 2, 'event': 'extract_entities', 'level': 'info', 'logger': 'core.langgraph.nodes.extraction_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.extraction_node] - info - extract_entities: extraction complete - (characters=0 world_items=0 relationships=0 _record=<LogRecord: core.langgraph.nodes.extraction_node, 20, /home/user/saga/core/langgraph/nodes/extraction_node.py, 111, "{'characters': 0, 'world_items': 0, 'relationships': 0, 'event': 'extract_entities: extraction complete', 'level': 'info', 'logger': 'core.langgraph.nodes.extraction_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.commit_node] - info - commit_to_graph - (chapter=1 characters=0 world_items=0 relationships=0 _record=<LogRecord: core.langgraph.nodes.commit_node, 20, /home/user/saga/core/langgraph/nodes/commit_node.py, 72, "{'chapter': 1, 'characters': 0, 'world_items': 0, 'relationships': 0, 'event': 'commit_to_graph', 'level': 'info', 'logger': 'core.langgraph.nodes.commit_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.commit_node] - error - commit_to_graph: failed to create chapter node - (error=object MagicMock can't be used in 'await' expression chapter=1 exc_info=True _record=<LogRecord: core.langgraph.nodes.commit_node, 40, /home/user/saga/core/langgraph/nodes/commit_node.py, 553, "{'error': "object MagicMock can't be used in 'await' expression", 'chapter': 1, 'exc_info': True, 'event': 'commit_to_graph: failed to create chapter node', 'level': 'error', 'logger': 'core.langgraph.nodes.commit_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.commit_node] - info - commit_to_graph: successfully committed to knowledge graph - (chapter=1 characters=0 world_items=0 relationships=0 _record=<LogRecord: core.langgraph.nodes.commit_node, 20, /home/user/saga/core/langgraph/nodes/commit_node.py, 146, "{'chapter': 1, 'characters': 0, 'world_items': 0, 'relationships': 0, 'event': 'commit_to_graph: successfully committed to knowledge graph', 'level': 'info', 'logger': 'core.langgraph.nodes.commit_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.validation_node] - info - validate_consistency - (chapter=1 relationships=0 characters=0 _record=<LogRecord: core.langgraph.nodes.validation_node, 20, /home/user/saga/core/langgraph/nodes/validation_node.py, 52, "{'chapter': 1, 'relationships': 0, 'characters': 0, 'event': 'validate_consistency', 'level': 'info', 'logger': 'core.langgraph.nodes.validation_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.validation_node] - info - validate_consistency: validation complete - (total_issues=1 critical=0 major=1 minor=0 needs_revision=False _record=<LogRecord: core.langgraph.nodes.validation_node, 20, /home/user/saga/core/langgraph/nodes/validation_node.py, 103, "{'total_issues': 1, 'critical': 0, 'major': 1, 'minor': 0, 'needs_revision': False, 'event': 'validate_consistency: validation complete', 'level': 'info', 'logger': 'core.langgraph.nodes.validation_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.workflow] - info - should_revise: routing decision - (needs_revision=False iteration=0 max_iterations=1 force_continue=False _record=<LogRecord: core.langgraph.workflow, 20, /home/user/saga/core/langgraph/workflow.py, 81, "{'needs_revision': False, 'iteration': 0, 'max_iterations': 1, 'force_continue': False, 'event': 'should_revise: routing decision', 'level': 'info', 'logger': 'core.langgraph.workflow', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.workflow] - info - should_revise: no revision needed, ending workflow - (_record=<LogRecord: core.langgraph.workflow, 20, /home/user/saga/core/langgraph/workflow.py, 109, "{'event': 'should_revise: no revision needed, ending workflow', 'level': 'info', 'logger': 'core.langgraph.workflow', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.workflow] - info - create_phase1_graph: building workflow graph - (_record=<LogRecord: core.langgraph.workflow, 20, /home/user/saga/core/langgraph/workflow.py, 127, "{'event': 'create_phase1_graph: building workflow graph', 'level': 'info', 'logger': 'core.langgraph.workflow', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.workflow] - info - create_phase1_graph: graph built successfully - (nodes=['extract', 'commit', 'validate', 'revise'] entry_point=extract _record=<LogRecord: core.langgraph.workflow, 20, /home/user/saga/core/langgraph/workflow.py, 180, "{'nodes': ['extract', 'commit', 'validate', 'revise'], 'entry_point': 'extract', 'event': 'create_phase1_graph: graph built successfully', 'level': 'info', 'logger': 'core.langgraph.workflow', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.workflow] - info - create_phase1_graph: compiling without checkpointing - (_record=<LogRecord: core.langgraph.workflow, 20, /home/user/saga/core/langgraph/workflow.py, 191, "{'event': 'create_phase1_graph: compiling without checkpointing', 'level': 'info', 'logger': 'core.langgraph.workflow', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.extraction_node] - info - extract_entities - (chapter=1 word_count=2 _record=<LogRecord: core.langgraph.nodes.extraction_node, 20, /home/user/saga/core/langgraph/nodes/extraction_node.py, 63, "{'chapter': 1, 'word_count': 2, 'event': 'extract_entities', 'level': 'info', 'logger': 'core.langgraph.nodes.extraction_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.extraction_node] - info - extract_entities: extraction complete - (characters=0 world_items=0 relationships=0 _record=<LogRecord: core.langgraph.nodes.extraction_node, 20, /home/user/saga/core/langgraph/nodes/extraction_node.py, 111, "{'characters': 0, 'world_items': 0, 'relationships': 0, 'event': 'extract_entities: extraction complete', 'level': 'info', 'logger': 'core.langgraph.nodes.extraction_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.commit_node] - info - commit_to_graph - (chapter=1 characters=0 world_items=0 relationships=0 _record=<LogRecord: core.langgraph.nodes.commit_node, 20, /home/user/saga/core/langgraph/nodes/commit_node.py, 72, "{'chapter': 1, 'characters': 0, 'world_items': 0, 'relationships': 0, 'event': 'commit_to_graph', 'level': 'info', 'logger': 'core.langgraph.nodes.commit_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.commit_node] - error - commit_to_graph: failed to create chapter node - (error=object MagicMock can't be used in 'await' expression chapter=1 exc_info=True _record=<LogRecord: core.langgraph.nodes.commit_node, 40, /home/user/saga/core/langgraph/nodes/commit_node.py, 553, "{'error': "object MagicMock can't be used in 'await' expression", 'chapter': 1, 'exc_info': True, 'event': 'commit_to_graph: failed to create chapter node', 'level': 'error', 'logger': 'core.langgraph.nodes.commit_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.commit_node] - info - commit_to_graph: successfully committed to knowledge graph - (chapter=1 characters=0 world_items=0 relationships=0 _record=<LogRecord: core.langgraph.nodes.commit_node, 20, /home/user/saga/core/langgraph/nodes/commit_node.py, 146, "{'chapter': 1, 'characters': 0, 'world_items': 0, 'relationships': 0, 'event': 'commit_to_graph: successfully committed to knowledge graph', 'level': 'info', 'logger': 'core.langgraph.nodes.commit_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.validation_node] - info - validate_consistency - (chapter=1 relationships=0 characters=0 _record=<LogRecord: core.langgraph.nodes.validation_node, 20, /home/user/saga/core/langgraph/nodes/validation_node.py, 52, "{'chapter': 1, 'relationships': 0, 'characters': 0, 'event': 'validate_consistency', 'level': 'info', 'logger': 'core.langgraph.nodes.validation_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.nodes.validation_node] - info - validate_consistency: validation complete - (total_issues=1 critical=0 major=1 minor=0 needs_revision=False _record=<LogRecord: core.langgraph.nodes.validation_node, 20, /home/user/saga/core/langgraph/nodes/validation_node.py, 103, "{'total_issues': 1, 'critical': 0, 'major': 1, 'minor': 0, 'needs_revision': False, 'event': 'validate_consistency: validation complete', 'level': 'info', 'logger': 'core.langgraph.nodes.validation_node', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.workflow] - info - should_revise: routing decision - (needs_revision=False iteration=0 max_iterations=3 force_continue=True _record=<LogRecord: core.langgraph.workflow, 20, /home/user/saga/core/langgraph/workflow.py, 81, "{'needs_revision': False, 'iteration': 0, 'max_iterations': 3, 'force_continue': True, 'event': 'should_revise: routing decision', 'level': 'info', 'logger': 'core.langgraph.workflow', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.workflow] - info - should_revise: force_continue enabled, skipping revision - (_record=<LogRecord: core.langgraph.workflow, 20, /home/user/saga/core/langgraph/workflow.py, 91, "{'event': 'should_revise: force_continue enabled, skipping revision', 'level': 'info', 'logger': 'core.langgraph.workflow', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.workflow] - info - should_revise: routing decision - (needs_revision=True iteration=0 max_iterations=3 force_continue=False _record=<LogRecord: core.langgraph.workflow, 20, /home/user/saga/core/langgraph/workflow.py, 81, "{'needs_revision': True, 'iteration': 0, 'max_iterations': 3, 'force_continue': False, 'event': 'should_revise: routing decision', 'level': 'info', 'logger': 'core.langgraph.workflow', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.workflow] - info - should_revise: revision needed, routing to revise node - (_record=<LogRecord: core.langgraph.workflow, 20, /home/user/saga/core/langgraph/workflow.py, 105, "{'event': 'should_revise: revision needed, routing to revise node', 'level': 'info', 'logger': 'core.langgraph.workflow', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.workflow] - info - should_revise: routing decision - (needs_revision=True iteration=3 max_iterations=3 force_continue=False _record=<LogRecord: core.langgraph.workflow, 20, /home/user/saga/core/langgraph/workflow.py, 81, "{'needs_revision': True, 'iteration': 3, 'max_iterations': 3, 'force_continue': False, 'event': 'should_revise: routing decision', 'level': 'info', 'logger': 'core.langgraph.workflow', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.workflow] - warning - should_revise: max iterations reached, ending workflow - (iteration_count=3 max_iterations=3 _record=<LogRecord: core.langgraph.workflow, 30, /home/user/saga/core/langgraph/workflow.py, 96, "{'iteration_count': 3, 'max_iterations': 3, 'event': 'should_revise: max iterations reached, ending workflow', 'level': 'warning', 'logger': 'core.langgraph.workflow', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.workflow] - info - should_revise: routing decision - (needs_revision=True iteration=0 max_iterations=3 force_continue=True _record=<LogRecord: core.langgraph.workflow, 20, /home/user/saga/core/langgraph/workflow.py, 81, "{'needs_revision': True, 'iteration': 0, 'max_iterations': 3, 'force_continue': True, 'event': 'should_revise: routing decision', 'level': 'info', 'logger': 'core.langgraph.workflow', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.workflow] - info - should_revise: force_continue enabled, skipping revision - (_record=<LogRecord: core.langgraph.workflow, 20, /home/user/saga/core/langgraph/workflow.py, 91, "{'event': 'should_revise: force_continue enabled, skipping revision', 'level': 'info', 'logger': 'core.langgraph.workflow', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.workflow] - info - should_revise: routing decision - (needs_revision=False iteration=0 max_iterations=3 force_continue=False _record=<LogRecord: core.langgraph.workflow, 20, /home/user/saga/core/langgraph/workflow.py, 81, "{'needs_revision': False, 'iteration': 0, 'max_iterations': 3, 'force_continue': False, 'event': 'should_revise: routing decision', 'level': 'info', 'logger': 'core.langgraph.workflow', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.workflow] - info - should_revise: no revision needed, ending workflow - (_record=<LogRecord: core.langgraph.workflow, 20, /home/user/saga/core/langgraph/workflow.py, 109, "{'event': 'should_revise: no revision needed, ending workflow', 'level': 'info', 'logger': 'core.langgraph.workflow', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.workflow] - info - create_checkpointer: creating async SQLite checkpointer - (db_path=/tmp/pytest-of-root/pytest-17/test_create_checkpointer0/test.db _record=<LogRecord: core.langgraph.workflow, 20, /home/user/saga/core/langgraph/workflow.py, 366, "{'db_path': '/tmp/pytest-of-root/pytest-17/test_create_checkpointer0/test.db', 'event': 'create_checkpointer: creating async SQLite checkpointer', 'level': 'info', 'logger': 'core.langgraph.workflow', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.workflow] - info - create_checkpointer: creating async SQLite checkpointer - (db_path=/tmp/pytest-of-root/pytest-17/test_graph_with_checkpointing0/checkpoint.db _record=<LogRecord: core.langgraph.workflow, 20, /home/user/saga/core/langgraph/workflow.py, 366, "{'db_path': '/tmp/pytest-of-root/pytest-17/test_graph_with_checkpointing0/checkpoint.db', 'event': 'create_checkpointer: creating async SQLite checkpointer', 'level': 'info', 'logger': 'core.langgraph.workflow', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.workflow] - info - create_phase1_graph: building workflow graph - (_record=<LogRecord: core.langgraph.workflow, 20, /home/user/saga/core/langgraph/workflow.py, 127, "{'event': 'create_phase1_graph: building workflow graph', 'level': 'info', 'logger': 'core.langgraph.workflow', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.workflow] - info - create_phase1_graph: graph built successfully - (nodes=['extract', 'commit', 'validate', 'revise'] entry_point=extract _record=<LogRecord: core.langgraph.workflow, 20, /home/user/saga/core/langgraph/workflow.py, 180, "{'nodes': ['extract', 'commit', 'validate', 'revise'], 'entry_point': 'extract', 'event': 'create_phase1_graph: graph built successfully', 'level': 'info', 'logger': 'core.langgraph.workflow', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.workflow] - info - create_phase1_graph: compiling with checkpointing enabled - (_record=<LogRecord: core.langgraph.workflow, 20, /home/user/saga/core/langgraph/workflow.py, 188, "{'event': 'create_phase1_graph: compiling with checkpointing enabled', 'level': 'info', 'logger': 'core.langgraph.workflow', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.workflow] - info - create_phase1_graph: building workflow graph - (_record=<LogRecord: core.langgraph.workflow, 20, /home/user/saga/core/langgraph/workflow.py, 127, "{'event': 'create_phase1_graph: building workflow graph', 'level': 'info', 'logger': 'core.langgraph.workflow', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.workflow] - info - create_phase1_graph: graph built successfully - (nodes=['extract', 'commit', 'validate', 'revise'] entry_point=extract _record=<LogRecord: core.langgraph.workflow, 20, /home/user/saga/core/langgraph/workflow.py, 180, "{'nodes': ['extract', 'commit', 'validate', 'revise'], 'entry_point': 'extract', 'event': 'create_phase1_graph: graph built successfully', 'level': 'info', 'logger': 'core.langgraph.workflow', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
11/07/2025, 07:57:04 - [core.langgraph.workflow] - info - create_phase1_graph: compiling without checkpointing - (_record=<LogRecord: core.langgraph.workflow, 20, /home/user/saga/core/langgraph/workflow.py, 191, "{'event': 'create_phase1_graph: compiling without checkpointing', 'level': 'info', 'logger': 'core.langgraph.workflow', 'timestamp': '11/07/2025, 07:57:04'}"> _from_structlog=True)
