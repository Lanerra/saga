## Story Information

Title: {{ title }}
Genre: {{ genre }}
Theme: {{ theme }}
Setting: {{ setting }}
Target: {{ total_chapters }} chapters (~{{ target_word_count }} words)
Protagonist: {{ protagonist_name }}

Main characters:
{{ character_context }}

## Task

You MUST output ONLY valid JSON matching the enforced global-outline grammar.

CRITICAL OUTPUT RULES:
- Output MUST be a single JSON object.
- Output MUST contain EXACTLY these keys (no more, no less):
  - "act_count" (number)
  - "acts" (array)
  - "inciting_incident" (string)
  - "midpoint" (string)
  - "climax" (string)
  - "resolution" (string)
  - "character_arcs" (array)
  - "thematic_progression" (string)
  - "pacing_notes" (string)
- No markdown. No code fences. No commentary.

Act constraints:
- act_count must be 3 or 5.
- Allocate chapters 1..{{ total_chapters }} with no gaps/overlaps.
- Each act object MUST include: act_number, title, summary, key_events, chapters_start, chapters_end.

Character arcs:
- Include arcs for all main characters: {{ character_names | join(", ") }}

Return ONLY the JSON object.
