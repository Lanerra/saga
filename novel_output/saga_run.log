2025-05-23 17:30:24 - INFO - [root:32] - File logging enabled. Log file: novel_output/saga_run.log
2025-05-23 17:30:24 - INFO - [root:37] - Logging setup complete. Level: INFO
2025-05-23 17:30:24 - INFO - [__main__:131] - --- Starting Saga Novel Generation (Execution Mode: Async, Neo4j Decomposed) ---
2025-05-23 17:30:24 - INFO - [state_manager:40] - Successfully connected to Neo4j at bolt://localhost:7687
2025-05-23 17:30:24 - INFO - [state_manager:98] - Creating/verifying Neo4j indexes and constraints...
2025-05-23 17:30:24 - INFO - [neo4j.notifications:337] - Received notification from DBMS server: {severity: INFORMATION} {code: Neo.ClientNotification.Schema.IndexOrConstraintAlreadyExists} {category: SCHEMA} {title: `CREATE CONSTRAINT novelInfo_id_unique IF NOT EXISTS FOR (e:NovelInfo) REQUIRE (e.id) IS UNIQUE` has no effect.} {description: `CONSTRAINT constraint_388d9938 FOR (e:NovelInfo) REQUIRE (e.id) IS UNIQUE` already exists.} {position: None} for query: 'CREATE CONSTRAINT novelInfo_id_unique IF NOT EXISTS FOR (n:NovelInfo) REQUIRE n.id IS UNIQUE'
2025-05-23 17:30:24 - INFO - [neo4j.notifications:337] - Received notification from DBMS server: {severity: INFORMATION} {code: Neo.ClientNotification.Schema.IndexOrConstraintAlreadyExists} {category: SCHEMA} {title: `CREATE CONSTRAINT chapter_number_unique IF NOT EXISTS FOR (e:Chapter) REQUIRE (e.number) IS UNIQUE` has no effect.} {description: `CONSTRAINT constraint_3b7ce0f3 FOR (e:Chapter) REQUIRE (e.number) IS UNIQUE` already exists.} {position: None} for query: 'CREATE CONSTRAINT chapter_number_unique IF NOT EXISTS FOR (c:Chapter) REQUIRE c.number IS UNIQUE'
2025-05-23 17:30:24 - INFO - [neo4j.notifications:337] - Received notification from DBMS server: {severity: INFORMATION} {code: Neo.ClientNotification.Schema.IndexOrConstraintAlreadyExists} {category: SCHEMA} {title: `CREATE CONSTRAINT entity_name_unique IF NOT EXISTS FOR (e:Entity) REQUIRE (e.name) IS UNIQUE` has no effect.} {description: `CONSTRAINT constraint_5adcbbfe FOR (e:Entity) REQUIRE (e.name) IS UNIQUE` already exists.} {position: None} for query: 'CREATE CONSTRAINT entity_name_unique IF NOT EXISTS FOR (e:Entity) REQUIRE e.name IS UNIQUE'
2025-05-23 17:30:24 - INFO - [neo4j.notifications:337] - Received notification from DBMS server: {severity: INFORMATION} {code: Neo.ClientNotification.Schema.IndexOrConstraintAlreadyExists} {category: SCHEMA} {title: `CREATE CONSTRAINT character_name_unique IF NOT EXISTS FOR (e:Character) REQUIRE (e.name) IS UNIQUE` has no effect.} {description: `CONSTRAINT constraint_2f4f04ef FOR (e:Character) REQUIRE (e.name) IS UNIQUE` already exists.} {position: None} for query: 'CREATE CONSTRAINT character_name_unique IF NOT EXISTS FOR (char:Character) REQUIRE char.name IS UNIQUE'
2025-05-23 17:30:24 - INFO - [neo4j.notifications:337] - Received notification from DBMS server: {severity: INFORMATION} {code: Neo.ClientNotification.Schema.IndexOrConstraintAlreadyExists} {category: SCHEMA} {title: `CREATE CONSTRAINT worldElement_id_unique IF NOT EXISTS FOR (e:WorldElement) REQUIRE (e.id) IS UNIQUE` has no effect.} {description: `CONSTRAINT constraint_c7b8eec8 FOR (e:WorldElement) REQUIRE (e.id) IS UNIQUE` already exists.} {position: None} for query: 'CREATE CONSTRAINT worldElement_id_unique IF NOT EXISTS FOR (we:WorldElement) REQUIRE we.id IS UNIQUE'
2025-05-23 17:30:24 - INFO - [neo4j.notifications:337] - Received notification from DBMS server: {severity: INFORMATION} {code: Neo.ClientNotification.Schema.IndexOrConstraintAlreadyExists} {category: SCHEMA} {title: `CREATE CONSTRAINT worldContainer_id_unique IF NOT EXISTS FOR (e:WorldContainer) REQUIRE (e.id) IS UNIQUE` has no effect.} {description: `CONSTRAINT constraint_308c80de FOR (e:WorldContainer) REQUIRE (e.id) IS UNIQUE` already exists.} {position: None} for query: 'CREATE CONSTRAINT worldContainer_id_unique IF NOT EXISTS FOR (wc:WorldContainer) REQUIRE wc.id IS UNIQUE'
2025-05-23 17:30:24 - INFO - [neo4j.notifications:337] - Received notification from DBMS server: {severity: INFORMATION} {code: Neo.ClientNotification.Schema.IndexOrConstraintAlreadyExists} {category: SCHEMA} {title: `CREATE CONSTRAINT trait_name_unique IF NOT EXISTS FOR (e:Trait) REQUIRE (e.name) IS UNIQUE` has no effect.} {description: `CONSTRAINT constraint_73efdf82 FOR (e:Trait) REQUIRE (e.name) IS UNIQUE` already exists.} {position: None} for query: 'CREATE CONSTRAINT trait_name_unique IF NOT EXISTS FOR (t:Trait) REQUIRE t.name IS UNIQUE'
2025-05-23 17:30:24 - INFO - [neo4j.notifications:337] - Received notification from DBMS server: {severity: INFORMATION} {code: Neo.ClientNotification.Schema.IndexOrConstraintAlreadyExists} {category: SCHEMA} {title: `CREATE CONSTRAINT plotPoint_id_unique IF NOT EXISTS FOR (e:PlotPoint) REQUIRE (e.id) IS UNIQUE` has no effect.} {description: `CONSTRAINT constraint_30ed8a5 FOR (e:PlotPoint) REQUIRE (e.id) IS UNIQUE` already exists.} {position: None} for query: 'CREATE CONSTRAINT plotPoint_id_unique IF NOT EXISTS FOR (pp:PlotPoint) REQUIRE pp.id IS UNIQUE'
2025-05-23 17:30:24 - INFO - [neo4j.notifications:337] - Received notification from DBMS server: {severity: INFORMATION} {code: Neo.ClientNotification.Schema.IndexOrConstraintAlreadyExists} {category: SCHEMA} {title: `CREATE CONSTRAINT valueNode_value_type_unique IF NOT EXISTS FOR (e:ValueNode) REQUIRE (e.value, e.type) IS UNIQUE` has no effect.} {description: `CONSTRAINT valueNode_value_type_unique FOR (e:ValueNode) REQUIRE (e.value, e.type) IS UNIQUE` already exists.} {position: None} for query: 'CREATE CONSTRAINT valueNode_value_type_unique IF NOT EXISTS FOR (vn:ValueNode) REQUIRE (vn.value, vn.type) IS UNIQUE'
2025-05-23 17:30:24 - INFO - [neo4j.notifications:337] - Received notification from DBMS server: {severity: INFORMATION} {code: Neo.ClientNotification.Schema.IndexOrConstraintAlreadyExists} {category: SCHEMA} {title: `CREATE RANGE INDEX plotPoint_sequence IF NOT EXISTS FOR (e:PlotPoint) ON (e.sequence)` has no effect.} {description: `RANGE INDEX index_3962cb06 FOR (e:PlotPoint) ON (e.sequence)` already exists.} {position: None} for query: 'CREATE INDEX plotPoint_sequence IF NOT EXISTS FOR (pp:PlotPoint) ON (pp.sequence)'
2025-05-23 17:30:24 - INFO - [neo4j.notifications:337] - Received notification from DBMS server: {severity: INFORMATION} {code: Neo.ClientNotification.Schema.IndexOrConstraintAlreadyExists} {category: SCHEMA} {title: `CREATE RANGE INDEX statusEvent_chapter_updated IF NOT EXISTS FOR (e:StatusEvent) ON (e.chapter_updated)` has no effect.} {description: `RANGE INDEX index_950ece8a FOR (e:StatusEvent) ON (e.chapter_updated)` already exists.} {position: None} for query: 'CREATE INDEX statusEvent_chapter_updated IF NOT EXISTS FOR (s:StatusEvent) ON (s.chapter_updated)'
2025-05-23 17:30:24 - INFO - [neo4j.notifications:337] - Received notification from DBMS server: {severity: INFORMATION} {code: Neo.ClientNotification.Schema.IndexOrConstraintAlreadyExists} {category: SCHEMA} {title: `CREATE RANGE INDEX developmentEvent_chapter_updated IF NOT EXISTS FOR (e:DevelopmentEvent) ON (e.chapter_updated)` has no effect.} {description: `RANGE INDEX index_e1a98a8e FOR (e:DevelopmentEvent) ON (e.chapter_updated)` already exists.} {position: None} for query: 'CREATE INDEX developmentEvent_chapter_updated IF NOT EXISTS FOR (d:DevelopmentEvent) ON (d.chapter_updated)'
2025-05-23 17:30:24 - INFO - [neo4j.notifications:337] - Received notification from DBMS server: {severity: INFORMATION} {code: Neo.ClientNotification.Schema.IndexOrConstraintAlreadyExists} {category: SCHEMA} {title: `CREATE RANGE INDEX worldElaborationEvent_chapter_updated IF NOT EXISTS FOR (e:WorldElaborationEvent) ON (e.chapter_updated)` has no effect.} {description: `RANGE INDEX index_a8fd279 FOR (e:WorldElaborationEvent) ON (e.chapter_updated)` already exists.} {position: None} for query: 'CREATE INDEX worldElaborationEvent_chapter_updated IF NOT EXISTS FOR (we:WorldElaborationEvent) ON (we.chapter_updated)'
2025-05-23 17:30:24 - INFO - [neo4j.notifications:337] - Received notification from DBMS server: {severity: INFORMATION} {code: Neo.ClientNotification.Schema.IndexOrConstraintAlreadyExists} {category: SCHEMA} {title: `CREATE RANGE INDEX dynamicRel_chapter_added IF NOT EXISTS FOR ()-[e:DYNAMIC_REL]-() ON (e.chapter_added)` has no effect.} {description: `RANGE INDEX index_308c2baa FOR ()-[e:DYNAMIC_REL]-() ON (e.chapter_added)` already exists.} {position: None} for query: 'CREATE INDEX dynamicRel_chapter_added IF NOT EXISTS FOR ()-[r:DYNAMIC_REL]-() ON (r.chapter_added)'
2025-05-23 17:30:24 - INFO - [neo4j.notifications:337] - Received notification from DBMS server: {severity: INFORMATION} {code: Neo.ClientNotification.Schema.IndexOrConstraintAlreadyExists} {category: SCHEMA} {title: `CREATE RANGE INDEX dynamicRel_type IF NOT EXISTS FOR ()-[e:DYNAMIC_REL]-() ON (e.type)` has no effect.} {description: `RANGE INDEX index_90849398 FOR ()-[e:DYNAMIC_REL]-() ON (e.type)` already exists.} {position: None} for query: 'CREATE INDEX dynamicRel_type IF NOT EXISTS FOR ()-[r:DYNAMIC_REL]-() ON (r.type)'
2025-05-23 17:30:24 - INFO - [neo4j.notifications:337] - Received notification from DBMS server: {severity: INFORMATION} {code: Neo.ClientNotification.Schema.IndexOrConstraintAlreadyExists} {category: SCHEMA} {title: `CREATE RANGE INDEX worldElement_category IF NOT EXISTS FOR (e:WorldElement) ON (e.category)` has no effect.} {description: `RANGE INDEX index_c46fc864 FOR (e:WorldElement) ON (e.category)` already exists.} {position: None} for query: 'CREATE INDEX worldElement_category IF NOT EXISTS FOR (we:WorldElement) ON (we.category)'
2025-05-23 17:30:24 - INFO - [neo4j.notifications:337] - Received notification from DBMS server: {severity: INFORMATION} {code: Neo.ClientNotification.Schema.IndexOrConstraintAlreadyExists} {category: SCHEMA} {title: `CREATE RANGE INDEX worldElement_name IF NOT EXISTS FOR (e:WorldElement) ON (e.name)` has no effect.} {description: `RANGE INDEX index_3dd109cb FOR (e:WorldElement) ON (e.name)` already exists.} {position: None} for query: 'CREATE INDEX worldElement_name IF NOT EXISTS FOR (we:WorldElement) ON (we.name)'
2025-05-23 17:30:24 - INFO - [neo4j.notifications:337] - Received notification from DBMS server: {severity: INFORMATION} {code: Neo.ClientNotification.Schema.IndexOrConstraintAlreadyExists} {category: SCHEMA} {title: `CREATE RANGE INDEX chapter_is_provisional IF NOT EXISTS FOR (e:Chapter) ON (e.is_provisional)` has no effect.} {description: `RANGE INDEX chapter_is_provisional FOR (e:Chapter) ON (e.is_provisional)` already exists.} {position: None} for query: 'CREATE INDEX chapter_is_provisional IF NOT EXISTS FOR (c:Chapter) ON (c.is_provisional)'
2025-05-23 17:30:24 - INFO - [neo4j.notifications:337] - Received notification from DBMS server: {severity: INFORMATION} {code: Neo.ClientNotification.Schema.IndexOrConstraintAlreadyExists} {category: SCHEMA} {title: `CREATE RANGE INDEX dynamicRel_is_provisional IF NOT EXISTS FOR ()-[e:DYNAMIC_REL]-() ON (e.is_provisional)` has no effect.} {description: `RANGE INDEX dynamicRel_is_provisional FOR ()-[e:DYNAMIC_REL]-() ON (e.is_provisional)` already exists.} {position: None} for query: 'CREATE INDEX dynamicRel_is_provisional IF NOT EXISTS FOR ()-[r:DYNAMIC_REL]-() ON (r.is_provisional)'
2025-05-23 17:30:24 - INFO - [state_manager:131] - Neo4j indexes and constraints verification process complete.
2025-05-23 17:30:24 - INFO - [__main__:136] - state_manager initialized and Neo4j connection/schema verified.
2025-05-23 17:30:24 - INFO - [novel_agent:30] - Initializing NovelWriterAgent instance...
2025-05-23 17:30:24 - INFO - [novel_agent:35] - NovelWriterAgent instance created. Call async_init() to load/prepare state.
2025-05-23 17:30:24 - INFO - [novel_agent:38] - NovelWriterAgent async_init started...
2025-05-23 17:30:24 - INFO - [state_manager:615] - Neo4j loaded chapter count: 0
2025-05-23 17:30:24 - INFO - [novel_agent:41] - Loaded chapter count from Neo4j: 0
2025-05-23 17:30:24 - INFO - [state_manager:225] - Loading decomposed plot outline from Neo4j...
2025-05-23 17:30:24 - INFO - [state_manager:365] - Loading decomposed character profiles from Neo4j...
2025-05-23 17:30:24 - INFO - [state_manager:540] - Loading decomposed world building data from Neo4j...
2025-05-23 17:30:24 - WARNING - [state_manager:232] - No NovelInfo node found with id 'saga_main_novel_info'. Returning empty plot outline.
2025-05-23 17:30:24 - WARNING - [novel_agent:63] - Plot outline is empty after Neo4j load. Expected during initial setup or if save failed previously.
2025-05-23 17:30:24 - WARNING - [novel_agent:65] - Character profiles are empty after Neo4j load. Expected during initial setup or if save failed previously.
2025-05-23 17:30:24 - INFO - [novel_agent:69] - NovelWriterAgent async_init complete.
2025-05-23 17:30:24 - INFO - [__main__:140] - NovelWriterAgent initialized and state loaded (Python dicts from Neo4j).
2025-05-23 17:30:24 - INFO - [__main__:42] - Performing initial setup (populating agent's Python dicts)...
2025-05-23 17:30:24 - INFO - [initial_setup_logic:194] - Generating plot outline Python dict. Unhinged mode: True
2025-05-23 17:30:24 - INFO - [initial_setup_logic:202] - No valid user-supplied file. Proceeding with LLM/default generation for Python dicts.
2025-05-23 17:30:24 - INFO - [initial_setup_logic:278] - Calling LLM for plot outline generation (to plain text)...
2025-05-23 17:30:24 - WARNING - [llm_interface:66] - No direct tiktoken encoding found for model 'Qwen3-30B-A3B'. Attempting default encoding 'cl100k_base'.
2025-05-23 17:30:24 - INFO - [llm_interface:73] - Using default tiktoken encoding 'cl100k_base' for model 'Qwen3-30B-A3B' and cached.
2025-05-23 17:30:40 - INFO - [httpx:1740] - HTTP Request: POST http://127.0.0.1:8080/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-23 17:30:47 - INFO - [llm_interface:249] - Async: Streamed LLM ('Qwen3-30B-A3B') Usage - Prompt: 543 tk, Comp: 562 tk, Total: 1105 tk
2025-05-23 17:30:47 - INFO - [initial_setup_logic:325] - Successfully generated plot outline dict: 'The Dreamer’s Labyrinth'
2025-05-23 17:30:47 - INFO - [initial_setup_logic:350] - Created initial profile for protagonist 'Kaelen Vey' in agent.character_profiles.
2025-05-23 17:30:47 - INFO - [initial_setup_logic:468] - Generating initial world-building data (to plain text) via LLM...
2025-05-23 17:30:48 - INFO - [httpx:1740] - HTTP Request: POST http://127.0.0.1:8080/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-23 17:31:06 - INFO - [llm_interface:249] - Async: Streamed LLM ('Qwen3-30B-A3B') Usage - Prompt: 925 tk, Comp: 1346 tk, Total: 2271 tk
2025-05-23 17:31:06 - INFO - [initial_setup_logic:513] - Successfully generated initial world-building dict via LLM (from plain text).
2025-05-23 17:31:06 - INFO - [novel_agent:72] - Saving agent state (plot, characters, world) to Neo4j (decomposed)...
2025-05-23 17:31:06 - INFO - [state_manager:154] - Saving decomposed plot outline to Neo4j using MERGE...
2025-05-23 17:31:06 - INFO - [state_manager:252] - Saving decomposed character profiles to Neo4j using MERGE...
2025-05-23 17:31:06 - INFO - [state_manager:421] - Saving decomposed world building data to Neo4j using MERGE...
2025-05-23 17:31:06 - INFO - [state_manager:89] - Successfully executed batch of 6 Cypher statements.
2025-05-23 17:31:06 - INFO - [state_manager:531] - Successfully saved decomposed world building data to Neo4j using MERGE.
2025-05-23 17:31:06 - INFO - [state_manager:89] - Successfully executed batch of 17 Cypher statements.
2025-05-23 17:31:06 - INFO - [state_manager:218] - Successfully saved decomposed plot outline to Neo4j using MERGE.
2025-05-23 17:31:06 - INFO - [state_manager:89] - Successfully executed batch of 6 Cypher statements.
2025-05-23 17:31:06 - INFO - [state_manager:358] - Successfully saved decomposed character profiles to Neo4j using MERGE.
2025-05-23 17:31:06 - INFO - [novel_agent:88] - Successfully saved plot_outline to Neo4j (decomposed).
2025-05-23 17:31:06 - INFO - [novel_agent:88] - Successfully saved character_profiles to Neo4j (decomposed).
2025-05-23 17:31:06 - INFO - [novel_agent:88] - Successfully saved world_building to Neo4j (decomposed).
2025-05-23 17:31:06 - INFO - [novel_agent:93] - All (3) state objects saved to Neo4j (decomposed) successfully.
2025-05-23 17:31:06 - INFO - [__main__:112] - Found existing NovelInfo node with plot points. Assuming KG already pre-populated or managed. Skipping explicit pre-population step.
2025-05-23 17:31:06 - INFO - [novel_agent:135] - === Starting Chapter 1 Generation ===
2025-05-23 17:31:06 - INFO - [chapter_planning_logic:145] - Planning Chapter 1 with detailed scenes...
2025-05-23 17:31:07 - WARNING - [prompt_data_getters:159] - Neo4j world snippet fetch for 'locations' empty. Using agent memory as fallback.
2025-05-23 17:31:07 - WARNING - [prompt_data_getters:159] - Neo4j world snippet fetch for 'systems' empty. Using agent memory as fallback.
2025-05-23 17:31:07 - WARNING - [prompt_data_getters:159] - Neo4j world snippet fetch for 'factions' empty. Using agent memory as fallback.
2025-05-23 17:31:07 - INFO - [chapter_planning_logic:230] - Calling LLM (Qwen3-30B-A3B) for detailed scene plan for chapter 1 (target scenes: 10-18)...
2025-05-23 17:31:07 - INFO - [httpx:1740] - HTTP Request: POST http://127.0.0.1:8080/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-23 17:31:34 - INFO - [llm_interface:249] - Async: Streamed LLM ('Qwen3-30B-A3B') Usage - Prompt: 845 tk, Comp: 1786 tk, Total: 2631 tk
2025-05-23 17:31:34 - INFO - [chapter_planning_logic:274] - Generated valid detailed scene plan for chapter 1 with 10 scenes from plain text.
2025-05-23 17:31:34 - INFO - [context_generation_logic:173] - Generating HYBRID context for Chapter 1...
2025-05-23 17:31:34 - INFO - [context_generation_logic:227] - Generated HYBRID context for Chapter 1, Tokens (est.): 124.
2025-05-23 17:31:34 - INFO - [chapter_drafting_logic:83] - Using detailed scene plan (plain text) for Ch 1 draft generation.
2025-05-23 17:31:34 - INFO - [prompt_data_getters:332] - Fetching and formatting filtered character profiles as PLAIN TEXT up to chapter 0.
2025-05-23 17:31:34 - INFO - [prompt_data_getters:389] - Fetching and formatting filtered world data as PLAIN TEXT up to chapter 0.
2025-05-23 17:31:34 - INFO - [chapter_drafting_logic:133] - Calling LLM (Qwen3-30B-A3B) for Ch 1 draft. Target minimum length: 15000 chars.
2025-05-23 17:31:36 - INFO - [httpx:1740] - HTTP Request: POST http://127.0.0.1:8080/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-23 17:32:52 - INFO - [llm_interface:249] - Async: Streamed LLM ('Qwen3-30B-A3B') Usage - Prompt: 2626 tk, Comp: 4354 tk, Total: 6980 tk
2025-05-23 17:32:52 - INFO - [chapter_drafting_logic:158] - Generated initial draft for ch 1 (Length: 19936 chars).
2025-05-23 17:32:52 - INFO - [chapter_evaluation_logic:236] - Evaluating chapter 1 draft (length: 19936 chars)...
2025-05-23 17:32:52 - INFO - [chapter_evaluation_logic:279] - Skipping coherence check for Chapter 1.
2025-05-23 17:32:54 - INFO - [httpx:1740] - HTTP Request: POST http://127.0.0.1:11434/api/embeddings "HTTP/1.1 200 OK"
2025-05-23 17:32:54 - INFO - [prompt_data_getters:332] - Fetching and formatting filtered character profiles as PLAIN TEXT up to chapter 0.
2025-05-23 17:32:54 - INFO - [prompt_data_getters:389] - Fetching and formatting filtered world data as PLAIN TEXT up to chapter 0.
2025-05-23 17:32:54 - INFO - [chapter_evaluation_logic:176] - Calling LLM (Qwen3-30B-A3B) for comprehensive (plain text) evaluation of chapter 1...
2025-05-23 17:33:24 - INFO - [httpx:1740] - HTTP Request: POST http://127.0.0.1:8080/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-23 17:33:24 - INFO - [llm_interface:249] - Async: LLM ('Qwen3-30B-A3B') Usage - Prompt: 5773 tk, Comp: 1058 tk, Total: 6831 tk
2025-05-23 17:33:24 - INFO - [chapter_evaluation_logic:225] - Comprehensive (plain text) evaluation for Ch 1 complete. LLM output: 'ISSUE CATEGORY: consistency
PROBLEM DESCRIPTION: The chapter introduces the "Thoughtstorms" as a hidden chamber in Thal’Zirath, but this element is not mentioned or referenced in any prior context or ...'
2025-05-23 17:33:24 - WARNING - [chapter_evaluation_logic:73] - Parsed unknown issue category 'thematic_alignment' in block 3 for Ch 1. Defaulting to 'meta'.
2025-05-23 17:33:24 - WARNING - [chapter_evaluation_logic:73] - Parsed unknown issue category 'thematic_alignment' in block 7 for Ch 1. Defaulting to 'meta'.
2025-05-23 17:33:24 - WARNING - [chapter_evaluation_logic:324] - Problem quote for Ch 1 NOT VERBATIM in chapter text: '"The Thoughtstorms: A hidden chamber deep within T...'. Problem: The chapter introduces the "Thoughtstorms" as a hidden chamber in Thal’Zirath, but this element is not mentioned or referenced in any prior context or character profile, creating an inconsistency with the established world-building.
2025-05-23 17:33:24 - WARNING - [chapter_evaluation_logic:324] - Problem quote for Ch 1 NOT VERBATIM in chapter text: '"The message on the screen pulsed again, more insi...'. Problem: The chapter introduces Kaelen being summoned to Thal’Zirath due to disappearances linked to a dream-echo, but the actual summoning is not clearly depicted. The transition from receiving a message to arriving in Thal’Zirath feels abrupt and lacks a clear narrative progression.
2025-05-23 17:33:24 - WARNING - [chapter_evaluation_logic:324] - Problem quote for Ch 1 NOT VERBATIM in chapter text: '"What if I’m not here to find the labyrinth... but...'. Problem: The chapter introduces the idea that Kaelen may be part of the dream-echo, but this concept is not clearly tied to the novel’s theme of the nature of reality or Kaelen’s arc of becoming an active architect of balance.
2025-05-23 17:33:24 - WARNING - [chapter_evaluation_logic:324] - Problem quote for Ch 1 NOT VERBATIM in chapter text: '"They had always been an observer, a mediator betw...'. Problem: The character of Kaelen is described as a mediator who sees all perspectives, but their internal monologue and actions in this chapter suggest a more passive role, which may not align with their established profile.
2025-05-23 17:33:24 - WARNING - [chapter_evaluation_logic:324] - Problem quote for Ch 1 NOT VERBATIM in chapter text: '"The research archive on the edge of the *Erebus S...'. Problem: The chapter introduces the "Erebus Station" and "Erebus Order" without prior context, which may confuse readers unfamiliar with these elements.
2025-05-23 17:33:24 - WARNING - [chapter_evaluation_logic:324] - Problem quote for Ch 1 NOT VERBATIM in chapter text: '"The stars are moving... but not in the way they s...'. Problem: The theme of the nature of reality is introduced through the dream-echo, but the chapter does not fully explore how this phenomenon challenges Kaelen’s understanding of reality or their role within it.
2025-05-23 17:33:24 - WARNING - [chapter_evaluation_logic:324] - Problem quote for Ch 1 NOT VERBATIM in chapter text: '"I don’t know what I’ve gotten myself into," they ...'. Problem: The chapter lacks sufficient character introspection and emotional depth, particularly in moments where Kaelen faces uncertainty or fear.
2025-05-23 17:33:24 - WARNING - [chapter_evaluation_logic:324] - Problem quote for Ch 1 NOT VERBATIM in chapter text: '"I’ve survived the dream-echo... And I don’t want ...'. Problem: The chapter ends with Kaelen encountering the Dreamer, but it is unclear how this interaction will affect the plot or advance the story’s central conflict.
2025-05-23 17:33:24 - INFO - [chapter_evaluation_logic:327] - Evaluation for Ch 1 complete. Needs revision: True. Summary: Consistency issues identified by LLM.; Meta/Uncategorized issues by LLM.; Narrative Depth/Length issues by LLM.; Plot Arc deviation identified by LLM.. Detailed problems: 9
2025-05-23 17:33:24 - WARNING - [novel_agent:173] - Ch 1 initial draft (19936 chars) flagged for revision. Reasons: Consistency issues identified by LLM.; Meta/Uncategorized issues by LLM.; Narrative Depth/Length issues by LLM.; Plot Arc deviation identified by LLM.
2025-05-23 17:33:24 - WARNING - [chapter_revision_logic:262] - Attempting revision for chapter 1. Reason(s) summary:
- Consistency issues identified by LLM.
- Meta/Uncategorized issues by LLM.
- Narrative Depth/Length issues by LLM.
- Plot Arc deviation identified by LLM.
2025-05-23 17:33:24 - INFO - [chapter_revision_logic:270] - Patch-based revision enabled. Attempting to generate and apply patches for Ch 1 (9 actionable problems identified).
2025-05-23 17:33:24 - WARNING - [chapter_revision_logic:153] - Found 9 problems for Ch 1, but will only attempt to patch the first 7.
2025-05-23 17:33:24 - WARNING - [chapter_revision_logic:35] - Quote for context window not found in text: '"The Thoughtstorms: A hidden chamber deep within T...' Returning full text snippet as fallback.
2025-05-23 17:33:24 - WARNING - [chapter_revision_logic:35] - Quote for context window not found in text: '"The message on the screen pulsed again, more insi...' Returning full text snippet as fallback.
2025-05-23 17:33:24 - WARNING - [chapter_revision_logic:35] - Quote for context window not found in text: '"What if I’m not here to find the labyrinth... but...' Returning full text snippet as fallback.
2025-05-23 17:33:24 - WARNING - [chapter_revision_logic:35] - Quote for context window not found in text: '"They had always been an observer, a mediator betw...' Returning full text snippet as fallback.
2025-05-23 17:33:24 - WARNING - [chapter_revision_logic:35] - Quote for context window not found in text: '"The research archive on the edge of the *Erebus S...' Returning full text snippet as fallback.
2025-05-23 17:33:24 - WARNING - [chapter_revision_logic:35] - Quote for context window not found in text: '"The stars are moving... but not in the way they s...' Returning full text snippet as fallback.
2025-05-23 17:33:24 - INFO - [chapter_revision_logic:108] - Calling LLM (Qwen3-30B-A3B) for single patch in Ch 1. Problem: The chapter introduces the "Thoughtstorms" as a hidden chamb... Quote: "The Thoughtstorms: A hidden chamber deep within Thal’Zirath...
2025-05-23 17:33:24 - INFO - [chapter_revision_logic:108] - Calling LLM (Qwen3-30B-A3B) for single patch in Ch 1. Problem: The chapter introduces Kaelen being summoned to Thal’Zirath ... Quote: "The message on the screen pulsed again, more insistent this...
2025-05-23 17:33:24 - INFO - [chapter_revision_logic:108] - Calling LLM (Qwen3-30B-A3B) for single patch in Ch 1. Problem: The chapter introduces the idea that Kaelen may be part of t... Quote: "What if I’m not here to find the labyrinth... but to become...
2025-05-23 17:33:24 - INFO - [chapter_revision_logic:108] - Calling LLM (Qwen3-30B-A3B) for single patch in Ch 1. Problem: The chapter is too short overall for the events covered and ... Quote: N/A - General Issue...
2025-05-23 17:33:24 - INFO - [chapter_revision_logic:108] - Calling LLM (Qwen3-30B-A3B) for single patch in Ch 1. Problem: The character of Kaelen is described as a mediator who sees ... Quote: "They had always been an observer, a mediator between confli...
2025-05-23 17:33:24 - INFO - [chapter_revision_logic:108] - Calling LLM (Qwen3-30B-A3B) for single patch in Ch 1. Problem: The chapter introduces the "Erebus Station" and "Erebus Orde... Quote: "The research archive on the edge of the *Erebus Station*......
2025-05-23 17:33:24 - INFO - [chapter_revision_logic:108] - Calling LLM (Qwen3-30B-A3B) for single patch in Ch 1. Problem: The theme of the nature of reality is introduced through the... Quote: "The stars are moving... but not in the way they should."...
2025-05-23 17:33:37 - INFO - [httpx:1740] - HTTP Request: POST http://127.0.0.1:8080/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-23 17:33:37 - INFO - [llm_interface:249] - Async: LLM ('Qwen3-30B-A3B') Usage - Prompt: 4053 tk, Comp: 183 tk, Total: 4236 tk
2025-05-23 17:33:40 - INFO - [httpx:1740] - HTTP Request: POST http://127.0.0.1:8080/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-23 17:33:40 - INFO - [llm_interface:249] - Async: LLM ('Qwen3-30B-A3B') Usage - Prompt: 4076 tk, Comp: 203 tk, Total: 4279 tk
2025-05-23 17:33:50 - INFO - [httpx:1740] - HTTP Request: POST http://127.0.0.1:8080/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-23 17:33:50 - INFO - [llm_interface:249] - Async: LLM ('Qwen3-30B-A3B') Usage - Prompt: 4146 tk, Comp: 313 tk, Total: 4459 tk
2025-05-23 17:33:58 - INFO - [httpx:1740] - HTTP Request: POST http://127.0.0.1:8080/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-23 17:33:58 - INFO - [llm_interface:249] - Async: LLM ('Qwen3-30B-A3B') Usage - Prompt: 4055 tk, Comp: 460 tk, Total: 4515 tk
2025-05-23 17:34:11 - INFO - [httpx:1740] - HTTP Request: POST http://127.0.0.1:8080/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-23 17:34:11 - INFO - [llm_interface:249] - Async: LLM ('Qwen3-30B-A3B') Usage - Prompt: 4110 tk, Comp: 576 tk, Total: 4686 tk
2025-05-23 17:34:19 - INFO - [httpx:1740] - HTTP Request: POST http://127.0.0.1:8080/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-23 17:34:19 - INFO - [llm_interface:249] - Async: LLM ('Qwen3-30B-A3B') Usage - Prompt: 4102 tk, Comp: 599 tk, Total: 4701 tk
2025-05-23 17:34:35 - INFO - [httpx:1740] - HTTP Request: POST http://127.0.0.1:8080/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-23 17:34:35 - INFO - [llm_interface:249] - Async: LLM ('Qwen3-30B-A3B') Usage - Prompt: 4178 tk, Comp: 972 tk, Total: 5150 tk
2025-05-23 17:34:35 - INFO - [chapter_revision_logic:185] - Generated 7 patch instructions for Ch 1.
2025-05-23 17:34:35 - WARNING - [chapter_revision_logic:207] - Patching: `search_text` not found in original text. Skipping patch. Search: '"The Thoughtstorms: A hidden chamber deep within Thal’Zirath, where the city's architects and dream-...'
2025-05-23 17:34:35 - WARNING - [chapter_revision_logic:207] - Patching: `search_text` not found in original text. Skipping patch. Search: '"The message on the screen pulsed again, more insistent this time... And now, it had found them."...'
2025-05-23 17:34:35 - WARNING - [chapter_revision_logic:207] - Patching: `search_text` not found in original text. Skipping patch. Search: '"What if I’m not here to find the labyrinth... but to become part of it?"...'
2025-05-23 17:34:35 - WARNING - [chapter_revision_logic:207] - Patching: `search_text` not found in original text. Skipping patch. Search: '"They had always been an observer, a mediator between conflicting perspectives..."...'
2025-05-23 17:34:35 - WARNING - [chapter_revision_logic:207] - Patching: `search_text` not found in original text. Skipping patch. Search: '"The research archive on the edge of the *Erebus Station*... behind a sealed door marked with the si...'
2025-05-23 17:34:35 - WARNING - [chapter_revision_logic:207] - Patching: `search_text` not found in original text. Skipping patch. Search: '"The stars are moving... but not in the way they should."...'
2025-05-23 17:34:35 - WARNING - [chapter_revision_logic:221] - 6/6 applicable patches could not be applied because their search_text was not found in the original chapter.
2025-05-23 17:34:35 - INFO - [chapter_revision_logic:279] - Successfully applied 7 patches to Ch 1. Original len: 19936, Patched len: 19936.
2025-05-23 17:34:35 - INFO - [chapter_revision_logic:296] - Patched text similarity score with original draft: 1.0000
2025-05-23 17:34:35 - WARNING - [chapter_revision_logic:298] - Patched text for ch 1 is too similar to original (Score: 1.0000 >= Threshold: 0.985). Patches may have been ineffective.
2025-05-23 17:34:35 - INFO - [chapter_revision_logic:421] - Revision process for ch 1 produced a candidate text (Length: 19936 chars).
2025-05-23 17:34:35 - INFO - [novel_agent:186] - Revision attempted for ch 1. Re-evaluating revised draft (19936 chars)...
2025-05-23 17:34:35 - INFO - [chapter_evaluation_logic:236] - Evaluating chapter 1 draft (length: 19936 chars)...
2025-05-23 17:34:35 - INFO - [chapter_evaluation_logic:279] - Skipping coherence check for Chapter 1.
2025-05-23 17:34:35 - INFO - [prompt_data_getters:332] - Fetching and formatting filtered character profiles as PLAIN TEXT up to chapter 0.
2025-05-23 17:34:35 - INFO - [prompt_data_getters:389] - Fetching and formatting filtered world data as PLAIN TEXT up to chapter 0.
2025-05-23 17:34:35 - INFO - [chapter_evaluation_logic:176] - Calling LLM (Qwen3-30B-A3B) for comprehensive (plain text) evaluation of chapter 1...
2025-05-23 17:35:05 - INFO - [httpx:1740] - HTTP Request: POST http://127.0.0.1:8080/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-23 17:35:05 - INFO - [llm_interface:249] - Async: LLM ('Qwen3-30B-A3B') Usage - Prompt: 5773 tk, Comp: 1134 tk, Total: 6907 tk
2025-05-23 17:35:05 - INFO - [chapter_evaluation_logic:225] - Comprehensive (plain text) evaluation for Ch 1 complete. LLM output: 'ISSUE CATEGORY: consistency
PROBLEM DESCRIPTION: The chapter introduces Thal’Zirath as a city built on a sleeping god, but this is not mentioned in the plot outline or world building notes. The concep...'
2025-05-23 17:35:05 - INFO - [chapter_evaluation_logic:38] - Plain text evaluation for Ch 1 is empty or indicates no problems. No problems parsed.
2025-05-23 17:35:05 - INFO - [chapter_evaluation_logic:327] - Evaluation for Ch 1 complete. Needs revision: False. Summary: None. Detailed problems: 0
2025-05-23 17:35:05 - INFO - [novel_agent:204] - Revised draft for ch 1 passed re-evaluation.
2025-05-23 17:35:05 - INFO - [novel_agent:232] - Finalizing chapter 1 (From flawed draft: False). Text length: 19936.
2025-05-23 17:35:12 - INFO - [httpx:1740] - HTTP Request: POST http://127.0.0.1:8080/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-23 17:35:12 - INFO - [llm_interface:249] - Async: LLM ('Qwen3-30B-A3B') Usage - Prompt: 4442 tk, Comp: 108 tk, Total: 4550 tk
2025-05-23 17:35:12 - INFO - [knowledge_management_logic:91] - Generated summary for ch 1: 'Kaelen discovers a mysterious message from an unknown source, revealing a phenomenon called the drea...'
2025-05-23 17:35:12 - INFO - [state_manager:653] - Neo4j: Successfully saved chapter data (including embedding) for chapter 1.
2025-05-23 17:35:12 - INFO - [novel_agent:259] - Saved chapter text and raw LLM log files for ch 1.
2025-05-23 17:35:12 - INFO - [novel_agent:263] - Core finalization complete for ch 1.
2025-05-23 17:35:12 - INFO - [knowledge_management_logic:779] - Updating all knowledge bases for ch 1 (Source from flawed draft: False)...
2025-05-23 17:35:12 - INFO - [knowledge_management_logic:475] - Performing unified knowledge extraction (plain text) for Chapter 1...
2025-05-23 17:35:12 - INFO - [prompt_data_getters:332] - Fetching and formatting filtered character profiles as PLAIN TEXT up to chapter 0.
2025-05-23 17:35:12 - INFO - [prompt_data_getters:389] - Fetching and formatting filtered world data as PLAIN TEXT up to chapter 0.
2025-05-23 17:35:12 - INFO - [knowledge_management_logic:594] - Calling LLM (Qwen3-30B-A3B) for unified knowledge extraction (Ch 1).
2025-05-23 17:35:18 - INFO - [httpx:1740] - HTTP Request: POST http://127.0.0.1:8080/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-23 17:35:37 - INFO - [llm_interface:249] - Async: Streamed LLM ('Qwen3-30B-A3B') Usage - Prompt: 5928 tk, Comp: 844 tk, Total: 6772 tk
2025-05-23 17:35:37 - INFO - [knowledge_management_logic:639] - Unified knowledge extraction (plain text parsing) for Ch 1 complete. Char updates: 1, World updates categories: 3, KG Triples: 17.
2025-05-23 17:35:37 - INFO - [knowledge_management_logic:216] - Merging character profile updates for ch 1. Characters in update: ['Kaelen Vey']
2025-05-23 17:35:37 - INFO - [knowledge_management_logic:137] - Applied trait modifications for 'Kaelen Vey'. New traits: ['Introspective']
2025-05-23 17:35:37 - INFO - [knowledge_management_logic:249] - Character profile Python dict merge complete for ch 1. Updated: 1, New: 0.
2025-05-23 17:35:37 - INFO - [knowledge_management_logic:330] - Merging world-building updates for ch 1. Categories in update: ['locations', 'factions', 'lore']
2025-05-23 17:35:37 - INFO - [knowledge_management_logic:142] - Applied modification to 'atmosphere' for 'locations.The Thoughtstorms'. New value: 'Now charged with unseen energy...'
2025-05-23 17:35:37 - INFO - [knowledge_management_logic:374] - World-building Python dict merge complete for ch 1. Approx 3 items affected/added.
2025-05-23 17:35:37 - INFO - [knowledge_management_logic:817] - KG update from unified_extraction for ch 1: Added 17 triples, skipped 0.
2025-05-23 17:35:37 - INFO - [knowledge_management_logic:820] - Unified knowledge extraction processing complete for ch 1. In-memory dicts updated, KG triples sent to Neo4j.
2025-05-23 17:35:37 - INFO - [novel_agent:72] - Saving agent state (plot, characters, world) to Neo4j (decomposed)...
2025-05-23 17:35:37 - INFO - [state_manager:154] - Saving decomposed plot outline to Neo4j using MERGE...
2025-05-23 17:35:37 - INFO - [state_manager:252] - Saving decomposed character profiles to Neo4j using MERGE...
2025-05-23 17:35:37 - INFO - [state_manager:421] - Saving decomposed world building data to Neo4j using MERGE...
2025-05-23 17:35:37 - INFO - [state_manager:89] - Successfully executed batch of 17 Cypher statements.
2025-05-23 17:35:37 - INFO - [state_manager:218] - Successfully saved decomposed plot outline to Neo4j using MERGE.
2025-05-23 17:35:37 - INFO - [state_manager:89] - Successfully executed batch of 14 Cypher statements.
2025-05-23 17:35:37 - INFO - [state_manager:531] - Successfully saved decomposed world building data to Neo4j using MERGE.
2025-05-23 17:35:37 - INFO - [state_manager:89] - Successfully executed batch of 9 Cypher statements.
2025-05-23 17:35:37 - INFO - [state_manager:358] - Successfully saved decomposed character profiles to Neo4j using MERGE.
2025-05-23 17:35:37 - INFO - [novel_agent:88] - Successfully saved plot_outline to Neo4j (decomposed).
2025-05-23 17:35:37 - INFO - [novel_agent:88] - Successfully saved character_profiles to Neo4j (decomposed).
2025-05-23 17:35:37 - INFO - [novel_agent:88] - Successfully saved world_building to Neo4j (decomposed).
2025-05-23 17:35:37 - INFO - [novel_agent:93] - All (3) state objects saved to Neo4j (decomposed) successfully.
2025-05-23 17:35:37 - INFO - [novel_agent:228] - === Finished Ch 1 Successfully ===
2025-05-23 17:35:37 - INFO - [novel_agent:135] - === Starting Chapter 2 Generation ===
2025-05-23 17:35:37 - INFO - [chapter_planning_logic:145] - Planning Chapter 2 with detailed scenes...
2025-05-23 17:35:37 - WARNING - [prompt_data_getters:159] - Neo4j world snippet fetch for 'systems' empty. Using agent memory as fallback.
2025-05-23 17:35:37 - INFO - [chapter_planning_logic:230] - Calling LLM (Qwen3-30B-A3B) for detailed scene plan for chapter 2 (target scenes: 10-18)...
2025-05-23 17:35:38 - INFO - [httpx:1740] - HTTP Request: POST http://127.0.0.1:8080/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-23 17:36:30 - INFO - [llm_interface:249] - Async: Streamed LLM ('Qwen3-30B-A3B') Usage - Prompt: 972 tk, Comp: 2581 tk, Total: 3553 tk
2025-05-23 17:36:30 - INFO - [chapter_planning_logic:274] - Generated valid detailed scene plan for chapter 2 with 14 scenes from plain text.
2025-05-23 17:36:30 - INFO - [context_generation_logic:173] - Generating HYBRID context for Chapter 2...
2025-05-23 17:36:30 - INFO - [context_generation_logic:33] - Semantic context query for ch 2 based on Plot Point 2: 'He discovers that the city is built atop a colossal, sleeping creature whose dreams are being corrup...'
2025-05-23 17:36:30 - INFO - [httpx:1740] - HTTP Request: POST http://127.0.0.1:11434/api/embeddings "HTTP/1.1 200 OK"
2025-05-23 17:36:30 - INFO - [state_manager:713] - Neo4j: Retrieved 1 past embeddings for context before chapter 2.
2025-05-23 17:36:30 - INFO - [context_generation_logic:104] - Top 1 relevant chapters for SEMANTIC context (semantic search): [1] (Scores: ['0.599'])
2025-05-23 17:36:30 - INFO - [context_generation_logic:157] - Constructed final SEMANTIC context: 115 tokens from chapters [1].
2025-05-23 17:36:30 - INFO - [context_generation_logic:227] - Generated HYBRID context for Chapter 2, Tokens (est.): 232.
2025-05-23 17:36:30 - INFO - [chapter_drafting_logic:83] - Using detailed scene plan (plain text) for Ch 2 draft generation.
2025-05-23 17:36:30 - INFO - [prompt_data_getters:332] - Fetching and formatting filtered character profiles as PLAIN TEXT up to chapter 1.
2025-05-23 17:36:30 - INFO - [prompt_data_getters:389] - Fetching and formatting filtered world data as PLAIN TEXT up to chapter 1.
2025-05-23 17:36:30 - INFO - [chapter_drafting_logic:133] - Calling LLM (Qwen3-30B-A3B) for Ch 2 draft. Target minimum length: 15000 chars.
2025-05-23 17:36:34 - INFO - [httpx:1740] - HTTP Request: POST http://127.0.0.1:8080/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-23 17:38:16 - INFO - [llm_interface:249] - Async: Streamed LLM ('Qwen3-30B-A3B') Usage - Prompt: 3920 tk, Comp: 4856 tk, Total: 8776 tk
2025-05-23 17:38:16 - INFO - [chapter_drafting_logic:158] - Generated initial draft for ch 2 (Length: 21943 chars).
2025-05-23 17:38:16 - INFO - [chapter_evaluation_logic:236] - Evaluating chapter 2 draft (length: 21943 chars)...
2025-05-23 17:38:17 - INFO - [httpx:1740] - HTTP Request: POST http://127.0.0.1:11434/api/embeddings "HTTP/1.1 200 OK"
2025-05-23 17:38:17 - INFO - [chapter_evaluation_logic:267] - Coherence score with previous chapter (1): 0.8504
2025-05-23 17:38:17 - INFO - [prompt_data_getters:332] - Fetching and formatting filtered character profiles as PLAIN TEXT up to chapter 1.
2025-05-23 17:38:17 - INFO - [prompt_data_getters:389] - Fetching and formatting filtered world data as PLAIN TEXT up to chapter 1.
2025-05-23 17:38:17 - INFO - [chapter_evaluation_logic:176] - Calling LLM (Qwen3-30B-A3B) for comprehensive (plain text) evaluation of chapter 2...
2025-05-23 17:38:41 - INFO - [httpx:1740] - HTTP Request: POST http://127.0.0.1:8080/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-23 17:38:41 - INFO - [llm_interface:249] - Async: LLM ('Qwen3-30B-A3B') Usage - Prompt: 6808 tk, Comp: 650 tk, Total: 7458 tk
2025-05-23 17:38:41 - INFO - [chapter_evaluation_logic:225] - Comprehensive (plain text) evaluation for Ch 2 complete. LLM output: 'ISSUE CATEGORY: consistency
PROBLEM DESCRIPTION: The Erebus Order is mentioned as a secretive group that once guarded knowledge about the dream-echo and Thal’Zirath, but in this chapter, they are depi...'
2025-05-23 17:38:41 - WARNING - [chapter_evaluation_logic:73] - Parsed unknown issue category 'thematic_alignment' in block 3 for Ch 2. Defaulting to 'meta'.
2025-05-23 17:38:41 - WARNING - [chapter_evaluation_logic:324] - Problem quote for Ch 2 NOT VERBATIM in chapter text: '"A group of figures emerged from the shadows, thei...'. Problem: The Erebus Order is mentioned as a secretive group that once guarded knowledge about the dream-echo and Thal’Zirath, but in this chapter, they are depicted as actively confronting Kaelen in a hidden corridor. This contradicts their established role as a group that has "buried" their records and is not directly involved in current events.
2025-05-23 17:38:41 - WARNING - [chapter_evaluation_logic:324] - Problem quote for Ch 2 NOT VERBATIM in chapter text: '"The dream-echo wasn’t just spreading—it was evolv...'. Problem: While the chapter introduces the idea that the city is built atop a sleeping creature, it does not clearly establish how the memetic hazard corrupts the dreams of the city's inhabitants. The connection between the dream-echo and the corruption is implied but not fully developed.
2025-05-23 17:38:41 - WARNING - [chapter_evaluation_logic:324] - Problem quote for Ch 2 NOT VERBATIM in chapter text: '"Kaelen had always known Thal’Zirath was different...'. Problem: The chapter touches on the theme of the nature of reality but does not fully explore Kaelen’s internal conflict or their evolving role as an "architect of balance." The focus is more on external events than on Kaelen’s personal transformation.
2025-05-23 17:38:41 - INFO - [chapter_evaluation_logic:327] - Evaluation for Ch 2 complete. Needs revision: True. Summary: Consistency issues identified by LLM.; Meta/Uncategorized issues by LLM.; Narrative Depth/Length issues by LLM.; Plot Arc deviation identified by LLM.. Detailed problems: 5
2025-05-23 17:38:41 - WARNING - [novel_agent:173] - Ch 2 initial draft (21943 chars) flagged for revision. Reasons: Consistency issues identified by LLM.; Meta/Uncategorized issues by LLM.; Narrative Depth/Length issues by LLM.; Plot Arc deviation identified by LLM.
2025-05-23 17:38:41 - WARNING - [chapter_revision_logic:262] - Attempting revision for chapter 2. Reason(s) summary:
- Consistency issues identified by LLM.
- Meta/Uncategorized issues by LLM.
- Narrative Depth/Length issues by LLM.
- Plot Arc deviation identified by LLM.
2025-05-23 17:38:41 - INFO - [chapter_revision_logic:270] - Patch-based revision enabled. Attempting to generate and apply patches for Ch 2 (4 actionable problems identified).
2025-05-23 17:38:41 - WARNING - [chapter_revision_logic:35] - Quote for context window not found in text: '"A group of figures emerged from the shadows, thei...' Returning full text snippet as fallback.
2025-05-23 17:38:41 - WARNING - [chapter_revision_logic:35] - Quote for context window not found in text: '"The dream-echo wasn’t just spreading—it was evolv...' Returning full text snippet as fallback.
2025-05-23 17:38:41 - WARNING - [chapter_revision_logic:35] - Quote for context window not found in text: '"Kaelen had always known Thal’Zirath was different...' Returning full text snippet as fallback.
2025-05-23 17:38:41 - INFO - [chapter_revision_logic:108] - Calling LLM (Qwen3-30B-A3B) for single patch in Ch 2. Problem: The Erebus Order is mentioned as a secretive group that once... Quote: "A group of figures emerged from the shadows, their faces ob...
2025-05-23 17:38:41 - INFO - [chapter_revision_logic:108] - Calling LLM (Qwen3-30B-A3B) for single patch in Ch 2. Problem: While the chapter introduces the idea that the city is built... Quote: "The dream-echo wasn’t just spreading—it was evolving, growi...
2025-05-23 17:38:41 - INFO - [chapter_revision_logic:108] - Calling LLM (Qwen3-30B-A3B) for single patch in Ch 2. Problem: The chapter touches on the theme of the nature of reality bu... Quote: "Kaelen had always known Thal’Zirath was different, but now,...
2025-05-23 17:38:41 - INFO - [chapter_revision_logic:108] - Calling LLM (Qwen3-30B-A3B) for single patch in Ch 2. Problem: The chapter is too short for the events covered. It lacks su... Quote: N/A - General Issue...
2025-05-23 17:38:58 - INFO - [httpx:1740] - HTTP Request: POST http://127.0.0.1:8080/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-23 17:38:58 - INFO - [llm_interface:249] - Async: LLM ('Qwen3-30B-A3B') Usage - Prompt: 5001 tk, Comp: 222 tk, Total: 5223 tk
2025-05-23 17:39:01 - INFO - [httpx:1740] - HTTP Request: POST http://127.0.0.1:8080/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-23 17:39:01 - INFO - [llm_interface:249] - Async: LLM ('Qwen3-30B-A3B') Usage - Prompt: 5088 tk, Comp: 264 tk, Total: 5352 tk
2025-05-23 17:39:16 - INFO - [httpx:1740] - HTTP Request: POST http://127.0.0.1:8080/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-23 17:39:16 - INFO - [llm_interface:249] - Async: LLM ('Qwen3-30B-A3B') Usage - Prompt: 5056 tk, Comp: 448 tk, Total: 5504 tk
2025-05-23 17:39:39 - INFO - [httpx:1740] - HTTP Request: POST http://127.0.0.1:8080/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-23 17:39:39 - INFO - [llm_interface:249] - Async: LLM ('Qwen3-30B-A3B') Usage - Prompt: 5056 tk, Comp: 1428 tk, Total: 6484 tk
2025-05-23 17:39:39 - INFO - [chapter_revision_logic:185] - Generated 4 patch instructions for Ch 2.
2025-05-23 17:39:39 - WARNING - [chapter_revision_logic:207] - Patching: `search_text` not found in original text. Skipping patch. Search: '"A group of figures emerged from the shadows, their faces obscured by hoods. They were the Erebus Or...'
2025-05-23 17:39:39 - WARNING - [chapter_revision_logic:207] - Patching: `search_text` not found in original text. Skipping patch. Search: '"The dream-echo wasn’t just spreading—it was evolving, growing stronger with every revelation, every...'
2025-05-23 17:39:39 - WARNING - [chapter_revision_logic:207] - Patching: `search_text` not found in original text. Skipping patch. Search: '"Kaelen had always known Thal’Zirath was different, but now, they understood the truth: the city was...'
2025-05-23 17:39:39 - WARNING - [chapter_revision_logic:221] - 3/3 applicable patches could not be applied because their search_text was not found in the original chapter.
2025-05-23 17:39:39 - INFO - [chapter_revision_logic:279] - Successfully applied 4 patches to Ch 2. Original len: 21943, Patched len: 21943.
2025-05-23 17:39:39 - INFO - [chapter_revision_logic:296] - Patched text similarity score with original draft: 1.0000
2025-05-23 17:39:39 - WARNING - [chapter_revision_logic:298] - Patched text for ch 2 is too similar to original (Score: 1.0000 >= Threshold: 0.985). Patches may have been ineffective.
2025-05-23 17:39:39 - INFO - [chapter_revision_logic:421] - Revision process for ch 2 produced a candidate text (Length: 21943 chars).
2025-05-23 17:39:39 - INFO - [novel_agent:186] - Revision attempted for ch 2. Re-evaluating revised draft (21943 chars)...
2025-05-23 17:39:39 - INFO - [chapter_evaluation_logic:236] - Evaluating chapter 2 draft (length: 21943 chars)...
2025-05-23 17:39:39 - INFO - [chapter_evaluation_logic:267] - Coherence score with previous chapter (1): 0.8504
2025-05-23 17:39:39 - INFO - [prompt_data_getters:332] - Fetching and formatting filtered character profiles as PLAIN TEXT up to chapter 1.
2025-05-23 17:39:39 - INFO - [prompt_data_getters:389] - Fetching and formatting filtered world data as PLAIN TEXT up to chapter 1.
2025-05-23 17:39:39 - INFO - [chapter_evaluation_logic:176] - Calling LLM (Qwen3-30B-A3B) for comprehensive (plain text) evaluation of chapter 2...
2025-05-23 17:40:06 - INFO - [httpx:1740] - HTTP Request: POST http://127.0.0.1:8080/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-23 17:40:06 - INFO - [llm_interface:249] - Async: LLM ('Qwen3-30B-A3B') Usage - Prompt: 6808 tk, Comp: 829 tk, Total: 7637 tk
2025-05-23 17:40:06 - INFO - [chapter_evaluation_logic:225] - Comprehensive (plain text) evaluation for Ch 2 complete. LLM output: 'ISSUE CATEGORY: consistency
PROBLEM DESCRIPTION: The city is described as "built atop a colossal, sleeping creature" in the plot point, but this revelation is presented as a new discovery by Kaelen, c...'
2025-05-23 17:40:06 - WARNING - [chapter_evaluation_logic:73] - Parsed unknown issue category 'thematic_alignment' in block 3 for Ch 2. Defaulting to 'meta'.
2025-05-23 17:40:06 - WARNING - [chapter_evaluation_logic:73] - Parsed unknown issue category 'narrative_depth_and_length' in block 4 for Ch 2. Defaulting to 'meta'.
2025-05-23 17:40:06 - WARNING - [chapter_evaluation_logic:73] - Parsed unknown issue category 'thematic_alignment' in block 7 for Ch 2. Defaulting to 'meta'.
2025-05-23 17:40:06 - WARNING - [chapter_evaluation_logic:73] - Parsed unknown issue category 'narrative_depth_and_length' in block 8 for Ch 2. Defaulting to 'meta'.
2025-05-23 17:40:06 - WARNING - [chapter_evaluation_logic:324] - Problem quote for Ch 2 NOT VERBATIM in chapter text: '"This wasn’t just a legend passed down through gen...'. Problem: The city is described as "built atop a colossal, sleeping creature" in the plot point, but this revelation is presented as a new discovery by Kaelen, contradicting the prior context where the dream-echo and the Sleeper were already introduced in Chapter 1.
2025-05-23 17:40:06 - WARNING - [chapter_evaluation_logic:324] - Problem quote for Ch 2 NOT VERBATIM in chapter text: '"The dream-echo wasn’t just a phenomenon. It was a...'. Problem: The chapter introduces the concept of the city being built on a sleeping creature, but fails to clearly connect this to the memetic hazard or show how the corruption is affecting it.
2025-05-23 17:40:06 - WARNING - [chapter_evaluation_logic:324] - Problem quote for Ch 2 NOT VERBATIM in chapter text: '"Some truths are too dangerous to know."...'. Problem: The theme of the nature of reality is not fully explored in this chapter. Kaelen’s internal conflict about the danger of knowledge is touched on but lacks depth.
2025-05-23 17:40:06 - WARNING - [chapter_evaluation_logic:324] - Problem quote for Ch 2 NOT VERBATIM in chapter text: '"A group of figures emerged from the shadows, thei...'. Problem: The Erebus Order is mentioned in previous context but is not clearly defined or connected to the current plot. Their presence here feels abrupt and unexplained.
2025-05-23 17:40:06 - WARNING - [chapter_evaluation_logic:324] - Problem quote for Ch 2 NOT VERBATIM in chapter text: '"Kaelen had always known Thal’Zirath was different...'. Problem: The chapter does not clearly show how Kaelen is evolving from a passive observer to an active architect of balance, as outlined in the character arc.
2025-05-23 17:40:06 - WARNING - [chapter_evaluation_logic:324] - Problem quote for Ch 2 NOT VERBATIM in chapter text: '"The city was alive, and it was watching them."...'. Problem: The chapter does not fully explore the planetary romance aspect of the novel, focusing more on mystery and horror.
2025-05-23 17:40:06 - WARNING - [chapter_evaluation_logic:324] - Problem quote for Ch 2 NOT VERBATIM in chapter text: '"Lira met their gaze, her expression unreadable."...'. Problem: The chapter lacks sufficient dialogue development and character introspection to fully engage the reader.
2025-05-23 17:40:06 - INFO - [chapter_evaluation_logic:327] - Evaluation for Ch 2 complete. Needs revision: True. Summary: Consistency issues identified by LLM.; Meta/Uncategorized issues by LLM.; Plot Arc deviation identified by LLM.. Detailed problems: 8
2025-05-23 17:40:06 - ERROR - [novel_agent:191] - Revised draft for ch 2 STILL FAILED evaluation. Reasons: Consistency issues identified by LLM.; Meta/Uncategorized issues by LLM.; Plot Arc deviation identified by LLM.
2025-05-23 17:40:06 - WARNING - [novel_agent:194] - Reverting to original draft (21943 chars) as revised draft (21943 chars) also failed evaluation and original is longer/better.
2025-05-23 17:40:06 - INFO - [novel_agent:232] - Finalizing chapter 2 (From flawed draft: True). Text length: 21943.
2025-05-23 17:40:14 - INFO - [httpx:1740] - HTTP Request: POST http://127.0.0.1:8080/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-23 17:40:14 - INFO - [llm_interface:249] - Async: LLM ('Qwen3-30B-A3B') Usage - Prompt: 4944 tk, Comp: 117 tk, Total: 5061 tk
2025-05-23 17:40:14 - INFO - [knowledge_management_logic:91] - Generated summary for ch 2: 'Kaelen discovers that Thal’Zirath is built atop a slumbering, sentient entity known as the Sleeper,...'
2025-05-23 17:40:14 - INFO - [state_manager:653] - Neo4j: Successfully saved chapter data (including embedding) for chapter 2.
2025-05-23 17:40:14 - INFO - [novel_agent:259] - Saved chapter text and raw LLM log files for ch 2.
2025-05-23 17:40:14 - INFO - [novel_agent:263] - Core finalization complete for ch 2.
2025-05-23 17:40:14 - INFO - [knowledge_management_logic:779] - Updating all knowledge bases for ch 2 (Source from flawed draft: True)...
2025-05-23 17:40:14 - INFO - [knowledge_management_logic:475] - Performing unified knowledge extraction (plain text) for Chapter 2...
2025-05-23 17:40:14 - INFO - [prompt_data_getters:332] - Fetching and formatting filtered character profiles as PLAIN TEXT up to chapter 1.
2025-05-23 17:40:14 - INFO - [prompt_data_getters:389] - Fetching and formatting filtered world data as PLAIN TEXT up to chapter 1.
2025-05-23 17:40:14 - INFO - [knowledge_management_logic:594] - Calling LLM (Qwen3-30B-A3B) for unified knowledge extraction (Ch 2).
2025-05-23 17:40:21 - INFO - [httpx:1740] - HTTP Request: POST http://127.0.0.1:8080/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-23 17:40:51 - INFO - [llm_interface:249] - Async: Streamed LLM ('Qwen3-30B-A3B') Usage - Prompt: 6873 tk, Comp: 1257 tk, Total: 8130 tk
2025-05-23 17:40:51 - INFO - [knowledge_management_logic:639] - Unified knowledge extraction (plain text parsing) for Ch 2 complete. Char updates: 2, World updates categories: 3, KG Triples: 28.
2025-05-23 17:40:51 - INFO - [knowledge_management_logic:216] - Merging character profile updates for ch 2. Characters in update: ['Kaelen Vey', 'Lira Vey']
2025-05-23 17:40:51 - INFO - [knowledge_management_logic:137] - Applied trait modifications for 'Kaelen Vey'. New traits: ['Introspective', 'Observant, Cautious, Determined, Introspective', 'Resilient']
2025-05-23 17:40:51 - INFO - [knowledge_management_logic:169] - Prepared new character profile for 'Lira Vey'.
2025-05-23 17:40:51 - INFO - [knowledge_management_logic:137] - Applied trait modifications for 'Lira Vey'. New traits: ['Cautious, Wise, Fearful, Guarded', 'Fearful']
2025-05-23 17:40:51 - INFO - [knowledge_management_logic:249] - Character profile Python dict merge complete for ch 2. Updated: 1, New: 1.
2025-05-23 17:40:51 - INFO - [knowledge_management_logic:330] - Merging world-building updates for ch 2. Categories in update: ['lore', 'factions', 'locations']
2025-05-23 17:40:51 - INFO - [knowledge_management_logic:142] - Applied modification to 'description' for 'lore.Dream-Echo'. New value: 'A phenomenon where individuals experience visions that feel more real ...'
2025-05-23 17:40:51 - INFO - [knowledge_management_logic:142] - Applied modification to 'description' for 'lore.Sleeper'. New value: 'A massive, slumbering form coiled around Thal’Zirath, its presence und...'
2025-05-23 17:40:51 - INFO - [knowledge_management_logic:142] - Applied modification to 'description' for 'factions.Erebus Order'. New value: 'A secretive group that once guarded knowledge about the dream-echo and...'
2025-05-23 17:40:51 - INFO - [knowledge_management_logic:142] - Applied modification to 'atmosphere' for 'locations.The Thoughtstorms'. New value: 'Now charged with unstable energy, shifting and unpredictable...'
2025-05-23 17:40:51 - INFO - [knowledge_management_logic:374] - World-building Python dict merge complete for ch 2. Approx 4 items affected/added.
2025-05-23 17:40:51 - INFO - [knowledge_management_logic:817] - KG update from unified_extraction for ch 2: Added 28 triples, skipped 0.
2025-05-23 17:40:51 - INFO - [knowledge_management_logic:820] - Unified knowledge extraction processing complete for ch 2. In-memory dicts updated, KG triples sent to Neo4j.
2025-05-23 17:40:51 - INFO - [novel_agent:72] - Saving agent state (plot, characters, world) to Neo4j (decomposed)...
2025-05-23 17:40:51 - INFO - [state_manager:154] - Saving decomposed plot outline to Neo4j using MERGE...
2025-05-23 17:40:51 - INFO - [state_manager:252] - Saving decomposed character profiles to Neo4j using MERGE...
2025-05-23 17:40:51 - INFO - [state_manager:421] - Saving decomposed world building data to Neo4j using MERGE...
2025-05-23 17:40:51 - INFO - [state_manager:89] - Successfully executed batch of 17 Cypher statements.
2025-05-23 17:40:51 - INFO - [state_manager:218] - Successfully saved decomposed plot outline to Neo4j using MERGE.
2025-05-23 17:40:51 - INFO - [state_manager:89] - Successfully executed batch of 19 Cypher statements.
2025-05-23 17:40:51 - INFO - [state_manager:531] - Successfully saved decomposed world building data to Neo4j using MERGE.
2025-05-23 17:40:51 - INFO - [state_manager:89] - Successfully executed batch of 16 Cypher statements.
2025-05-23 17:40:51 - INFO - [state_manager:358] - Successfully saved decomposed character profiles to Neo4j using MERGE.
2025-05-23 17:40:51 - INFO - [novel_agent:88] - Successfully saved plot_outline to Neo4j (decomposed).
2025-05-23 17:40:51 - INFO - [novel_agent:88] - Successfully saved character_profiles to Neo4j (decomposed).
2025-05-23 17:40:51 - INFO - [novel_agent:88] - Successfully saved world_building to Neo4j (decomposed).
2025-05-23 17:40:51 - INFO - [novel_agent:93] - All (3) state objects saved to Neo4j (decomposed) successfully.
2025-05-23 17:40:51 - INFO - [novel_agent:228] - === Finished Ch 2 With Flaws (Marked as flawed due to evaluation or length issues) ===
2025-05-23 17:40:51 - INFO - [novel_agent:135] - === Starting Chapter 3 Generation ===
2025-05-23 17:40:51 - INFO - [chapter_planning_logic:145] - Planning Chapter 3 with detailed scenes...
2025-05-23 17:40:51 - WARNING - [prompt_data_getters:159] - Neo4j world snippet fetch for 'systems' empty. Using agent memory as fallback.
2025-05-23 17:40:51 - INFO - [chapter_planning_logic:230] - Calling LLM (Qwen3-30B-A3B) for detailed scene plan for chapter 3 (target scenes: 10-18)...
2025-05-23 17:40:52 - INFO - [httpx:1740] - HTTP Request: POST http://127.0.0.1:8080/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-23 17:41:32 - INFO - [llm_interface:249] - Async: Streamed LLM ('Qwen3-30B-A3B') Usage - Prompt: 1107 tk, Comp: 1876 tk, Total: 2983 tk
2025-05-23 17:41:32 - INFO - [chapter_planning_logic:274] - Generated valid detailed scene plan for chapter 3 with 10 scenes from plain text.
2025-05-23 17:41:32 - INFO - [context_generation_logic:173] - Generating HYBRID context for Chapter 3...
2025-05-23 17:41:32 - INFO - [context_generation_logic:33] - Semantic context query for ch 3 based on Plot Point 3: 'As Kaelen investigates, he realizes that merely knowing about the hazard spreads it, turning people ...'
2025-05-23 17:41:32 - INFO - [httpx:1740] - HTTP Request: POST http://127.0.0.1:11434/api/embeddings "HTTP/1.1 200 OK"
2025-05-23 17:41:32 - INFO - [state_manager:713] - Neo4j: Retrieved 2 past embeddings for context before chapter 3.
2025-05-23 17:41:32 - INFO - [context_generation_logic:104] - Top 2 relevant chapters for SEMANTIC context (semantic search): [2, 1] (Scores: ['0.632', '0.610'])
2025-05-23 17:41:32 - INFO - [context_generation_logic:157] - Constructed final SEMANTIC context: 242 tokens from chapters [2, 1].
2025-05-23 17:41:32 - INFO - [context_generation_logic:227] - Generated HYBRID context for Chapter 3, Tokens (est.): 359.
2025-05-23 17:41:32 - INFO - [chapter_drafting_logic:83] - Using detailed scene plan (plain text) for Ch 3 draft generation.
2025-05-23 17:41:32 - INFO - [prompt_data_getters:332] - Fetching and formatting filtered character profiles as PLAIN TEXT up to chapter 2.
2025-05-23 17:41:32 - INFO - [prompt_data_getters:389] - Fetching and formatting filtered world data as PLAIN TEXT up to chapter 2.
2025-05-23 17:41:32 - INFO - [chapter_drafting_logic:133] - Calling LLM (Qwen3-30B-A3B) for Ch 3 draft. Target minimum length: 15000 chars.
2025-05-23 17:41:36 - INFO - [httpx:1740] - HTTP Request: POST http://127.0.0.1:8080/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-23 17:43:10 - INFO - [llm_interface:249] - Async: Streamed LLM ('Qwen3-30B-A3B') Usage - Prompt: 3872 tk, Comp: 4515 tk, Total: 8387 tk
2025-05-23 17:43:10 - INFO - [chapter_drafting_logic:158] - Generated initial draft for ch 3 (Length: 19288 chars).
2025-05-23 17:43:10 - INFO - [chapter_evaluation_logic:236] - Evaluating chapter 3 draft (length: 19288 chars)...
2025-05-23 17:43:10 - INFO - [httpx:1740] - HTTP Request: POST http://127.0.0.1:11434/api/embeddings "HTTP/1.1 200 OK"
2025-05-23 17:43:10 - INFO - [chapter_evaluation_logic:267] - Coherence score with previous chapter (2): 0.7555
2025-05-23 17:43:10 - INFO - [prompt_data_getters:332] - Fetching and formatting filtered character profiles as PLAIN TEXT up to chapter 2.
2025-05-23 17:43:10 - INFO - [prompt_data_getters:389] - Fetching and formatting filtered world data as PLAIN TEXT up to chapter 2.
2025-05-23 17:43:10 - INFO - [chapter_evaluation_logic:176] - Calling LLM (Qwen3-30B-A3B) for comprehensive (plain text) evaluation of chapter 3...
2025-05-23 17:43:44 - INFO - [httpx:1740] - HTTP Request: POST http://127.0.0.1:8080/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-23 17:43:44 - INFO - [llm_interface:249] - Async: LLM ('Qwen3-30B-A3B') Usage - Prompt: 7088 tk, Comp: 995 tk, Total: 8083 tk
2025-05-23 17:43:44 - INFO - [chapter_evaluation_logic:225] - Comprehensive (plain text) evaluation for Ch 3 complete. LLM output: 'ISSUE CATEGORY: consistency
PROBLEM DESCRIPTION: The character Lira Vey is described as "burdened by knowledge" and "cautious, wise, fearful, guarded," but in this chapter, she appears to be more proa...'
2025-05-23 17:43:44 - WARNING - [chapter_evaluation_logic:73] - Parsed unknown issue category 'thematic_alignment' in block 4 for Ch 3. Defaulting to 'meta'.
2025-05-23 17:43:44 - WARNING - [chapter_evaluation_logic:324] - Problem quote for Ch 3 NOT VERBATIM in chapter text: '"You must stop searching, Kaelen. Or you’ll become...'. Problem: The character Lira Vey is described as "burdened by knowledge" and "cautious, wise, fearful, guarded," but in this chapter, she appears to be more proactive and direct in her warnings to Kaelen. This contradicts her established profile.
2025-05-23 17:43:44 - WARNING - [chapter_evaluation_logic:324] - Problem quote for Ch 3 NOT VERBATIM in chapter text: '"You don’t belong here. You think you’re fighting ...'. Problem: The Erebus Order is described as a secretive group that once guarded knowledge about the dream-echo and Thal’Zirath, but in this chapter, their presence is only represented by Agent Varis, who speaks with authority and appears to have direct knowledge of the city’s secrets. This may contradict the idea that the order is "secretive" and "not spoken of openly."
2025-05-23 17:43:44 - WARNING - [chapter_evaluation_logic:324] - Problem quote for Ch 3 NOT VERBATIM in chapter text: '"The more they knew, the less they were." – The sc...'. Problem: The chapter does not clearly show Kaelen realizing that "merely knowing about the hazard spreads it, turning people into hollow shells obsessed with its truth." While there are hints, the realization is not fully developed or demonstrated through Kaelen’s actions or internal conflict.
2025-05-23 17:43:44 - WARNING - [chapter_evaluation_logic:324] - Problem quote for Ch 3 NOT VERBATIM in chapter text: '"I have always believed in knowledge, in the power...'. Problem: While the chapter touches on the theme of the nature of reality, it does not fully explore Kaelen’s arc as an active architect of balance. His role as a mediator is mentioned, but his transformation into an active participant in the conflict is not clearly shown.
2025-05-23 17:43:44 - WARNING - [chapter_evaluation_logic:324] - Problem quote for Ch 3 NOT VERBATIM in chapter text: '"I don’t know if I can stop." – Kaelen...'. Problem: The chapter lacks sufficient character introspection, particularly in Kaelen’s internal conflict about the dangers of knowledge. His thoughts and emotions are not fully explored.
2025-05-23 17:43:44 - WARNING - [chapter_evaluation_logic:324] - Problem quote for Ch 3 NOT VERBATIM in chapter text: '"You must stop searching, Kaelen. Or you’ll become...'. Problem: The dialogue between Kaelen and Lira is concise but lacks emotional weight and depth. Their relationship could be more nuanced and emotionally resonant.
2025-05-23 17:43:44 - WARNING - [chapter_evaluation_logic:324] - Problem quote for Ch 3 NOT VERBATIM in chapter text: '"The Sleeper is waking."...'. Problem: The chapter ends on a cliffhanger with Kaelen realizing the Sleeper is waking, but the emotional and psychological impact of this revelation is not fully conveyed.
2025-05-23 17:43:44 - INFO - [chapter_evaluation_logic:327] - Evaluation for Ch 3 complete. Needs revision: True. Summary: Consistency issues identified by LLM.; Meta/Uncategorized issues by LLM.; Narrative Depth/Length issues by LLM.; Plot Arc deviation identified by LLM.. Detailed problems: 8
2025-05-23 17:43:44 - WARNING - [novel_agent:173] - Ch 3 initial draft (19288 chars) flagged for revision. Reasons: Consistency issues identified by LLM.; Meta/Uncategorized issues by LLM.; Narrative Depth/Length issues by LLM.; Plot Arc deviation identified by LLM.
2025-05-23 17:43:44 - WARNING - [chapter_revision_logic:262] - Attempting revision for chapter 3. Reason(s) summary:
- Consistency issues identified by LLM.
- Meta/Uncategorized issues by LLM.
- Narrative Depth/Length issues by LLM.
- Plot Arc deviation identified by LLM.
2025-05-23 17:43:44 - INFO - [chapter_revision_logic:270] - Patch-based revision enabled. Attempting to generate and apply patches for Ch 3 (8 actionable problems identified).
2025-05-23 17:43:44 - WARNING - [chapter_revision_logic:153] - Found 8 problems for Ch 3, but will only attempt to patch the first 7.
2025-05-23 17:43:44 - WARNING - [chapter_revision_logic:35] - Quote for context window not found in text: '"You must stop searching, Kaelen. Or you’ll become...' Returning full text snippet as fallback.
2025-05-23 17:43:44 - WARNING - [chapter_revision_logic:35] - Quote for context window not found in text: '"You don’t belong here. You think you’re fighting ...' Returning full text snippet as fallback.
2025-05-23 17:43:44 - WARNING - [chapter_revision_logic:35] - Quote for context window not found in text: '"The more they knew, the less they were." – The sc...' Returning full text snippet as fallback.
2025-05-23 17:43:44 - WARNING - [chapter_revision_logic:35] - Quote for context window not found in text: '"I have always believed in knowledge, in the power...' Returning full text snippet as fallback.
2025-05-23 17:43:44 - WARNING - [chapter_revision_logic:35] - Quote for context window not found in text: '"I don’t know if I can stop." – Kaelen...' Returning full text snippet as fallback.
2025-05-23 17:43:44 - WARNING - [chapter_revision_logic:35] - Quote for context window not found in text: '"You must stop searching, Kaelen. Or you’ll become...' Returning full text snippet as fallback.
2025-05-23 17:43:44 - INFO - [chapter_revision_logic:108] - Calling LLM (Qwen3-30B-A3B) for single patch in Ch 3. Problem: The character Lira Vey is described as "burdened by knowledg... Quote: "You must stop searching, Kaelen. Or you’ll become one of th...
2025-05-23 17:43:44 - INFO - [chapter_revision_logic:108] - Calling LLM (Qwen3-30B-A3B) for single patch in Ch 3. Problem: The Erebus Order is described as a secretive group that once... Quote: "You don’t belong here. You think you’re fighting for knowle...
2025-05-23 17:43:44 - INFO - [chapter_revision_logic:108] - Calling LLM (Qwen3-30B-A3B) for single patch in Ch 3. Problem: The chapter does not clearly show Kaelen realizing that "mer... Quote: "The more they knew, the less they were." – The scribe in th...
2025-05-23 17:43:44 - INFO - [chapter_revision_logic:108] - Calling LLM (Qwen3-30B-A3B) for single patch in Ch 3. Problem: While the chapter touches on the theme of the nature of real... Quote: "I have always believed in knowledge, in the power of truth ...
2025-05-23 17:43:44 - INFO - [chapter_revision_logic:108] - Calling LLM (Qwen3-30B-A3B) for single patch in Ch 3. Problem: The chapter is too short overall for the events covered and ... Quote: N/A - General Issue...
2025-05-23 17:43:44 - INFO - [chapter_revision_logic:108] - Calling LLM (Qwen3-30B-A3B) for single patch in Ch 3. Problem: The chapter lacks sufficient character introspection, partic... Quote: "I don’t know if I can stop." – Kaelen...
2025-05-23 17:43:44 - INFO - [chapter_revision_logic:108] - Calling LLM (Qwen3-30B-A3B) for single patch in Ch 3. Problem: The dialogue between Kaelen and Lira is concise but lacks em... Quote: "You must stop searching, Kaelen. Or you’ll become one of th...
2025-05-23 17:44:17 - INFO - [httpx:1740] - HTTP Request: POST http://127.0.0.1:8080/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-23 17:44:17 - INFO - [llm_interface:249] - Async: LLM ('Qwen3-30B-A3B') Usage - Prompt: 4641 tk, Comp: 839 tk, Total: 5480 tk
2025-05-23 17:44:20 - INFO - [httpx:1740] - HTTP Request: POST http://127.0.0.1:8080/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-23 17:44:20 - INFO - [llm_interface:249] - Async: LLM ('Qwen3-30B-A3B') Usage - Prompt: 4627 tk, Comp: 846 tk, Total: 5473 tk
2025-05-23 17:44:29 - INFO - [httpx:1740] - HTTP Request: POST http://127.0.0.1:8080/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-23 17:44:29 - INFO - [llm_interface:249] - Async: LLM ('Qwen3-30B-A3B') Usage - Prompt: 4641 tk, Comp: 230 tk, Total: 4871 tk
2025-05-23 17:44:38 - INFO - [httpx:1740] - HTTP Request: POST http://127.0.0.1:8080/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-23 17:44:38 - INFO - [llm_interface:249] - Async: LLM ('Qwen3-30B-A3B') Usage - Prompt: 4606 tk, Comp: 216 tk, Total: 4822 tk
2025-05-23 17:44:55 - INFO - [httpx:1740] - HTTP Request: POST http://127.0.0.1:8080/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-23 17:44:55 - INFO - [llm_interface:249] - Async: LLM ('Qwen3-30B-A3B') Usage - Prompt: 4581 tk, Comp: 485 tk, Total: 5066 tk
2025-05-23 17:45:04 - INFO - [httpx:1740] - HTTP Request: POST http://127.0.0.1:8080/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-23 17:45:04 - INFO - [llm_interface:249] - Async: LLM ('Qwen3-30B-A3B') Usage - Prompt: 4561 tk, Comp: 206 tk, Total: 4767 tk
2025-05-23 17:45:15 - INFO - [httpx:1740] - HTTP Request: POST http://127.0.0.1:8080/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-23 17:45:15 - INFO - [llm_interface:249] - Async: LLM ('Qwen3-30B-A3B') Usage - Prompt: 4591 tk, Comp: 1656 tk, Total: 6247 tk
2025-05-23 17:45:15 - INFO - [chapter_revision_logic:185] - Generated 7 patch instructions for Ch 3.
2025-05-23 17:45:15 - WARNING - [chapter_revision_logic:207] - Patching: `search_text` not found in original text. Skipping patch. Search: '"You must stop searching, Kaelen. Or you’ll become one of them." Lira’s tone is firm and urgent, whi...'
2025-05-23 17:45:15 - WARNING - [chapter_revision_logic:207] - Patching: `search_text` not found in original text. Skipping patch. Search: '"You don’t belong here. You think you’re fighting for knowledge, but you’re spreading a plague." – A...'
2025-05-23 17:45:15 - WARNING - [chapter_revision_logic:207] - Patching: `search_text` not found in original text. Skipping patch. Search: '"The more they knew, the less they were." – The scribe in the vision...'
2025-05-23 17:45:15 - WARNING - [chapter_revision_logic:207] - Patching: `search_text` not found in original text. Skipping patch. Search: '"I have always believed in knowledge, in the power of truth to illuminate the darkness. But now, I’m...'
2025-05-23 17:45:15 - WARNING - [chapter_revision_logic:207] - Patching: `search_text` not found in original text. Skipping patch. Search: '"I don’t know if I can stop." – Kaelen...'
2025-05-23 17:45:15 - WARNING - [chapter_revision_logic:207] - Patching: `search_text` not found in original text. Skipping patch. Search: '"You must stop searching, Kaelen. Or you’ll become one of them."...'
2025-05-23 17:45:15 - WARNING - [chapter_revision_logic:221] - 6/6 applicable patches could not be applied because their search_text was not found in the original chapter.
2025-05-23 17:45:15 - INFO - [chapter_revision_logic:279] - Successfully applied 7 patches to Ch 3. Original len: 19288, Patched len: 19288.
2025-05-23 17:45:15 - INFO - [chapter_revision_logic:296] - Patched text similarity score with original draft: 1.0000
2025-05-23 17:45:15 - WARNING - [chapter_revision_logic:298] - Patched text for ch 3 is too similar to original (Score: 1.0000 >= Threshold: 0.985). Patches may have been ineffective.
2025-05-23 17:45:15 - INFO - [chapter_revision_logic:421] - Revision process for ch 3 produced a candidate text (Length: 19288 chars).
2025-05-23 17:45:15 - INFO - [novel_agent:186] - Revision attempted for ch 3. Re-evaluating revised draft (19288 chars)...
2025-05-23 17:45:15 - INFO - [chapter_evaluation_logic:236] - Evaluating chapter 3 draft (length: 19288 chars)...
2025-05-23 17:45:15 - INFO - [chapter_evaluation_logic:267] - Coherence score with previous chapter (2): 0.7555
2025-05-23 17:45:15 - INFO - [prompt_data_getters:332] - Fetching and formatting filtered character profiles as PLAIN TEXT up to chapter 2.
2025-05-23 17:45:15 - INFO - [prompt_data_getters:389] - Fetching and formatting filtered world data as PLAIN TEXT up to chapter 2.
2025-05-23 17:45:15 - INFO - [chapter_evaluation_logic:176] - Calling LLM (Qwen3-30B-A3B) for comprehensive (plain text) evaluation of chapter 3...
2025-05-23 17:45:44 - INFO - [httpx:1740] - HTTP Request: POST http://127.0.0.1:8080/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-23 17:45:44 - INFO - [llm_interface:249] - Async: LLM ('Qwen3-30B-A3B') Usage - Prompt: 7088 tk, Comp: 878 tk, Total: 7966 tk
2025-05-23 17:45:44 - INFO - [chapter_evaluation_logic:225] - Comprehensive (plain text) evaluation for Ch 3 complete. LLM output: 'ISSUE CATEGORY: consistency
PROBLEM DESCRIPTION: The character of Lira Vey is described as "burdened by knowledge" and "cautious, wise, fearful, guarded," but in this chapter, she appears to be more p...'
2025-05-23 17:45:44 - WARNING - [chapter_evaluation_logic:73] - Parsed unknown issue category 'thematic_alignment' in block 4 for Ch 3. Defaulting to 'meta'.
2025-05-23 17:45:44 - WARNING - [chapter_evaluation_logic:324] - Problem quote for Ch 3 NOT VERBATIM in chapter text: '“You must stop searching, Kaelen. Or you’ll become...'. Problem: The character of Lira Vey is described as "burdened by knowledge" and "cautious, wise, fearful, guarded," but in this chapter, she appears to be more proactive and direct in her warnings to Kaelen, which may not fully align with her established traits.
2025-05-23 17:45:44 - WARNING - [chapter_evaluation_logic:324] - Problem quote for Ch 3 NOT VERBATIM in chapter text: '“You don’t belong here. You think you’re fighting ...'. Problem: The Erebus Order is described as a secretive group that once guarded knowledge about the dream-echo and Thal’Zirath, but in this chapter, Agent Varis speaks with an air of authority and familiarity that may not align with their previously established role as a hidden, shadowy force.
2025-05-23 17:45:44 - WARNING - [chapter_evaluation_logic:324] - Problem quote for Ch 3 NOT VERBATIM in chapter text: '“I don’t know if I can stop.”...'. Problem: The chapter touches on the theme of the nature of reality but does not fully explore Kaelen’s arc as an active architect of balance, instead focusing more on his internal conflict and fear.
2025-05-23 17:45:44 - WARNING - [chapter_evaluation_logic:324] - Problem quote for Ch 3 NOT VERBATIM in chapter text: '“What am I becoming? A dreamer or a nightmare?”...'. Problem: The internal monologue and introspection of Kaelen is present but could be more developed to better reflect his character arc and the novel’s themes.
2025-05-23 17:45:44 - WARNING - [chapter_evaluation_logic:324] - Problem quote for Ch 3 NOT VERBATIM in chapter text: '“The air was thick with a strange energy, like the...'. Problem: The chapter lacks sufficient descriptive detail in key locations such as the Thoughtstorms, which could enhance the atmosphere and reinforce the novel’s planetary romance elements.
2025-05-23 17:45:44 - INFO - [chapter_evaluation_logic:327] - Evaluation for Ch 3 complete. Needs revision: True. Summary: Consistency issues identified by LLM.; Meta/Uncategorized issues by LLM.; Narrative Depth/Length issues by LLM.; Plot Arc deviation identified by LLM.. Detailed problems: 8
2025-05-23 17:45:44 - ERROR - [novel_agent:191] - Revised draft for ch 3 STILL FAILED evaluation. Reasons: Consistency issues identified by LLM.; Meta/Uncategorized issues by LLM.; Narrative Depth/Length issues by LLM.; Plot Arc deviation identified by LLM.
2025-05-23 17:45:44 - WARNING - [novel_agent:194] - Reverting to original draft (19288 chars) as revised draft (19288 chars) also failed evaluation and original is longer/better.
2025-05-23 17:45:44 - INFO - [novel_agent:232] - Finalizing chapter 3 (From flawed draft: True). Text length: 19288.
2025-05-23 17:45:52 - INFO - [httpx:1740] - HTTP Request: POST http://127.0.0.1:8080/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-23 17:45:52 - INFO - [llm_interface:249] - Async: LLM ('Qwen3-30B-A3B') Usage - Prompt: 4603 tk, Comp: 128 tk, Total: 4731 tk
2025-05-23 17:45:52 - INFO - [knowledge_management_logic:91] - Generated summary for ch 3: 'Kaelen discovers the reality of the dream-echo, learning it is a dangerous memetic force that alters...'
2025-05-23 17:45:52 - INFO - [state_manager:653] - Neo4j: Successfully saved chapter data (including embedding) for chapter 3.
2025-05-23 17:45:52 - INFO - [novel_agent:259] - Saved chapter text and raw LLM log files for ch 3.
2025-05-23 17:45:52 - INFO - [novel_agent:263] - Core finalization complete for ch 3.
2025-05-23 17:45:52 - INFO - [knowledge_management_logic:779] - Updating all knowledge bases for ch 3 (Source from flawed draft: True)...
2025-05-23 17:45:52 - INFO - [knowledge_management_logic:475] - Performing unified knowledge extraction (plain text) for Chapter 3...
2025-05-23 17:45:52 - INFO - [prompt_data_getters:332] - Fetching and formatting filtered character profiles as PLAIN TEXT up to chapter 2.
2025-05-23 17:45:52 - INFO - [prompt_data_getters:389] - Fetching and formatting filtered world data as PLAIN TEXT up to chapter 2.
2025-05-23 17:45:52 - INFO - [knowledge_management_logic:594] - Calling LLM (Qwen3-30B-A3B) for unified knowledge extraction (Ch 3).
2025-05-23 17:45:59 - INFO - [httpx:1740] - HTTP Request: POST http://127.0.0.1:8080/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-23 17:46:34 - INFO - [llm_interface:249] - Async: Streamed LLM ('Qwen3-30B-A3B') Usage - Prompt: 7071 tk, Comp: 1453 tk, Total: 8524 tk
2025-05-23 17:46:34 - INFO - [knowledge_management_logic:639] - Unified knowledge extraction (plain text parsing) for Ch 3 complete. Char updates: 4, World updates categories: 3, KG Triples: 18.
2025-05-23 17:46:34 - INFO - [knowledge_management_logic:216] - Merging character profile updates for ch 3. Characters in update: ['Kaelen Vey', 'Lira Vey', 'Archivist Maelis', 'Agent Varis']
2025-05-23 17:46:34 - INFO - [knowledge_management_logic:137] - Applied trait modifications for 'Kaelen Vey'. New traits: ['Haunted', 'Introspective', 'Introspective, Observant, Cautious, Determined, Resilient', 'Observant, Cautious, Determined, Introspective', 'Resilient']
2025-05-23 17:46:34 - INFO - [knowledge_management_logic:137] - Applied trait modifications for 'Lira Vey'. New traits: ['Cautious, Wise, Fearful, Guarded', 'Fearful', 'Resigned']
2025-05-23 17:46:34 - INFO - [knowledge_management_logic:169] - Prepared new character profile for 'Archivist Maelis'.
2025-05-23 17:46:34 - INFO - [knowledge_management_logic:137] - Applied trait modifications for 'Archivist Maelis'. New traits: ['Fearful, Cautious, Wary', 'Haunted']
2025-05-23 17:46:34 - INFO - [knowledge_management_logic:169] - Prepared new character profile for 'Agent Varis'.
2025-05-23 17:46:34 - INFO - [knowledge_management_logic:137] - Applied trait modifications for 'Agent Varis'. New traits: ['Authoritative', 'Cautious, Authoritative, Unyielding']
2025-05-23 17:46:34 - INFO - [knowledge_management_logic:249] - Character profile Python dict merge complete for ch 3. Updated: 2, New: 2.
2025-05-23 17:46:34 - INFO - [knowledge_management_logic:330] - Merging world-building updates for ch 3. Categories in update: ['lore', 'locations', 'factions']
2025-05-23 17:46:34 - INFO - [knowledge_management_logic:142] - Applied modification to 'goals' for 'lore.Dream-Echo'. New value: 'ADD 'To test human knowledge', REMOVE 'To consume knowledge and truth...'
2025-05-23 17:46:34 - INFO - [knowledge_management_logic:142] - Applied modification to 'description' for 'lore.The Sleeper'. New value: 'Now revealed to be a force that controls the city and its dreams...'
2025-05-23 17:46:34 - INFO - [knowledge_management_logic:142] - Applied modification to 'atmosphere' for 'locations.The Thoughtstorms'. New value: 'Now charged with danger and ancient energy...'
2025-05-23 17:46:34 - INFO - [knowledge_management_logic:142] - Applied modification to 'goals' for 'factions.Erebus Order'. New value: 'ADD 'To suppress dangerous knowledge', REMOVE 'To prevent the misuse o...'
2025-05-23 17:46:34 - INFO - [knowledge_management_logic:374] - World-building Python dict merge complete for ch 3. Approx 4 items affected/added.
2025-05-23 17:46:34 - INFO - [knowledge_management_logic:817] - KG update from unified_extraction for ch 3: Added 18 triples, skipped 0.
2025-05-23 17:46:34 - INFO - [knowledge_management_logic:820] - Unified knowledge extraction processing complete for ch 3. In-memory dicts updated, KG triples sent to Neo4j.
2025-05-23 17:46:34 - INFO - [novel_agent:72] - Saving agent state (plot, characters, world) to Neo4j (decomposed)...
2025-05-23 17:46:34 - INFO - [state_manager:154] - Saving decomposed plot outline to Neo4j using MERGE...
2025-05-23 17:46:34 - INFO - [state_manager:252] - Saving decomposed character profiles to Neo4j using MERGE...
2025-05-23 17:46:34 - INFO - [state_manager:421] - Saving decomposed world building data to Neo4j using MERGE...
2025-05-23 17:46:34 - INFO - [state_manager:89] - Successfully executed batch of 26 Cypher statements.
2025-05-23 17:46:34 - INFO - [state_manager:531] - Successfully saved decomposed world building data to Neo4j using MERGE.
2025-05-23 17:46:34 - INFO - [state_manager:89] - Successfully executed batch of 17 Cypher statements.
2025-05-23 17:46:34 - INFO - [state_manager:218] - Successfully saved decomposed plot outline to Neo4j using MERGE.
2025-05-23 17:46:34 - INFO - [state_manager:89] - Successfully executed batch of 28 Cypher statements.
2025-05-23 17:46:34 - INFO - [state_manager:358] - Successfully saved decomposed character profiles to Neo4j using MERGE.
2025-05-23 17:46:34 - INFO - [novel_agent:88] - Successfully saved plot_outline to Neo4j (decomposed).
2025-05-23 17:46:34 - INFO - [novel_agent:88] - Successfully saved character_profiles to Neo4j (decomposed).
2025-05-23 17:46:34 - INFO - [novel_agent:88] - Successfully saved world_building to Neo4j (decomposed).
2025-05-23 17:46:34 - INFO - [novel_agent:93] - All (3) state objects saved to Neo4j (decomposed) successfully.
2025-05-23 17:46:34 - INFO - [novel_agent:228] - === Finished Ch 3 With Flaws (Marked as flawed due to evaluation or length issues) ===
2025-05-23 17:46:34 - INFO - [state_manager:615] - Neo4j loaded chapter count: 3
2025-05-23 17:46:34 - INFO - [__main__:184] - --- Saga Novel Generation Run Finished. Final Neo4j chapter count: 3 ---
2025-05-23 17:46:34 - INFO - [state_manager:54] - Neo4j driver closed.
2025-05-23 17:46:34 - INFO - [__main__:188] - Neo4j driver successfully closed on application exit.
